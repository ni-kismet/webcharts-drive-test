{"version":3,"sources":["jquery.thumb.plugin.js","jquery.flot.cursors.js"],"names":["$","thumb","currentState","createSVGLayer","placeholder","eventHolder","find","firstChild","SVGContainer","document","createElement","className","style","position","top","left","bottom","right","pointerEvents","svgLayer","createElementNS","setAttributeNS","svgThumbsSymbols","svgDefs","innerHTML","appendChild","append","body","bindEvents","createThumb","options","opts","size","x","y","svgRoot","shape","abbreviation","constraintFunction","classList","thumbIcon","thumbLabel","thumbGroup","radius","cx","cy","moveDirection","push","setAttribute","textContent","add","i","length","addEventListener","selectElement","click","reorderThumbs","updateComputedXPosition","thumbPositionMatrix","getCTM","childNodes","newThumbLableCx","e","newThumbIconCx","height","baseVal","value","updateComputedYPosition","newThumbLableCy","f","newThumbIconCy","width","shutdown","unbindEvents","moveElement","deselectElement","evt","page","getEventXYPosition","target","extractTarget","extractSVGFromTarget","selectedElement","X","Y","currentMatrix","dx","dy","transform","getItem","setMatrix","bringThumbToFront","preventDefault","stopPropagation","dispatchThumbEvent","dispatchEvent","CustomEvent","detail","getAttribute","indexOf","box","getBoundingClientRect","doc","documentElement","scrollX","window","pageXOffset","scrollLeft","clientLeft","scrollY","pageYOffset","scrollTop","clientTop","deltaHandlingX","deltaHandlingY","elClass","parentNode","tagName","focusEl","thumbsCluster","getThumbCluster","thumbEl","selectedThumb","selectedElBBox","selLeft","selRight","selTop","selBottom","clusterContent","Array","prototype","slice","call","filter","el","elBBox","elLeft","elRight","elTop","elBottom","eventType","eventTarget","thumbEvent","pageX","pageY","touches","plot","browser","getPageXY","forEach","contains","removeEventListener","jQuery","cursors","constants","iRectSize","symbolSize","mouseGrabMargin","textHeight","labelPadding","thumbRadius","init","update","createCursor","mixin","name","relativeX","relativeY","undefined","mousePosition","valign","halign","show","selected","highlighted","mode","showIntersections","showLabel","showValues","color","fontSize","fontFamily","fontStyle","fontWeight","lineWidth","movable","mouseButton","dashes","intersectionColor","intersectionLabelPosition","snapToPlot","interpolate","defaultxaxis","defaultyaxis","showThumbs","thumbAbbreviation","thumbClassList","thumbs","hooks","processOptions","getOptions","addCursor","processOffset","offset","reserveSpaceForThumbs","getCursors","currentCursor","setPosition","triggerRedrawOverlay","removeCursor","cursor","index","splice","setCursor","getIntersections","intersections","formatCursorPosition","positions","offsetIncrement","thumbSize","thumbsPresent","axesPresent","axes","direction","map","some","getXAxes","getYAxes","axis","selectedCursor","result","visibleCursors","correctMouseButton","buttonNumber","pan","start","getPlotX","getPlotY","handleCursorMoveStart","drag","handleCursorMove","end","currentlySelectedCursor","pinch","thumbmove","handleThumbMoveStart","mouseMove","move","handleCursorMoveEnd","bind","findIntersections","points","findIntersectionByInterpolation","findNearbyPointsIntersection","cursorLastMouseX","cursorLastMouseY","nearestPoint","findNearbyItem","seriesIndex","Number","MAX_VALUE","dataset","getData","ps","datapoints","pointsize","dataIndex","datapoint","leftPoint","rightPoint","pos","c2p","getAxes","xaxis","min","max","yaxis","interpolationPoint","findNearbyInterpolationPoint","isMovable","includes","touchedEl","t","targetCursor","dragmode","getPlaceholder","css","stopImmediatePropagation","buttons","mouseOverCursorManipulator","mouseOverCursorVerticalLine","mouseOverCursorHorizontalLine","Math","drawOverlay","ctx","isPositionInitialized","isMousePositionInitilized","maybeSnapToPlot","plotOffset","getPlotOffset","save","translate","determineAndSetTextQuadrant","drawVerticalAndHorizontalLines","drawLabel","drawIntersections","drawValues","symbol","drawManipulator","restore","createThumbs","updateThumbsPosition","trigger","getEventHolder","thumbCx","thumbCy","thumbOptions","xAxisThumb","mouseX","mouseY","currentX","currentY","offsetLeft","yAxisThumb","cursorX","cursorY","yThumbIndex","unbind","source","destination","Object","keys","key","findXAxis","findYAxis","p2c","point","plotData","rowsWidth","rowsHeight","count","rowCount","fontSizeInPx","substring","lowerLimit","higherLimit","font","measureText","positionTextValues","text","xTextValue","yTextValue","computeRowPosition","textAlign","labelRowIndex","valuesRowIndex","beginPath","fillStyle","fillText","stroke","fillTextAligned","textWidth","textBaseline","hasVerticalLine","coord","fillRect","floor","formatIntersectionData","toFixed","computeCursorsPrecision","canvasPosition","canvas2","point1","point2","computeValuePrecision","xaxes","zeroBasedIndex","series","yaxes","htmlSpace","htmlNewline","xaxisPrecision","xFormattedValue","tickFormatter","yaxisPrecision","yFormattedValue","replace","adj","delta","numberOfSegments","strokeStyle","lineJoin","drawX","moveTo","lineTo","drawY","drawSymbol","hasHorizontalLine","grabRadius","plugins","version"],"mappings":"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","file":"jquery.flot.cursors.js","sourcesContent":["(function ($) {\r\n    'use strict';\r\n\r\n    $.thumb = {};\r\n\r\n    var currentState;\r\n\r\n    $.thumb.createSVGLayer = function (placeholder, eventHolder) {\r\n        if (placeholder && placeholder.find('.flot-thumbs')[0]) {\r\n            return placeholder.find('.flot-thumbs')[0].firstChild;\r\n        }\r\n\r\n        var SVGContainer = document.createElement('div');\r\n        SVGContainer.className = 'flot-thumbs';\r\n        SVGContainer.style.position = 'absolute';\r\n        SVGContainer.style.top = '0px';\r\n        SVGContainer.style.left = '0px';\r\n        SVGContainer.style.bottom = '0px';\r\n        SVGContainer.style.right = '0px';\r\n        SVGContainer.style.pointerEvents = 'none';\r\n\r\n        var svgLayer = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        svgLayer.setAttributeNS(null, 'width', '100%');\r\n        svgLayer.setAttributeNS(null, 'height', '100%');\r\n\r\n        var svgThumbsSymbols = `\r\n            <symbol id=\"round\" viewBox=\"0 0 50 50\">\r\n                <polyline points=\"25,0 40,20 10,20 25,0\"></polyline>\r\n                <circle cx=\"25\" cy=\"25\" r=\"20\"/>\r\n            </symbol>\r\n            <symbol id=\"l_round\" viewBox=\"0 0 50 50\">\r\n                <use xlink:href=\"#round\" x=\"0\" y=\"0\" width=\"50\" height=\"50\" transform=\"rotate(90 25 25)\"/>\r\n            </symbol>\r\n            <symbol id=\"r_round\" viewBox=\"0 0 50 50\">\r\n                <use xlink:href=\"#round\" x=\"0\" y=\"0\" width=\"50\" height=\"50\" transform=\"rotate(270 25 25)\"/>\r\n            </symbol>\r\n            <symbol id=\"b_round\" viewBox=\"0 0 50 50\">\r\n                <use xlink:href=\"#round\" x=\"0\" y=\"0\" width=\"50\" height=\"50\" transform=\"rotate(0 25 25)\"/>\r\n            </symbol>\r\n            <symbol id=\"t_round\" viewBox=\"0 0 50 50\">\r\n                <use xlink:href=\"#round\" x=\"0\" y=\"0\" width=\"50\" height=\"50\" transform=\"rotate(180 25 25)\"/>\r\n            </symbol>`;\r\n\r\n        var svgDefs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\r\n        svgDefs.innerHTML = svgThumbsSymbols;\r\n        svgLayer.appendChild(svgDefs);\r\n\r\n        SVGContainer.appendChild(svgLayer);\r\n\r\n        if (placeholder) {\r\n            placeholder.append(SVGContainer);\r\n        } else {\r\n            document.body.appendChild(SVGContainer);\r\n        }\r\n\r\n        svgLayer.eventHolder = eventHolder || document;\r\n        bindEvents(svgLayer);\r\n\r\n        return svgLayer;\r\n    };\r\n\r\n    $.thumb.createThumb = function (options) {\r\n        var opts = {\r\n                size: options.size || 20,\r\n                x: options.x || 0,\r\n                y: options.y || 0,\r\n                svgRoot: options.svgRoot,\r\n                shape: options.shape || 'bottom',\r\n                abbreviation: options.abbreviation || '',\r\n                constraintFunction: options.constraintFunction,\r\n                classList: options.classList || ['draggable']\r\n            },\r\n            thumbIcon = document.createElementNS('http://www.w3.org/2000/svg', 'use'),\r\n            thumbLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text'),\r\n            thumbGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g'),\r\n            svgLayer = opts.svgRoot,\r\n            radius = opts.size,\r\n            cx = opts.x,\r\n            cy = opts.y,\r\n            moveDirection = '';\r\n\r\n        switch (opts.shape) {\r\n            case 'left':\r\n                moveDirection = 'y';\r\n                thumbIcon.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#l_round');\r\n                break;\r\n            case 'right':\r\n                moveDirection = 'y';\r\n                thumbIcon.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#r_round');\r\n                break;\r\n            case 'bottom':\r\n                moveDirection = 'x';\r\n                opts.classList.push('bottom');\r\n                thumbIcon.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#b_round');\r\n                break;\r\n            case 'top':\r\n                moveDirection = 'x';\r\n                thumbIcon.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#t_round');\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        thumbIcon.setAttributeNS(null, 'width', 2 * radius);\r\n        thumbIcon.setAttributeNS(null, 'height', 2 * radius);\r\n        thumbIcon.setAttributeNS(null, 'x', cx - radius);\r\n        thumbIcon.setAttributeNS(null, 'y', cy - radius);\r\n        thumbIcon.setAttribute('class', 'thumbIcon');\r\n\r\n        thumbLabel.setAttributeNS(null, 'text-anchor', 'middle');\r\n        thumbLabel.setAttributeNS(null, 'dominant-baseline', 'middle');\r\n        thumbLabel.setAttributeNS(null, 'lengthAdjust', 'spacingAndGlyphs');\r\n        thumbLabel.setAttributeNS(null, 'x', cx);\r\n        thumbLabel.setAttributeNS(null, 'y', cy);\r\n        thumbLabel.setAttributeNS(null, 'dy', '.1em');\r\n        thumbLabel.setAttribute('class', 'thumbLabel');\r\n        thumbLabel.setAttributeNS(null, 'textLength', radius);\r\n        thumbLabel.textContent = opts.abbreviation;\r\n        thumbLabel.style.pointerEvents = 'all';\r\n\r\n        thumbGroup.appendChild(thumbIcon);\r\n        thumbGroup.appendChild(thumbLabel);\r\n\r\n        thumbGroup.setAttributeNS(null, 'transform', 'matrix(1 0 0 1 0 0)');\r\n        thumbGroup.setAttribute('class', 'thumb');\r\n        thumbGroup.classList.add(moveDirection);\r\n\r\n        if (opts.classList) {\r\n            for (var i = 0; i < opts.classList.length; i++) {\r\n                if (opts.classList[i] !== '') {\r\n                    thumbGroup.classList.add(opts.classList[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        thumbGroup.style.pointerEvents = 'all';\r\n        thumbGroup.addEventListener('mousedown', selectElement, false);\r\n        thumbGroup.addEventListener('touchstart', selectElement, false);\r\n        $(thumbGroup).click(reorderThumbs);\r\n\r\n        thumbGroup.constraintFunction = opts.constraintFunction;\r\n        svgLayer.appendChild(thumbGroup);\r\n\r\n        return thumbGroup;\r\n    };\r\n\r\n    $.thumb.updateComputedXPosition = function(thumb, position) {\r\n        var thumbPositionMatrix = thumb.getCTM(),\r\n            thumbIcon = thumb.childNodes[0],\r\n            thumbLabel = thumb.childNodes[1],\r\n            newThumbLableCx = position - thumbPositionMatrix.e,\r\n            newThumbIconCx = position - thumbPositionMatrix.e - thumb.firstChild.height.baseVal.value / 2;\r\n        thumbIcon.setAttributeNS(null, 'x', newThumbIconCx);\r\n        thumbLabel.setAttributeNS(null, 'x', newThumbLableCx);\r\n    };\r\n\r\n    $.thumb.updateComputedYPosition = function(thumb, position) {\r\n        var thumbPositionMatrix = thumb.getCTM(),\r\n            thumbIcon = thumb.childNodes[0],\r\n            thumbLabel = thumb.childNodes[1],\r\n            newThumbLableCy = position - thumbPositionMatrix.f,\r\n            newThumbIconCy = position - thumbPositionMatrix.f - thumb.firstChild.width.baseVal.value / 2;\r\n\r\n        thumbIcon.setAttributeNS(null, 'y', newThumbIconCy);\r\n        thumbLabel.setAttributeNS(null, 'y', newThumbLableCy)\r\n    };\r\n\r\n    $.thumb.shutdown = function(svgRoot) {\r\n        currentState = null;\r\n        unbindEvents(svgRoot);\r\n    };\r\n\r\n    function bindEvents(svgRoot) {\r\n        svgRoot.addEventListener('mousemove', moveElement, false);\r\n        svgRoot.addEventListener('touchmove', moveElement, false);\r\n        svgRoot.addEventListener('mouseup', deselectElement, false);\r\n        svgRoot.addEventListener('touchend', deselectElement, false);\r\n    };\r\n\r\n    function moveElement(evt) {\r\n        if (!currentState) {\r\n            return;\r\n        }\r\n\r\n        var page = getEventXYPosition(evt),\r\n            target = extractTarget(evt),\r\n            svgRoot = extractSVGFromTarget(target),\r\n            eventHolder = svgRoot.eventHolder;\r\n\r\n        if (currentState.selectedElement.constraintFunction) {\r\n            [page.X, page.Y] = currentState.selectedElement.constraintFunction(page.X, page.Y, currentState.x, currentState.y);\r\n        }\r\n\r\n        var currentMatrix = currentState.selectedElement.getCTM(),\r\n            dx = page.X - currentState.x,\r\n            dy = page.Y - currentState.y;\r\n\r\n        currentMatrix.e += dx;\r\n        currentMatrix.f += dy;\r\n        currentState.selectedElement.transform.baseVal.getItem(0).setMatrix(currentMatrix);\r\n\r\n        //update last mouse position\r\n        currentState.x = page.X;\r\n        currentState.y = page.Y;\r\n\r\n        bringThumbToFront(currentState.selectedElement);\r\n\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n\r\n        //dispach new event to update cursor position\r\n        dispatchThumbEvent('thumbmove', evt, eventHolder);\r\n    };\r\n\r\n    function deselectElement(evt) {\r\n        var target = extractTarget(evt),\r\n            svgRoot = extractSVGFromTarget(target),\r\n            eventHolder = svgRoot.eventHolder;\r\n\r\n        if (currentState) {\r\n            currentState = null;\r\n            svgRoot.style.pointerEvents = 'none';\r\n            eventHolder.dispatchEvent(new CustomEvent('thumbmoveend', { detail: evt }));\r\n        }\r\n    };\r\n\r\n    function selectElement(evt) {\r\n        var target = extractTarget(evt),\r\n            svgRoot = extractSVGFromTarget(target),\r\n            eventHolder = svgRoot.eventHolder;\r\n        currentState = null;\r\n        if (target && (target.getAttribute('class').indexOf('draggable') !== -1)) {\r\n            var page = getEventXYPosition(evt),\r\n                box = target.getBoundingClientRect(),\r\n                doc = document.documentElement,\r\n                scrollX = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\r\n                scrollY = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\r\n            currentState = {\r\n                selectedElement: target,\r\n                x: page.X,\r\n                y: page.Y,\r\n                deltaHandlingX: page.X - (box.left + box.right) / 2 - scrollX,\r\n                deltaHandlingY: page.Y - (box.top + box.bottom) / 2 - scrollY\r\n            };\r\n            svgRoot.style.pointerEvents = 'all';\r\n        }\r\n\r\n        if (!currentState) {\r\n            return;\r\n        }\r\n\r\n        dispatchThumbEvent('thumbmovestart', evt, eventHolder);\r\n    };\r\n\r\n    function extractTarget(evt) {\r\n        var target = evt.target;\r\n        var elClass = evt.target.getAttribute('class');\r\n        if (elClass && elClass.indexOf('thumbIcon') !== -1) {\r\n            target = evt.target.parentNode;\r\n            elClass = target.getAttribute('class');\r\n        }\r\n        if (elClass && elClass.indexOf('thumbLabel') !== -1) {\r\n            target = evt.target.parentNode;\r\n            elClass = target.getAttribute('class');\r\n        }\r\n        return target;\r\n    };\r\n\r\n    function extractSVGFromTarget(target) {\r\n        if (target.tagName === 'svg') {\r\n            return target;\r\n        }\r\n        if (target.tagName === 'g') {\r\n            return target.parentNode;\r\n        }\r\n        return null;\r\n    };\r\n\r\n    function reorderThumbs(evt) {\r\n        var focusEl = extractTarget(evt),\r\n            thumbsCluster = [];\r\n        if (!focusEl || (focusEl.getAttribute('class').indexOf('thumb') === -1)) {\r\n            return;\r\n        }\r\n\r\n        // bring thumb from the bottom of the cluster to top\r\n        thumbsCluster = getThumbCluster(focusEl);\r\n        if (thumbsCluster.length > 0) {\r\n            bringThumbToFront(thumbsCluster[0]);\r\n        }\r\n    };\r\n\r\n    // Re-adding the thumb to the svg\r\n    function bringThumbToFront(thumbEl) {\r\n        thumbEl.parentNode.appendChild(thumbEl);\r\n    };\r\n\r\n    function getThumbCluster(selectedThumb) {\r\n        var selectedElBBox = selectedThumb.getBoundingClientRect(),\r\n            selLeft = selectedElBBox.left,\r\n            selRight = selectedElBBox.right,\r\n            selTop = selectedElBBox.top,\r\n            selBottom = selectedElBBox.bottom,\r\n            svgLayer = selectedThumb.parentNode;\r\n\r\n        var clusterContent = Array.prototype.slice.call(svgLayer.childNodes, 0).filter(function(el) {\r\n            var elBBox = el.getBoundingClientRect(),\r\n                elLeft = elBBox.left,\r\n                elRight = elBBox.right,\r\n                elTop = elBBox.top,\r\n                elBottom = elBBox.bottom;\r\n\r\n            if (elBBox.width > 0 && elBBox.height > 0) {\r\n                // true if their boundingbox overlapp\r\n                return (selLeft < elRight &&\r\n                        selRight > elLeft &&\r\n                        selTop < elBottom &&\r\n                        selBottom > elTop);\r\n            } else {\r\n                return false;\r\n            }\r\n        });\r\n\r\n        return clusterContent;\r\n    };\r\n\r\n    function dispatchThumbEvent (eventType, evt, eventTarget) {\r\n        var page = getEventXYPosition(evt),\r\n            thumbEvent = new CustomEvent(eventType, { detail: evt });\r\n        thumbEvent.pageX = page.X - currentState.deltaHandlingX;\r\n        thumbEvent.pageY = page.Y - currentState.deltaHandlingY;\r\n        eventTarget.dispatchEvent(thumbEvent);\r\n    };\r\n\r\n    function getEventXYPosition(evt) {\r\n        var page;\r\n        if (evt.touches) {\r\n            page = {\r\n                X: evt.touches[0].pageX,\r\n                Y: evt.touches[0].pageY\r\n            }\r\n        } else {\r\n            page = $.plot.browser.getPageXY(evt);\r\n        }\r\n        return page;\r\n    };\r\n\r\n    function unbindEvents(svgRoot) {\r\n        Array.prototype.forEach.call(svgRoot.childNodes, function(el) {\r\n            if (el.classList.contains('thumb')) {\r\n                el.removeEventListener('mousedown', selectElement);\r\n                el.removeEventListener('touchstart', selectElement);\r\n            }\r\n        });\r\n        svgRoot.removeEventListener('mousemove', moveElement);\r\n        svgRoot.removeEventListener('touchmove', moveElement);\r\n        svgRoot.removeEventListener('mouseup', deselectElement);\r\n        svgRoot.removeEventListener('touchend', deselectElement);\r\n    };\r\n})(jQuery);\r\n","/* Flot plugin for adding cursors to the plot.\r\n\r\nCopyright (c) cipix2000@gmail.com.\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n*/\r\n\r\n/*global jQuery*/\r\n\r\n(function ($) {\r\n    'use strict';\r\n\r\n    var options = {\r\n        cursors: []\r\n    };\r\n\r\n    var constants = {\r\n        iRectSize: 8,\r\n        symbolSize: 8,\r\n        mouseGrabMargin: 12,\r\n        textHeight: 10, // to do: compute it somehow. Canvas doesn't give us a way to know it\r\n        labelPadding: 10,\r\n        thumbRadius: 17\r\n    };\r\n\r\n    function init(plot) {\r\n        var cursors = [];\r\n        var update = [];\r\n\r\n        function createCursor(options) {\r\n            return mixin(options, {\r\n                name: 'unnamed ' + cursors.length,\r\n                position: options.position || {\r\n                    relativeX: 0.5, // relative to the with of the drawing area\r\n                    relativeY: 0.5, // relative to the height of the drawing area\r\n                    x: undefined, // plot value\r\n                    y: undefined // plot value\r\n                },\r\n                mousePosition: {\r\n                    relativeX: undefined,\r\n                    relativeY: undefined\r\n                },\r\n                x: 0, // canvas point relative to the actual data area\r\n                y: 0, // canvas point relative to the actual data area\r\n                valign: 'below',\r\n                halign: 'right',\r\n                show: true,\r\n                selected: false,\r\n                highlighted: false,\r\n                mode: 'xy',\r\n                showIntersections: false,\r\n                showLabel: false,\r\n                showValues: true,\r\n                color: 'gray',\r\n                fontSize: '10px',\r\n                fontFamily: 'sans-serif',\r\n                fontStyle: '',\r\n                fontWeight: '',\r\n                lineWidth: 1,\r\n                movable: true,\r\n                mouseButton: 'all',\r\n                dashes: 1,\r\n                intersectionColor: 'darkgray',\r\n                intersectionLabelPosition: 'bottom-right',\r\n                snapToPlot: undefined,\r\n                interpolate: false,\r\n                defaultxaxis: 1,\r\n                defaultyaxis: 1,\r\n                showThumbs: 'none',\r\n                thumbAbbreviation: 'C' + cursors.length,\r\n                thumbClassList: ['draggable'],\r\n                thumbs: []\r\n            });\r\n        }\r\n\r\n        plot.hooks.processOptions.push(function (plot) {\r\n            plot.getOptions().cursors.forEach(function (options) {\r\n                plot.addCursor(options);\r\n            });\r\n        });\r\n\r\n        plot.hooks.processOffset.push(function (plot, offset) {\r\n            reserveSpaceForThumbs(cursors, plot, offset);\r\n        });\r\n\r\n        plot.getCursors = function () {\r\n            return cursors;\r\n        };\r\n\r\n        plot.addCursor = function addCursor(options) {\r\n            var currentCursor = createCursor(options);\r\n\r\n            setPosition(plot, currentCursor, currentCursor.position);\r\n\r\n            cursors.push(currentCursor);\r\n\r\n            plot.triggerRedrawOverlay();\r\n        };\r\n\r\n        plot.removeCursor = function removeCursor(cursor) {\r\n            var index = cursors.indexOf(cursor);\r\n\r\n            if (index !== -1) {\r\n                cursors.splice(index, 1);\r\n            }\r\n\r\n            plot.triggerRedrawOverlay();\r\n        };\r\n\r\n        plot.setCursor = function setCursor(cursor, options) {\r\n            var index = cursors.indexOf(cursor);\r\n\r\n            if (index !== -1) {\r\n                mixin(options, cursors[index]);\r\n                setPosition(plot, cursors[index], cursors[index].position);\r\n                plot.triggerRedrawOverlay();\r\n            }\r\n        };\r\n\r\n        plot.getIntersections = function getIntersections(cursor) {\r\n            var index = cursors.indexOf(cursor);\r\n\r\n            if (index !== -1) {\r\n                return cursors[index].intersections;\r\n            }\r\n\r\n            return [];\r\n        };\r\n\r\n        plot.formatCursorPosition = formatCursorPosition;\r\n\r\n        var reserveSpaceForThumbs = function(cursors, plot, offset) {\r\n            var positions = ['left', 'right', 'top', 'bottom'],\r\n                offsetIncrement = [],\r\n                index = 0,\r\n                thumbSize = 2 * constants.thumbRadius,\r\n                thumbsPresent, axesPresent, axes, direction;\r\n\r\n            offsetIncrement = positions.map(function(position, index) {\r\n                thumbsPresent = cursors.some(cursor => cursor.showThumbs.indexOf(position[0]) !== -1);\r\n\r\n                axes = index > 1 ? plot.getXAxes() : plot.getYAxes();\r\n                axesPresent = axes.some(axis => axis.options.position === position);\r\n\r\n                return (thumbsPresent && !axesPresent) ? thumbSize : 0;\r\n            });\r\n\r\n            for (direction in offset) {\r\n                offset[direction] += offsetIncrement[index++];\r\n            }\r\n        };\r\n\r\n        var selectedCursor = function (cursors) {\r\n            var result;\r\n\r\n            cursors.forEach(function (cursor) {\r\n                if (cursor.selected) {\r\n                    if (!result) {\r\n                        result = cursor;\r\n                    }\r\n                }\r\n            });\r\n\r\n            return result;\r\n        };\r\n\r\n        var visibleCursors = function(cursors) {\r\n            return cursors.filter(function (cursor) {\r\n                return cursor.show;\r\n            });\r\n        };\r\n\r\n        // possible issues with ie8\r\n        var correctMouseButton = function (cursor, buttonNumber) {\r\n            switch (cursor.mouseButton) {\r\n                case 'all':\r\n                    return true;\r\n                case 'left':\r\n                    return buttonNumber === 1;\r\n                case 'middle':\r\n                    return buttonNumber === 2;\r\n                case 'right':\r\n                    return buttonNumber === 4;\r\n                default:\r\n                    return true;\r\n            }\r\n        };\r\n\r\n        var pan = {\r\n            start: function (e) {\r\n                var x = getPlotX(e.detail.touches[0].pageX);\r\n                var y = getPlotY(e.detail.touches[0].pageY);\r\n                handleCursorMoveStart(e, x, y, e.detail.touches[0].pageX, e.detail.touches[0].pageY)\r\n            },\r\n\r\n            drag: function(e) {\r\n                var x = getPlotX(e.detail.touches[0].pageX);\r\n                var y = getPlotY(e.detail.touches[0].pageY);\r\n                handleCursorMove(e, x, y, e.detail.touches[0].pageX, e.detail.touches[0].pageY);\r\n            },\r\n\r\n            end: function(e) {\r\n                var currentlySelectedCursor = selectedCursor(cursors);\r\n                if (currentlySelectedCursor) {\r\n                    currentlySelectedCursor.selected = false;\r\n                }\r\n            }\r\n        };\r\n\r\n        var pinch = {\r\n            start: function(e) {\r\n                var x = getPlotX(e.detail.touches[0].pageX);\r\n                var y = getPlotY(e.detail.touches[0].pageY);\r\n                handleCursorMoveStart(e, x, y, e.detail.touches[0].pageX, e.detail.touches[0].pageY)\r\n            },\r\n\r\n            drag: function(e) {\r\n                var x = getPlotX(e.detail.touches[0].pageX);\r\n                var y = getPlotY(e.detail.touches[0].pageY);\r\n\r\n                handleCursorMove(e, x, y, e.detail.touches[0].pageX, e.detail.touches[0].pageY);\r\n            },\r\n\r\n            end: function(e) {\r\n                var currentlySelectedCursor = selectedCursor(cursors);\r\n                if (currentlySelectedCursor) {\r\n                    currentlySelectedCursor.selected = false;\r\n                }\r\n            }\r\n        };\r\n\r\n        var thumbmove = {\r\n            start: function (e) {\r\n                handleThumbMoveStart(e);\r\n            },\r\n\r\n            drag: function(e) {\r\n                var x = getPlotX(e.pageX),\r\n                    y = getPlotY(e.pageY);\r\n                handleCursorMove(e, x, y, e.pageX, e.pageY);\r\n            },\r\n\r\n            end: function(e) {\r\n                var currentlySelectedCursor = selectedCursor(cursors);\r\n                if (currentlySelectedCursor) {\r\n                    currentlySelectedCursor.selected = false;\r\n                    currentlySelectedCursor.thumbmove = false;\r\n                }\r\n            }\r\n        };\r\n\r\n        var mouseMove = {\r\n            start: function(e) {\r\n                var page = $.plot.browser.getPageXY(e)\r\n                var x = getPlotX(page.X);\r\n                var y = getPlotY(page.Y);\r\n\r\n                handleCursorMoveStart(e, x, y, page.X, page.Y);\r\n            },\r\n\r\n            move: function(e) {\r\n                var page = $.plot.browser.getPageXY(e)\r\n                var x = getPlotX(page.X);\r\n                var y = getPlotY(page.Y);\r\n\r\n                handleCursorMove(e, x, y, page.X, page.Y);\r\n            },\r\n\r\n            end: function(e) {\r\n                var page = $.plot.browser.getPageXY(e)\r\n                var x = getPlotX(page.X);\r\n                var y = getPlotY(page.Y);\r\n\r\n                handleCursorMoveEnd(e, x, y, page.X, page.Y);\r\n            }\r\n        };\r\n\r\n        plot.hooks.bindEvents.push(function (plot, eventHolder) {\r\n            eventHolder[0].addEventListener('panstart', pan.start, false);\r\n            eventHolder[0].addEventListener('pandrag', pan.drag, false);\r\n            eventHolder[0].addEventListener('panend', pan.end, false);\r\n            eventHolder[0].addEventListener('pinchstart', pinch.start, false);\r\n            eventHolder[0].addEventListener('pinchdrag', pinch.drag, false);\r\n            eventHolder[0].addEventListener('pinchend', pinch.end, false);\r\n\r\n            eventHolder[0].addEventListener('thumbmovestart', thumbmove.start, false);\r\n            eventHolder[0].addEventListener('thumbmove', thumbmove.drag, false);\r\n            eventHolder[0].addEventListener('thumbmoveend', thumbmove.end, false);\r\n\r\n            eventHolder.bind('mousedown', mouseMove.start);\r\n            eventHolder.bind('mousemove', mouseMove.move);\r\n            eventHolder.bind('mouseup', mouseMove.end);\r\n        });\r\n\r\n        function findIntersections(plot, cursor) {\r\n            var intersections = {\r\n                cursor: cursor.name,\r\n                points: []\r\n            };\r\n            if (cursor.interpolate) {\r\n                findIntersectionByInterpolation(plot, cursor, intersections);\r\n            } else {\r\n                findNearbyPointsIntersection(plot, cursor, intersections)\r\n            }\r\n\r\n            return intersections;\r\n        }\r\n\r\n        function findNearbyPointsIntersection (plot, cursor, intersections) {\r\n            var cursorLastMouseX = cursor.mousePosition.relativeX * plot.width(),\r\n                cursorLastMouseY = cursor.mousePosition.relativeY * plot.height(),\r\n                nearestPoint = plot.findNearbyItem(cursorLastMouseX, cursorLastMouseY, function(seriesIndex) {\r\n                    return cursor.snapToPlot === -1 || seriesIndex === cursor.snapToPlot;\r\n                }, Number.MAX_VALUE, function(x, y) {\r\n                    return x * x + y * y * 0.025;\r\n                });\r\n\r\n            if (nearestPoint) {\r\n                var dataset = plot.getData(),\r\n                    ps = dataset[nearestPoint.seriesIndex].datapoints.pointsize,\r\n                    i = nearestPoint.dataIndex * ps;\r\n\r\n                intersections.points.push({\r\n                    x: nearestPoint.datapoint[0],\r\n                    y: nearestPoint.datapoint[1],\r\n                    leftPoint: [i - ps, i - ps + 1],\r\n                    rightPoint: [i, i + 1],\r\n                    seriesIndex: nearestPoint.seriesIndex\r\n                });\r\n            }\r\n        }\r\n\r\n        function findIntersectionByInterpolation(plot, cursor, intersections) {\r\n            var pos = plot.c2p({\r\n                left: cursor.x,\r\n                top: cursor.y\r\n            });\r\n\r\n            var axes = plot.getAxes();\r\n            if (pos.x < axes.xaxis.min || pos.x > axes.xaxis.max ||\r\n                pos.y < axes.yaxis.min || pos.y > axes.yaxis.max) {\r\n                return;\r\n            }\r\n\r\n            var interpolationPoint = plot.findNearbyInterpolationPoint(pos.x, pos.y, function(seriesIndex) {\r\n                return cursor.snapToPlot === -1 || seriesIndex === cursor.snapToPlot;\r\n            });\r\n\r\n            if (interpolationPoint) {\r\n                intersections.points.push({\r\n                    x: interpolationPoint.datapoint[0],\r\n                    y: interpolationPoint.datapoint[1],\r\n                    leftPoint: interpolationPoint.leftPoint,\r\n                    rightPoint: interpolationPoint.rightPoint,\r\n                    seriesIndex: interpolationPoint.seriesIndex\r\n                });\r\n            }\r\n        }\r\n\r\n        function handleThumbMoveStart(e) {\r\n            function isMovable(thumb) {\r\n                return thumb.getAttribute('class').includes('draggable');\r\n            }\r\n\r\n            function extractTarget(touchedEl) {\r\n                var target = touchedEl,\r\n                    elClass = touchedEl.getAttribute('class');\r\n                if (elClass.includes('thumbIcon') || elClass.includes('thumbLabel')) {\r\n                    target = touchedEl.parentNode;\r\n                    elClass = target.getAttribute('class');\r\n                }\r\n                if (elClass.includes('thumb')) {\r\n                    return target;\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            var currentlySelectedCursor = selectedCursor(cursors);\r\n            if (!currentlySelectedCursor) {\r\n                // find nearby cursor and unlock it\r\n                visibleCursors(cursors)\r\n                    .filter(cursor => cursor.movable === true)\r\n                    .forEach(function(cursor) {\r\n                        cursor.thumbs\r\n                            .filter(isMovable)\r\n                            .filter(t => t === extractTarget(e.detail.target))\r\n                            .forEach(function (thumb) {\r\n                                var targetCursor = cursor;\r\n                                if (targetCursor) {\r\n                                    if (thumb.classList.contains('x')) {\r\n                                        targetCursor.dragmode = 'x';\r\n                                    } else {\r\n                                        targetCursor.dragmode = 'y';\r\n                                    }\r\n                                    targetCursor.selected = true;\r\n                                    targetCursor.thumbmove = true;\r\n\r\n                                    if (targetCursor.mode === 'x') {\r\n                                        plot.getPlaceholder().css('cursor', 'ew-resize');\r\n                                    } else if (targetCursor.mode === 'y') {\r\n                                        plot.getPlaceholder().css('cursor', 'ns-resize');\r\n                                    }\r\n\r\n                                    plot.getPlaceholder().css('cursor', 'move');\r\n                                    plot.triggerRedrawOverlay();\r\n                                    e.stopImmediatePropagation();\r\n                                    e.preventDefault();\r\n                                }\r\n                            });\r\n                    });\r\n            }\r\n        }\r\n\r\n        function handleCursorMove(e, x, y, pageX, pageY) {\r\n            var currentlySelectedCursor = selectedCursor(cursors);\r\n\r\n            if (currentlySelectedCursor && e.buttons !== 0) {\r\n                if (currentlySelectedCursor.dragmode.indexOf('x') !== -1) {\r\n                    currentlySelectedCursor.x = x;\r\n                    currentlySelectedCursor.position.relativeX = currentlySelectedCursor.x / plot.width();\r\n                    currentlySelectedCursor.mousePosition.relativeX = x / plot.width();\r\n                }\r\n\r\n                if (currentlySelectedCursor.dragmode.indexOf('y') !== -1) {\r\n                    currentlySelectedCursor.y = y;\r\n                    currentlySelectedCursor.position.relativeY = currentlySelectedCursor.y / plot.height();\r\n                    currentlySelectedCursor.mousePosition.relativeY = y / plot.height();\r\n                }\r\n\r\n                plot.triggerRedrawOverlay();\r\n                e.stopImmediatePropagation();\r\n                e.preventDefault();\r\n            } else {\r\n                // in case the mouse button was released outside the plot area\r\n                if (currentlySelectedCursor && e.buttons === 0) {\r\n                    currentlySelectedCursor.selected = false;\r\n                    plot.triggerRedrawOverlay();\r\n                }\r\n                visibleCursors(cursors).forEach(function (cursor) {\r\n                    if (!cursor.movable) {\r\n                        return;\r\n                    }\r\n                    if (mouseOverCursorManipulator(pageX, pageY, plot, cursor)) {\r\n                        if (!cursor.highlighted) {\r\n                            cursor.highlighted = true;\r\n                            plot.triggerRedrawOverlay();\r\n                        }\r\n\r\n                        plot.getPlaceholder().css('cursor', 'pointer');\r\n                    } else if (mouseOverCursorVerticalLine(pageX, pageY, plot, cursor)) {\r\n                        if (!cursor.highlighted) {\r\n                            cursor.highlighted = true;\r\n                            plot.triggerRedrawOverlay();\r\n                        }\r\n\r\n                        plot.getPlaceholder().css('cursor', 'col-resize');\r\n                    } else if (mouseOverCursorHorizontalLine(pageX, pageY, plot, cursor)) {\r\n                        if (!cursor.highlighted) {\r\n                            cursor.highlighted = true;\r\n                            plot.triggerRedrawOverlay();\r\n                        }\r\n\r\n                        plot.getPlaceholder().css('cursor', 'row-resize');\r\n                    } else {\r\n                        if (cursor.highlighted) {\r\n                            cursor.highlighted = false;\r\n                            plot.getPlaceholder().css('cursor', 'default');\r\n                            plot.triggerRedrawOverlay();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        function handleCursorMoveStart(e, x, y, pageX, pageY) {\r\n            var currentlySelectedCursor = selectedCursor(cursors);\r\n            if (currentlySelectedCursor) {\r\n                plot.getPlaceholder().css('cursor', 'default');\r\n                currentlySelectedCursor.x = x;\r\n                currentlySelectedCursor.y = y;\r\n                currentlySelectedCursor.position.relativeX = currentlySelectedCursor.x / plot.width();\r\n                currentlySelectedCursor.position.relativeY = currentlySelectedCursor.y / plot.height();\r\n\r\n                plot.triggerRedrawOverlay();\r\n            } else {\r\n                // find nearby cursor and unlock it\r\n                var targetCursor;\r\n                var dragmode;\r\n\r\n                visibleCursors(cursors).forEach(function (cursor) {\r\n                    if (!cursor.movable) {\r\n                        return;\r\n                    }\r\n                    if (mouseOverCursorHorizontalLine(pageX, pageY, plot, cursor)) {\r\n                        targetCursor = cursor;\r\n                        dragmode = 'y';\r\n                    }\r\n                    if (mouseOverCursorVerticalLine(pageX, pageY, plot, cursor)) {\r\n                        targetCursor = cursor;\r\n                        dragmode = 'x';\r\n                    }\r\n                    if (mouseOverCursorManipulator(pageX, pageY, plot, cursor)) {\r\n                        targetCursor = cursor;\r\n                        dragmode = 'xy';\r\n                    }\r\n                });\r\n\r\n                if (targetCursor) {\r\n                    if (!correctMouseButton(targetCursor, e.buttons)) {\r\n                        return;\r\n                    }\r\n                    targetCursor.thumbmove = false;\r\n                    targetCursor.selected = true;\r\n                    targetCursor.dragmode = dragmode;\r\n                    // changed for InsightCM -max\r\n                    if (targetCursor.mode === 'x') {\r\n                        plot.getPlaceholder().css('cursor', 'ew-resize');\r\n                    } else if (targetCursor.mode === 'y') {\r\n                        plot.getPlaceholder().css('cursor', 'ns-resize');\r\n                    } else {\r\n                        plot.getPlaceholder().css('cursor', 'move');\r\n                    }\r\n                    plot.getPlaceholder().css('cursor', 'move');\r\n                    plot.triggerRedrawOverlay();\r\n                    e.stopImmediatePropagation();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }\r\n\r\n        function handleCursorMoveEnd(e, x, y, pageX, pageY) {\r\n            var currentlySelectedCursor = selectedCursor(cursors);\r\n\r\n            if (currentlySelectedCursor) {\r\n                if (!correctMouseButton(currentlySelectedCursor, e.buttons)) {\r\n                    return;\r\n                }\r\n                // lock the free cursor to current position\r\n                currentlySelectedCursor.selected = false;\r\n                currentlySelectedCursor.thumbmove = false;\r\n                if (currentlySelectedCursor.dragmode.indexOf('x') !== -1) {\r\n                    currentlySelectedCursor.x = x;\r\n                    currentlySelectedCursor.mousePosition.relativeX = x / plot.width();\r\n                    currentlySelectedCursor.position.relativeX = currentlySelectedCursor.x / plot.width();\r\n                }\r\n\r\n                if (currentlySelectedCursor.dragmode.indexOf('y') !== -1) {\r\n                    currentlySelectedCursor.y = y;\r\n                    currentlySelectedCursor.mousePosition.relativeY = y / plot.height();\r\n                    currentlySelectedCursor.position.relativeY = currentlySelectedCursor.y / plot.height();\r\n                }\r\n\r\n                plot.getPlaceholder().css('cursor', 'default');\r\n                plot.triggerRedrawOverlay();\r\n                e.stopImmediatePropagation();\r\n                e.preventDefault();\r\n            }\r\n        }\r\n\r\n        function getPlotX(pageX) {\r\n            var offset = plot.offset();\r\n            return Math.max(0, Math.min(pageX - offset.left, plot.width()));\r\n        }\r\n\r\n        function getPlotY(pageY) {\r\n            var offset = plot.offset();\r\n            return Math.max(0, Math.min(pageY - offset.top, plot.height()));\r\n        }\r\n\r\n        plot.hooks.drawOverlay.push(function (plot, ctx) {\r\n            var isPositionInitialized = function(position) {\r\n                    return position.x !== undefined && position.y !== undefined &&\r\n                        position.relativeX !== undefined && position.relativeY !== undefined;\r\n                },\r\n                isMousePositionInitilized = function(mousePosition) {\r\n                    return mousePosition.relativeX !== undefined && mousePosition.relativeY !== undefined;\r\n                };\r\n\r\n            update = [];\r\n\r\n            cursors.forEach(function (cursor) {\r\n                var intersections;\r\n\r\n                if (!isPositionInitialized(cursor.position)) {\r\n                    setPosition(plot, cursor, cursor.position);\r\n                }\r\n                if (!isMousePositionInitilized(cursor.mousePosition)) {\r\n                    cursor.mousePosition.relativeX = cursor.x / plot.width();\r\n                    cursor.mousePosition.relativeY = cursor.y / plot.height();\r\n                }\r\n\r\n                intersections = findIntersections(plot, cursor);\r\n                maybeSnapToPlot(plot, cursor, intersections);\r\n                cursor.intersections = intersections;\r\n                intersections.target = cursor;\r\n                update.push(intersections);\r\n\r\n                if (cursor.show) {\r\n                    var plotOffset = plot.getPlotOffset();\r\n\r\n                    ctx.save();\r\n                    ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n                    determineAndSetTextQuadrant(plot, ctx, cursor);\r\n                    drawVerticalAndHorizontalLines(plot, ctx, cursor);\r\n                    drawLabel(plot, ctx, cursor);\r\n                    drawIntersections(plot, ctx, cursor);\r\n                    drawValues(plot, ctx, cursor);\r\n                    if (cursor.symbol !== 'none') {\r\n                        drawManipulator(plot, ctx, cursor);\r\n                    }\r\n\r\n                    ctx.restore();\r\n\r\n                    if (cursor.showThumbs !== 'none') {\r\n                        if (cursor.thumbs.length === 0) {\r\n                            createThumbs(cursor, plot, plotOffset);\r\n                        } else if (!cursor.thumbmove) {\r\n                            //the case where cursor was moved not due to a thumb move\r\n                            updateThumbsPosition(cursor, plotOffset);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (update.length > 0) {\r\n                plot.getPlaceholder().trigger('cursorupdates', [update]);\r\n            }\r\n        });\r\n\r\n        function createThumbs(cursor, plot, plotOffset) {\r\n            var svgRoot = $.thumb.createSVGLayer(plot.getPlaceholder(), plot.getEventHolder()),\r\n                thumb, thumbCx, thumbCy, constraintFunction,\r\n                thumbOptions = {\r\n                    size: constants.thumbRadius,\r\n                    svgRoot: svgRoot,\r\n                    abbreviation: cursor.thumbAbbreviation || cursor.name[0],\r\n                    classList: cursor.thumbClassList\r\n                };\r\n\r\n            if (xAxisThumb(cursor)) {\r\n                thumbCx = cursor.x + plotOffset.left;\r\n                thumbCy = cursor.showThumbs.indexOf('b') !== -1 ? plot.height() + plotOffset.top + constants.thumbRadius : plotOffset.top - constants.thumbRadius;\r\n                constraintFunction = function (mouseX, mouseY, currentX, currentY) {\r\n                    var offsetLeft = plot.offset().left,\r\n                        x = Math.max(offsetLeft, Math.min(mouseX, plot.width() + offsetLeft));\r\n                    return [x, currentY];\r\n                };\r\n\r\n                thumbOptions.shape = cursor.showThumbs.indexOf('b') !== -1 ? 'bottom' : 'top';\r\n                thumbOptions.x = thumbCx;\r\n                thumbOptions.y = thumbCy;\r\n                thumbOptions.constraintFunction = constraintFunction;\r\n\r\n                thumb = $.thumb.createThumb(thumbOptions);\r\n                cursor.thumbs.push(thumb);\r\n            }\r\n            if (yAxisThumb(cursor)) {\r\n                thumbCx = cursor.showThumbs.indexOf('l') !== -1 ? plotOffset.left - constants.thumbRadius : plotOffset.left + plot.width() + constants.thumbRadius;\r\n                thumbCy = cursor.y + plotOffset.top;\r\n                constraintFunction = function (mouseX, mouseY, currentX, currentY) {\r\n                    var offset = plot.offset(),\r\n                        y = Math.max(offset.top, Math.min(mouseY, plot.height() + offset.top));\r\n                    return [currentX, y];\r\n                };\r\n\r\n                thumbOptions.shape = cursor.showThumbs.indexOf('l') !== -1 ? 'left' : 'right';\r\n                thumbOptions.x = thumbCx;\r\n                thumbOptions.y = thumbCy;\r\n                thumbOptions.constraintFunction = constraintFunction;\r\n\r\n                thumb = $.thumb.createThumb(thumbOptions);\r\n                cursor.thumbs.push(thumb);\r\n            }\r\n        }\r\n\r\n        function updateThumbsPosition(cursor, plotOffset) {\r\n            var cursorX, cursorY, yThumbIndex;\r\n            if (xAxisThumb(cursor)) {\r\n                cursorX = cursor.x + plotOffset.left;\r\n                $.thumb.updateComputedXPosition(cursor.thumbs[0], cursorX);\r\n            }\r\n            if (yAxisThumb(cursor)) {\r\n                cursorY = cursor.y + plotOffset.top;\r\n                yThumbIndex = xAxisThumb(cursor) ? 1 : 0;\r\n                $.thumb.updateComputedYPosition(cursor.thumbs[yThumbIndex], cursorY);\r\n            }\r\n        }\r\n\r\n        function xAxisThumb(cursor) {\r\n            return (cursor.showThumbs.indexOf('b') !== -1 || cursor.showThumbs.indexOf('t') !== -1);\r\n        }\r\n\r\n        function yAxisThumb(cursor) {\r\n            return (cursor.showThumbs.indexOf('l') !== -1 || cursor.showThumbs.indexOf('r') !== -1);\r\n        }\r\n\r\n        plot.hooks.shutdown.push(function (plot, eventHolder) {\r\n            eventHolder[0].removeEventListener('panstart', pan.start);\r\n            eventHolder[0].removeEventListener('pandrag', pan.drag);\r\n            eventHolder[0].removeEventListener('panend', pan.end);\r\n            eventHolder[0].removeEventListener('pinchstart', pinch.start);\r\n            eventHolder[0].removeEventListener('pinchdrag', pinch.drag);\r\n            eventHolder[0].removeEventListener('pinchend', pinch.end);\r\n\r\n            eventHolder[0].removeEventListener('thumbmovestart', thumbmove.start);\r\n            eventHolder[0].removeEventListener('thumbmove', thumbmove.drag);\r\n            eventHolder[0].removeEventListener('thumbmoveend', thumbmove.end);\r\n\r\n            eventHolder.unbind('mousedown', mouseMove.start);\r\n            eventHolder.unbind('mousemove', mouseMove.move);\r\n            eventHolder.unbind('mouseup', mouseMove.end);\r\n\r\n            eventHolder.unbind('cursorupdates');\r\n\r\n            var placeholder = plot.getPlaceholder();\r\n            placeholder.css('cursor', 'default');\r\n            if (placeholder.find('.flot-thumbs')[0]) {\r\n                $.thumb.shutdown(placeholder.find('.flot-thumbs')[0].firstChild);\r\n            }\r\n        });\r\n    }\r\n\r\n    function mixin(source, destination) {\r\n        Object.keys(source).forEach(function (key) {\r\n            destination[key] = source[key];\r\n        });\r\n\r\n        return destination;\r\n    }\r\n\r\n    /**\r\n        Calculate and set the canvas coords based on relative coords or plot values.\r\n        When both provided then the relative coords will be took into account\r\n        and the plot values ignored.\r\n     */\r\n    function setPosition(plot, cursor, pos) {\r\n        var xaxis = findXAxis(plot, cursor),\r\n            yaxis = findYAxis(plot, cursor),\r\n            x = pos.relativeX !== undefined\r\n                ? pos.relativeX * plot.width()\r\n                : (xaxis.p2c ? xaxis.p2c(pos.x) : undefined),\r\n            y = pos.relativeX !== undefined\r\n                ? pos.relativeY * plot.height()\r\n                : (yaxis.p2c ? yaxis.p2c(pos.y) : undefined);\r\n\r\n        cursor.x = Math.max(0, Math.min(x, plot.width()));\r\n        cursor.y = Math.max(0, Math.min(y, plot.height()));\r\n    }\r\n\r\n    function maybeSnapToPlot(plot, cursor, intersections) {\r\n        if (cursor.snapToPlot >= -1) {\r\n            var point = intersections.points[0];\r\n\r\n            if (point) {\r\n                var plotData = plot.getData()[point.seriesIndex],\r\n                    relativeX = plotData.xaxis.p2c(point.x) / plot.width(),\r\n                    relativeY = plotData.yaxis.p2c(point.y) / plot.height();\r\n\r\n                setPosition(plot, cursor, {\r\n                    x: point.x,\r\n                    y: point.y\r\n                });\r\n\r\n                cursor.position.relativeX = relativeX;\r\n                cursor.position.relativeY = relativeY;\r\n                intersections.x = point.x; // update cursor position\r\n                intersections.y = point.y;\r\n            }\r\n        }\r\n    }\r\n\r\n    function determineAndSetTextQuadrant(plot, ctx, cursor) {\r\n        var width = plot.width(),\r\n            height = plot.height(),\r\n            y = cursor.y,\r\n            x = cursor.x,\r\n            rowsWidth = 0,\r\n            rowsHeight = 0,\r\n            count = rowCount(cursor),\r\n            fontSizeInPx = Number(cursor.fontSize.substring(0, cursor.fontSize.length - 2)),\r\n            lowerLimit = 0.05,\r\n            higherLimit = 1 - lowerLimit;\r\n\r\n        ctx.font = cursor.fontStyle + ' ' + cursor.fontWeight + ' ' + cursor.fontSize + ' ' + cursor.fontFamily;\r\n        if (cursor.showLabel) {\r\n            rowsWidth = Math.max(rowsWidth, ctx.measureText(cursor.name).width);\r\n        }\r\n        if (cursor.showValues) {\r\n            var positionTextValues = formatCursorPosition(plot, cursor),\r\n                text = positionTextValues.xTextValue + \", \" + positionTextValues.yTextValue;\r\n            rowsWidth = Math.max(rowsWidth, ctx.measureText(text).width);\r\n        }\r\n\r\n        if (cursor.halign === 'right' && x + rowsWidth > width * higherLimit) {\r\n            cursor.halign = 'left';\r\n        } else if (cursor.halign === 'left' && x - rowsWidth < width * lowerLimit) {\r\n            cursor.halign = 'right';\r\n        }\r\n\r\n        rowsHeight = count * (fontSizeInPx + constants.labelPadding);\r\n\r\n        if (cursor.valign === 'below' && y + rowsHeight > height * higherLimit) {\r\n            cursor.valign = 'above';\r\n        } else if (cursor.valign === 'above' && y - rowsHeight < height * lowerLimit) {\r\n            cursor.valign = 'below';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * The text displayed next to the cursor can be stacked as rows and their positions can be calculated with this function.\r\n     * The bottom one has the index = 0, and the top one has the index = count -1. Depending on the current cursor's possition\r\n     * relative to the center of the plot, index and count, the positions will be computed like this:\r\n     *\r\n     *               |\r\n     *           two | two\r\n     *           one | one\r\n     *          zero | zero\r\n     *       --------+--------\r\n     *           two | two\r\n     *           one | one\r\n     *          zero | zero\r\n     *               |\r\n     */\r\n    function computeRowPosition(plot, cursor, index, count) {\r\n        var textAlign = 'left';\r\n        var fontSizeInPx = Number(cursor.fontSize.substring(0, cursor.fontSize.length - 2));\r\n\r\n        var y = cursor.y;\r\n        var x = cursor.x;\r\n\r\n        if (cursor.halign === 'left') {\r\n            x -= constants.labelPadding;\r\n            textAlign = 'right';\r\n        } else {\r\n            x += constants.labelPadding;\r\n        }\r\n\r\n        if (cursor.valign === 'above') {\r\n            y -= constants.labelPadding * (count - index) + fontSizeInPx * (count - 1 - index);\r\n        } else {\r\n            y += constants.labelPadding * (index + 1) + fontSizeInPx * (index + 1);\r\n        }\r\n\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            textAlign: textAlign\r\n        };\r\n    }\r\n\r\n    function rowCount(cursor) {\r\n        return (cursor.showLabel ? 1 : 0) + (cursor.showValues ? 1 : 0);\r\n    }\r\n\r\n    function labelRowIndex(cursor) {\r\n        return 0;\r\n    }\r\n\r\n    function valuesRowIndex(cursor) {\r\n        return cursor.showLabel ? 1 : 0;\r\n    }\r\n\r\n    function drawLabel(plot, ctx, cursor) {\r\n        if (cursor.showLabel) {\r\n            ctx.beginPath();\r\n            var position = computeRowPosition(plot, cursor, labelRowIndex(cursor), rowCount(cursor));\r\n            ctx.fillStyle = cursor.color;\r\n            ctx.textAlign = position.textAlign;\r\n            ctx.font = cursor.fontStyle + ' ' + cursor.fontWeight + ' ' + cursor.fontSize + ' ' + cursor.fontFamily;\r\n            ctx.fillText(cursor.name, position.x, position.y);\r\n            ctx.textAlign = 'left';\r\n            ctx.stroke();\r\n        }\r\n    }\r\n\r\n    function fillTextAligned(ctx, text, x, y, position, fontStyle, fontWeight, fontSize, fontFamily) {\r\n        var fontSizeInPx = Number(fontSize.substring(0, fontSize.length - 2));\r\n        var textWidth;\r\n        switch (position) {\r\n            case 'left':\r\n                textWidth = ctx.measureText(text).width;\r\n                x = x - textWidth - constants.iRectSize;\r\n                break;\r\n            case 'bottom-left':\r\n                textWidth = ctx.measureText(text).width;\r\n                x = x - textWidth - constants.iRectSize;\r\n                y = y + fontSizeInPx;\r\n                break;\r\n            case 'top-left':\r\n                textWidth = ctx.measureText(text).width;\r\n                x = x - textWidth - constants.iRectSize;\r\n                y = y - constants.iRectSize;\r\n                break;\r\n            case 'top-right':\r\n                x = x + constants.iRectSize;\r\n                y = y - constants.iRectSize;\r\n                break;\r\n            case 'right':\r\n                x = x + constants.iRectSize;\r\n                break;\r\n            case 'bottom-right':\r\n            default:\r\n                x = x + constants.iRectSize;\r\n                y = y + fontSizeInPx;\r\n                break;\r\n        }\r\n\r\n        ctx.textBaseline = \"middle\";\r\n        ctx.font = fontStyle + ' ' + fontWeight + ' ' + fontSize + ' ' + fontFamily;\r\n        ctx.fillText(text, x, y);\r\n    }\r\n\r\n    function drawIntersections(plot, ctx, cursor) {\r\n        if (cursor.showIntersections && hasVerticalLine(cursor)) {\r\n            ctx.beginPath();\r\n            if (cursor.intersections === undefined) {\r\n                return;\r\n            }\r\n            cursor.intersections.points.forEach(function (point, index) {\r\n                if (typeof cursor.showIntersections === 'object') {\r\n                    if (cursor.showIntersections.indexOf(index) === -1) {\r\n                        return;\r\n                    }\r\n                }\r\n                var coord = plot.p2c(point);\r\n                ctx.fillStyle = cursor.intersectionColor;\r\n                ctx.fillRect(Math.floor(coord.left) - constants.iRectSize / 2,\r\n                    Math.floor(coord.top) - constants.iRectSize / 2,\r\n                    constants.iRectSize, constants.iRectSize);\r\n\r\n                var text;\r\n                if (typeof cursor.formatIntersectionData === 'function') {\r\n                    text = cursor.formatIntersectionData(point);\r\n                } else {\r\n                    text = point.y.toFixed(2);\r\n                }\r\n\r\n                fillTextAligned(ctx, text, coord.left, coord.top, cursor.intersectionLabelPosition, cursor.fontStyle, cursor.fontWeight, cursor.fontSize, cursor.fontFamily);\r\n            });\r\n            ctx.stroke();\r\n        }\r\n    }\r\n\r\n    function computeCursorsPrecision(plot, axis, canvasPosition) {\r\n        var canvas2 = axis.direction === \"x\" ? canvasPosition + 1 : canvasPosition - 1,\r\n            point1 = axis.c2p(canvasPosition),\r\n            point2 = axis.c2p(canvas2);\r\n\r\n        return plot.computeValuePrecision(point1, point2, axis.direction, 1);\r\n    }\r\n\r\n    function findXAxis(plot, cursor) {\r\n        var dataset = plot.getData(),\r\n            xaxes = plot.getXAxes(),\r\n            zeroBasedIndex = cursor.defaultxaxis - 1;\r\n        if (cursor.snapToPlot >= -1) {\r\n            if (cursor.intersections && cursor.intersections.points[0]) {\r\n                var series = dataset[cursor.intersections.points[0].seriesIndex];\r\n                return series ? series.xaxis : xaxes[zeroBasedIndex];\r\n            } else {\r\n                return xaxes[zeroBasedIndex];\r\n            }\r\n        } else {\r\n            return xaxes[zeroBasedIndex];\r\n        }\r\n    }\r\n\r\n    function findYAxis(plot, cursor) {\r\n        var dataset = plot.getData(),\r\n            yaxes = plot.getYAxes(),\r\n            zeroBasedIndex = cursor.defaultyaxis - 1;\r\n        if (cursor.snapToPlot >= -1) {\r\n            if (cursor.intersections && cursor.intersections.points[0]) {\r\n                var series = dataset[cursor.intersections.points[0].seriesIndex];\r\n                return series ? series.yaxis : yaxes[zeroBasedIndex];\r\n            } else {\r\n                return yaxes[zeroBasedIndex];\r\n            }\r\n        } else {\r\n            return yaxes[zeroBasedIndex];\r\n        }\r\n    }\r\n\r\n    function formatCursorPosition(plot, cursor) {\r\n        var xaxis = findXAxis(plot, cursor),\r\n            yaxis = findYAxis(plot, cursor),\r\n            htmlSpace = '&nbsp;',\r\n            htmlNewline = '<br>',\r\n            xaxisPrecision = computeCursorsPrecision(plot, xaxis, cursor.x),\r\n            xFormattedValue = xaxis.tickFormatter(xaxis.c2p(cursor.x), xaxis, xaxisPrecision, plot),\r\n            yaxisPrecision = computeCursorsPrecision(plot, yaxis, cursor.y),\r\n            yFormattedValue = yaxis.tickFormatter(yaxis.c2p(cursor.y), yaxis, yaxisPrecision, plot);\r\n\r\n        xFormattedValue = xFormattedValue.replace(htmlNewline, \" \");\r\n        xFormattedValue = xFormattedValue.replace(htmlSpace, \" \");\r\n\r\n        yFormattedValue = yFormattedValue.replace(htmlNewline, \" \");\r\n        yFormattedValue = yFormattedValue.replace(htmlSpace, \" \");\r\n\r\n        return {\r\n            xTextValue: xFormattedValue,\r\n            yTextValue: yFormattedValue\r\n        }\r\n    }\r\n\r\n    function drawValues(plot, ctx, cursor) {\r\n        if (cursor.showValues) {\r\n            var positionTextValues = formatCursorPosition(plot, cursor),\r\n                text = positionTextValues.xTextValue + \", \" + positionTextValues.yTextValue,\r\n                position = computeRowPosition(plot, cursor, valuesRowIndex(cursor), rowCount(cursor));\r\n\r\n            ctx.fillStyle = cursor.color;\r\n            ctx.textAlign = position.textAlign;\r\n            ctx.font = cursor.fontStyle + ' ' + cursor.fontWeight + ' ' + cursor.fontSize + ' ' + cursor.fontFamily;\r\n            ctx.fillText(text, position.x, position.y);\r\n        }\r\n    }\r\n\r\n    function drawVerticalAndHorizontalLines(plot, ctx, cursor) {\r\n        // abort draw if linewidth is zero\r\n        if (cursor.lineWidth === 0) {\r\n            return;\r\n        }\r\n        // keep line sharp\r\n        var adj = cursor.lineWidth % 2 ? 0.5 : 0,\r\n            delta, numberOfSegments, i;\r\n\r\n        ctx.strokeStyle = cursor.color;\r\n        ctx.lineWidth = cursor.lineWidth;\r\n        ctx.lineJoin = \"round\";\r\n\r\n        ctx.beginPath();\r\n\r\n        if (cursor.mode.indexOf(\"x\") !== -1) {\r\n            var drawX = Math.floor(cursor.x) + adj;\r\n            if (cursor.dashes <= 0) {\r\n                ctx.moveTo(drawX, 0);\r\n                ctx.lineTo(drawX, plot.height());\r\n            } else {\r\n                numberOfSegments = cursor.dashes * 2 - 1;\r\n                delta = plot.height() / numberOfSegments;\r\n                for (i = 0; i < numberOfSegments; i += 2) {\r\n                    ctx.moveTo(drawX, delta * i);\r\n                    ctx.lineTo(drawX, delta * (i + 1));\r\n                }\r\n            }\r\n        }\r\n\r\n        if (cursor.mode.indexOf(\"y\") !== -1) {\r\n            var drawY = Math.floor(cursor.y) + adj;\r\n            if (cursor.dashes <= 0) {\r\n                ctx.moveTo(0, drawY);\r\n                ctx.lineTo(plot.width(), drawY);\r\n            } else {\r\n                numberOfSegments = cursor.dashes * 2 - 1;\r\n                delta = plot.width() / numberOfSegments;\r\n                for (i = 0; i < numberOfSegments; i += 2) {\r\n                    ctx.moveTo(delta * i, drawY);\r\n                    ctx.lineTo(delta * (i + 1), drawY);\r\n                }\r\n            }\r\n        }\r\n\r\n        ctx.stroke();\r\n    }\r\n\r\n    function drawManipulator(plot, ctx, cursor) {\r\n        // keep line sharp\r\n        var adj = cursor.lineWidth % 2 ? 0.5 : 0;\r\n        ctx.beginPath();\r\n\r\n        if (cursor.highlighted) {\r\n            ctx.strokeStyle = 'orange';\r\n        } else {\r\n            ctx.strokeStyle = cursor.color;\r\n        }\r\n        if (cursor.symbol && plot.drawSymbol && plot.drawSymbol[cursor.symbol]) {\r\n            //first draw a white background\r\n            ctx.fillStyle = 'white';\r\n            ctx.fillRect(Math.floor(cursor.x) + adj - (constants.symbolSize / 2 + 1),\r\n                Math.floor(cursor.y) + adj - (constants.symbolSize / 2 + 1),\r\n                constants.symbolSize + 2, constants.symbolSize + 2);\r\n            plot.drawSymbol[cursor.symbol](ctx, Math.floor(cursor.x) + adj,\r\n                Math.floor(cursor.y) + adj, constants.symbolSize / 2, 0);\r\n        } else {\r\n            ctx.fillRect(Math.floor(cursor.x) + adj - (constants.symbolSize / 2),\r\n                Math.floor(cursor.y) + adj - (constants.symbolSize / 2),\r\n                constants.symbolSize, constants.symbolSize);\r\n        }\r\n\r\n        ctx.stroke();\r\n    }\r\n\r\n    function hasVerticalLine(cursor) {\r\n        return (cursor.mode.indexOf('x') !== -1);\r\n    }\r\n\r\n    function hasHorizontalLine(cursor) {\r\n        return (cursor.mode.indexOf('y') !== -1);\r\n    }\r\n\r\n    function mouseOverCursorManipulator(x, y, plot, cursor) {\r\n        var offset = plot.offset();\r\n        var mouseX = Math.max(0, Math.min(x - offset.left, plot.width()));\r\n        var mouseY = Math.max(0, Math.min(y - offset.top, plot.height()));\r\n        var grabRadius = constants.symbolSize + constants.mouseGrabMargin;\r\n\r\n        return ((mouseX > cursor.x - grabRadius) && (mouseX < cursor.x + grabRadius) &&\r\n            (mouseY > cursor.y - grabRadius) && (mouseY < cursor.y + grabRadius)) &&\r\n            (cursor.symbol !== 'none');\r\n    }\r\n\r\n    function mouseOverCursorVerticalLine(x, y, plot, cursor) {\r\n        var offset = plot.offset();\r\n        var mouseX = Math.max(0, Math.min(x - offset.left, plot.width()));\r\n        var mouseY = Math.max(0, Math.min(y - offset.top, plot.height()));\r\n\r\n        return (hasVerticalLine(cursor) && (mouseX > cursor.x - constants.mouseGrabMargin) &&\r\n            (mouseX < cursor.x + constants.mouseGrabMargin) && (mouseY > 0) && (mouseY < plot.height()));\r\n    }\r\n\r\n    function mouseOverCursorHorizontalLine(x, y, plot, cursor) {\r\n        var offset = plot.offset();\r\n        var mouseX = Math.max(0, Math.min(x - offset.left, plot.width()));\r\n        var mouseY = Math.max(0, Math.min(y - offset.top, plot.height()));\r\n\r\n        return (hasHorizontalLine(cursor) && (mouseY > cursor.y - constants.mouseGrabMargin) &&\r\n            (mouseY < cursor.y + constants.mouseGrabMargin) && (mouseX > 0) && (mouseX < plot.width()));\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'cursors',\r\n        version: '0.2'\r\n    });\r\n})(jQuery);\r\n"]}