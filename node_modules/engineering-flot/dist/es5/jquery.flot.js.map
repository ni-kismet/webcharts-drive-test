{"version":3,"sources":["jquery.colorhelpers.js","jquery.canvaswrapper.js","jquery.flot.js","jquery.flot.saturated.js","jquery.flot.browser.js","jquery.flot.drawSeries.js","jquery.flot.uiConstants.js","jquery.flot.logaxis.js","jquery.flot.symbol.js","jquery.flot.flatdata.js","jquery.flot.navigate.js","jquery.flot.touchNavigate.js","jquery.flot.hover.js","jquery.flot.touch.js","jquery.flot.absRelTime.js","jquery.flot.axislabels.js","jquery.flot.selection.js","jquery.flot.composeImages.js","jquery.flot.legend.js"],"names":["$","color","make","r","g","b","a","o","add","c","d","i","length","charAt","normalize","scale","f","toString","join","clamp","min","value","max","parseInt","clone","extract","elem","css","toLowerCase","parent","nodeName","get","parse","str","res","m","exec","parseFloat","name","trim","lookupColors","aqua","azure","beige","black","blue","brown","cyan","darkblue","darkcyan","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkviolet","fuchsia","gold","green","indigo","khaki","lightblue","lightcyan","lightgreen","lightgrey","lightpink","lightyellow","lime","magenta","maroon","navy","olive","orange","pink","purple","violet","red","silver","white","yellow","jQuery","Canvas","cls","container","element","getElementsByClassName","document","createElement","className","style","direction","position","left","top","appendChild","getContext","Error","context","pixelRatio","plot","browser","getPixelRatio","box","getBoundingClientRect","resize","width","height","SVGContainer","SVG","_textCache","prototype","minSize","restore","save","clear","clearRect","render","cache","layerKey","hasOwnProperty","call","layer","getSVGLayer","layerCache","display","styleKey","styleCache","key","val","positions","active","rendered","splice","firstChild","removeChild","parentNode","measured","classes","svgElement","bottom","right","pointerEvents","createElementNS","setAttribute","getTextInfo","text","font","angle","textStyle","info","variant","weight","size","lineHeight","family","generateKey","indexOf","addTspanElements","textNode","createTextNode","maxWidth","setAttributeNS","fill","elementRect","getBBox","addText","x","y","halign","valign","transforms","textContent","cloneNode","push","textAlign","forEach","t","transform","baseVal","appendItem","lines","split","tspan","offset","childNodes","removeText","htmlYCoord","clearCache","replace","window","Flot","defaultTickGenerator","axis","ticks","start","saturated","saturate","floorInBase","tickSize","v","Number","NaN","prev","MAX_VALUE","multiplyAdd","defaultTickFormatter","precision","oldTickDecimals","tickDecimals","expPosition","expRepTickFormatter","factor","Math","pow","formatted","round","decimal","decimalPrecision","decimals","substr","exponentValue","tenExponent","floor","log","LN10","roundWith","updatedPrecision","recomputePrecision","toFixed","num","log10Value","abs","LOG10E","newPrecision","Plot","placeholder","data_","options_","plugins","series","options","colors","xaxis","show","mode","tickColor","inverseTransform","autoScaleMargin","autoScale","windowSize","growOnly","tickFormatter","showTickLabels","labelWidth","labelHeight","reserveSpace","tickLength","showMinorTicks","showTicks","gridLines","alignTicksWithAxis","minTickSize","below","above","boxPosition","centerX","centerY","yaxis","xaxes","yaxes","points","radius","lineWidth","fillColor","symbol","steps","bars","barWidth","align","zero","shadowSize","highlightColor","grid","aboveData","backgroundColor","borderColor","margin","labelMargin","axisMargin","borderWidth","minBorderMargin","markings","markingsColor","markingsLineWidth","clickable","hoverable","autoHighlight","mouseActiveRadius","interaction","redrawOverlayInterval","hooks","surface","overlay","eventHolder","ctx","octx","plotOffset","plotWidth","plotHeight","processOptions","processRawData","processDatapoints","processOffset","setupGrid","adjustSeriesDataRange","setRange","drawBackground","drawSeries","drawAxis","draw","axisReserveSpace","bindEvents","drawOverlay","shutdown","redrawTimeout","setData","getPlaceholder","getCanvas","getSurface","getEventHolder","getPlotOffset","getData","getAxes","each","concat","_","n","getXAxes","getYAxes","c2p","canvasToCartesianAxisCoords","p2c","cartesianAxisToCanvasCoords","getOptions","triggerRedrawOverlay","pointOffset","point","axisNumber","destroy","removeData","empty","executeHooks","clearTextCache","computeRangeForDataSeries","findNearbyItem","findNearbyInterpolationPoint","computeValuePrecision","computeTickSize","MINOR_TICKS_COUNT_CONSTANT","uiConstants","TICK_LENGTH_CONSTANT","initPlugins","setupCanvases","parseOptions","hook","args","apply","p","init","extend","opts","axisOptions","axisCount","fontSize","fontSizeDefault","fontDefaults","getOrCreateAxis","allAxes","oldseries","parseData","fillInSeriesOptions","processData","s","data","obj","coord","filter","pos","used","x1","undefined","y1","axes","number","neededColors","maxIndex","sc","colorPool","colorPoolSize","variation","definedColors","colori","prevSeries","topSentry","POSITIVE_INFINITY","bottomSentry","NEGATIVE_INFINITY","j","k","ps","format","updateAxis","datamin","Infinity","datamax","reusePoints","datapoints","required","computeRange","defaultValue","expectedPs","pointsize","insertSteps","nullify","isNaN","every","range","xmin","xmax","ymin","ymax","children","hasClass","remove","unbind","existing","clearTimeout","setTransformationHelpers","identity","it","isFinite","delta","tp","measureTickLabels","showMajorTickLabels","showEndpointsTickLabels","legacyStyles","label","allocateAxisBoxFirstPhase","lw","lh","isXAxis","padding","innermost","outermost","found","allocateAxisBoxSecondPhase","adjustLayoutForThingsStickingOut","minMargin","margins","alignAxisWithGrid","ceil","isValid","showGrid","axisOpts","setupTickFormatter","allocatedAxes","grep","setupTickGeneration","setMajorTicks","snapRangeToTicks","setEndpointTicks","drawAxisLabels","widenMinMax","minimum","maximum","widen","wmin","autoScaleAxis","widenedMinMax","autoScaledMin","autoScaledMax","tmp","noTicks","fixupNumberOfTicks","dec","magn","norm","getAxisTickSize","sqrt","ticksOption","Array","slice","arguments","tickGenerator","otherAxis","niceTicks","extraDec","ts","test","oticks","isFunction","newTick","type","getEndpointPrecision","canvas1","canvas2","point1","point2","isValidEndpointTick","unshift","associatedSeries","notAllBarSeries","some","drawGrid","getColorOrGradient","extractRange","ranges","from","to","translate","fillStyle","fillRect","drawMarkings","xrange","yrange","xequal","yequal","subPixel","beginPath","strokeStyle","moveTo","lineTo","stroke","findEdges","alignPosition","drawTickBar","edges","xoff","yoff","drawTickMarks","minorTicks","minorTicksNr","xminor","yminor","v1","v2","step","drawGridLines","overlappedWithBorder","bw","drawBorder","bc","strokeRect","nullBox","newLabelBox","labelBoxes","overlapping","x11","y11","x12","y12","x21","y21","x22","y22","overlapsOtherLabels","previousLabelBoxes","labelBox","drawAxisLabel","tick","drawSeriesLines","drawSymbol","drawSeriesBars","drawSeriesPoints","force","computeBarWidth","minDistance","distance","mouseX","mouseY","seriesFilter","computeDistance","maxDistance","smallestDistance","item","dx","dy","dist","axisx","axisy","mx","my","maxx","maxy","datapoint","dataIndex","seriesIndex","posX","posY","comparer","x2","p1x","p1y","p2x","p2y","leftPoint","rightPoint","setTimeout","event","CustomEvent","dispatchEvent","spec","defaultColor","gradient","createLinearGradient","l","co","brightness","opacity","addColorStop","version","fn","linearTickGenerator","multiply","bInt","result","base","getPageXY","e","doc","documentElement","pageX","clientX","pageXOffset","scrollLeft","clientLeft","pageY","clientY","pageYOffset","scrollTop","clientTop","X","Y","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","isSafari","HTMLElement","safari","pushNotification","isMobileSafari","navigator","userAgent","match","isOpera","opr","addons","opera","isFirefox","InstallTrigger","isIE","documentMode","isEdge","StyleMedia","isChrome","chrome","webstore","isBlink","CSS","DrawSeries","plotLine","xoffset","yoffset","prevx","prevy","y2","plotLineArea","fillTowards","ypos","areaOpen","segmentStart","segmentEnd","x1old","x2old","lineJoin","dashes","setLineDash","decimate","getFillStyle","drawCircle","shadow","arc","PI","plotPoints","drawSymbolFn","decimatePoints","drawBar","barLeft","barRight","fillStyleCallback","drawLeft","drawRight","drawTop","drawBottom","plotBars","filloptions","seriesColor","SNAPPING_CONSTANT","PANHINT_LENGTH_CONSTANT","ZOOM_DISTANCE_MARGIN","PREFERRED_LOG_TICK_VALUES","computePreferedLogTickValues","EXTENDED_LOG_TICK_VALUES","endLimit","rangeStep","log10End","log10Start","vals","power","mult","logTickGenerator","minIdx","maxIdx","logTickValues","clampAxis","lastDisplayed","inverseNoTicks","tickValue","pixelCoord","idx","idealPixelCoord","reverse","customAxis","processAxisOffset","logTickFormatter","formattedValue","lastZero","lastIndexOf","logTransform","logInverseTransform","exp","invertedTransform","invertedLogTransform","invertedLogInverseTransform","setDataminRange","map","axisName","inverted","logTicksGenerator","square","rect","rectangle","diamond","triangle","sin","cross","ellipse","plus","handlers","process1DRawData","flatdata","zoom","interactive","amount","pan","cursor","frameRate","axisZoom","plotZoom","axisPan","plotPan","panAxes","canDrag","onZoomClick","zoomOut","page","ec","center","prevCursor","panHint","panTimeout","plotState","isPanAction","onMouseWheel","maxAbsoluteDeltaOnMac","isMacScroll","originalEvent","deltaY","defaultNonMacScrollAmount","macMagicRatio","onDragEnd","preventDefault","navigationState","startPageX","startPageY","Object","keys","navigationOffset","axisMin","axisMax","diagMode","onMouseDown","onMouseUp","isLeftMouseButtonPressed","button","onDragStart","onDrag","smartPan","onDblClick","activate","getTouchedAxis","Event","detail","axisTouched","trigger","onClick","mousewheel","bind","dblclick","click","w","h","xf","yf","minmax","offsetBelow","offsetAbove","preventEvent","navigationOffsetBelow","navigationOffsetAbove","recenter","shouldSnap","adjustDeltaToSnap","isDiagonalMode","restoreAxisOffset","initialState","prevDelta","snap","end","startx","starty","endx","endy","dirX","touchPointX","touchPointY","enableTouch","initTouchNavigation","gestureState","zoomEnable","prevDistance","prevTapTime","prevPanPosition","prevTapPosition","prevTouchedAxis","currentTouchedAxis","touchedAxis","navigationConstraint","pinch","doubleTap","addEventListener","drag","recenterPlot","removeEventListener","presetNavigationState","updateData","updatePrevPanPosition","wasPinchEvent","updateprevPanPosition","pinchDragTimeout","setPrevDistance","pinchDistance","zoomPlot","recenterPlotOnDoubleTap","gesture","getAxis","noAxisTouched","checkAxesForDoubleTap","firstTouch","secondTouch","zoomAmount","getPoint","touches","axisTouch1","axisTouch2","axisDir","t1","t2","initHover","highlights","highlight","unhighlight","triggerCleanupEvent","tap","generatePlothoverEvent","mousemove","onMouseMove","onMouseLeave","newEvent","changedTouches","triggerClickHoverEvent","eventname","searchDistance","canvasX","canvasY","auto","indexOfHighlight","hi","drawBarHighlight","drawPointHighlight","pointRadius","closePath","twoTouches","currentTapStart","currentTapEnd","prevTap","currentTap","interceptedLongTap","allowEventPropagation","tapStartTime","longTapTriggerId","maxDistanceBetweenTaps","maxIntervalBetweenTaps","maxLongTapDistance","minLongTapDuration","pressedTapDuration","mainEventHolder","interpretGestures","updateOnMultipleTouches","isPinchEvent","executeAction","isDoubleTap","onDoubleTap","longTap","touchstart","updatePrevForDoubleTap","updateCurrentForDoubleTap","updateStateForLongTapStart","touchmove","preventEventPropagation","updateStateForLongTapEnd","touchend","noTouchActive","waitForLongTap","isLongTap","currentTime","Date","getTime","tapDuration","longTapTrigger","isTap","intervalBetweenTaps","stopPropagation","target","timezone","timeformat","twelveHourClock","monthNames","timeEpoch","formatDate","fmt","dayNames","showMilliseconds","strftime","leftPad","pad","padNTimes","nTimes","addMilliseconds","date","ms","parts","sufix","formatLanguage","NIEmbeddedBrowser","locale","getFormatterOptions","formatString","includes","getFormattedDateString","formatOptions","showYear","Intl","DateTimeFormat","year","month","day","formatParts","formatToParts","formatPartsTypeList","dayIndex","monthIndex","dayMonthDelimiter","dayValue","monthValue","yearValue","padAmount","getFractionalSecondsString","milliseconds","forceFractionalSeconds","fractionalSecondsIndex","fractionalSecondsSearch","RegExp","fallbackDigitCount","numberOfFractionalSeconds","fractionalSecondsString","substring","getFormattedTimeString","showTime","getMilliseconds","formattedDate","hour","minute","second","lastDigitSearch","lastIndex","hourIndex","minuteIndex","hourMinuteDelimiter","hourValue","minuteValue","showSeconds","secondValue","dayPeriod","getFormattedDateTimeString","language","browserLanguage","languages","dateString","timeString","toAbsoluteTimeStr","unixToAbsoluteEpochDiff","minDateValue","valueOf","gregorianDate","makeUtcWrapper","time","msString","Globalize","toRelativeTimeStr","dateValue","valueOfFirstData","dateInSeconds","seconds","dateInMinutes","minutes","dateInHours","hours","days","escape","localDateValue","getDate","timeFormatStartIndex","timeFormatEndIndex","timeFormat","addProxyMethod","sourceObj","sourceMethod","targetObj","targetMethod","utc","props","dateGenerator","maxDateValue","timezoneJS","setTimezone","setTime","timeUnitSize","baseSpec","specMonths","specQuarters","updateAxisFirstData","plotData","firstPlotData","minFirstPlotData","unit","setMilliseconds","setSeconds","getSeconds","setMinutes","getMinutes","setHours","getHours","setMonth","getMonth","setFullYear","getFullYear","setDate","quarter","carry","v1000","axisLabels","AxisLabel","axisLabel","calculateSize","axisId","layerId","degrees","svgLayer","rotate","createSVGTransform","setTranslate","setRotate","calculateOffsets","offsets","cleanup","defaultPadding","axisLabelPadding","flotAxisName","selection","first","currentMode","savedhandlers","mouseUpHandler","updateSelection","getSelection","which","body","focus","onselectstart","ondrag","setSelectionPos","one","selectionIsSane","triggerSelectedEvent","c1","c2","selectionDirection","p1","p2","updateMode","clearSelection","setSelection","mousedown","drawSelectionDecorations","oX","oY","spacing","fullEarWidth","earWidth","shape","GENERALFAILURECALLBACKERROR","SUCCESSFULIMAGEPREPARATION","EMPTYARRAYOFIMAGESOURCES","NEGATIVEIMAGESIZE","composeImages","canvasOrSvgSources","destinationCanvas","validCanvasOrSvgSources","isValidSource","allImgCompositionPromises","validCanvasOrSvgSource","tempImg","Image","currentPromise","Promise","getGenerateTempImg","lastPromise","all","then","getExecuteImgComposition","failureCallback","canvasOrSvgSource","isValidFromCanvas","isValidFromContent","tagName","getComputedStyle","visibility","sourceDescription","id","sourceComponent","doGenerateTempImg","successCallbackFunc","failureCallbackFunc","onload","evt","successfullyLoaded","onabort","console","onerror","generateTempImageFromCanvasOrSvg","executeImgComposition","tempImgs","compositionResult","copyImgsToCanvas","copyCanvasToImg","canvas","img","src","toDataURL","getCSSRules","styleSheets","rulesList","rules","cssRules","rule","cssText","embedCSSRulesInSVG","svg","classList","innerHTML","copySVGToImgMostBrowsers","source","patchSVGSource","blob","Blob","domURL","self","URL","webkitURL","url","createObjectURL","copySVGToImgSafari","buildBinaryString","arrayBuffer","binaryString","utf8Array","Uint8Array","blockSize","binarySubString","String","fromCharCode","subarray","utf8BinaryString","TextEncoder","TextEncoderLite","encode","btoa","svgSource","copySVGToImg","adaptDestSizeToZoom","sources","containsSVGs","srcImgTagName","find","prepareImagesToBeComposed","destination","minX","genLeft","minY","genTop","maxX","genRight","maxY","genBottom","xCompOffset","yCompOffset","prepareImagesResult","destinationCtx","drawImage","adnotateDestImgWithBoundingClientRect","srcCanvasOrSvg","destImg","legend","labelFormatter","sorted","insertLegend","legendEntries","html","entries","entry","labelHtml","iconHtml","maxLabelLength","xPos","yPos","svgShapeDefs","getEntryIconHtml","strokeColor","strokeWidth","legendEl","appendTo","getLegendEntries","lf","sort","ascending","checkOptions","opts1","opts2","prop","shouldRedraw","oldEntries","newEntries","newEntry","oldEntry","newOpts","oldOpts","oldPlotOffset","newPlotOffset"],"mappings":"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","file":"jquery.flot.js","sourcesContent":["/* Plugin for jQuery for working with colors.\r\n *\r\n * Version 1.1.\r\n *\r\n * Inspiration from jQuery color animation plugin by John Resig.\r\n *\r\n * Released under the MIT license by Ole Laursen, October 2009.\r\n *\r\n * Examples:\r\n *\r\n *   $.color.parse(\"#fff\").scale('rgb', 0.25).add('a', -0.5).toString()\r\n *   var c = $.color.extract($(\"#mydiv\"), 'background-color');\r\n *   console.log(c.r, c.g, c.b, c.a);\r\n *   $.color.make(100, 50, 25, 0.4).toString() // returns \"rgba(100,50,25,0.4)\"\r\n *\r\n * Note that .scale() and .add() return the same modified object\r\n * instead of making a new one.\r\n *\r\n * V. 1.1: Fix error handling so e.g. parsing an empty string does\r\n * produce a color rather than just crashing.\r\n */\r\n\r\n(function($) {\r\n    $.color = {};\r\n\r\n    // construct color object with some convenient chainable helpers\r\n    $.color.make = function (r, g, b, a) {\r\n        var o = {};\r\n        o.r = r || 0;\r\n        o.g = g || 0;\r\n        o.b = b || 0;\r\n        o.a = a != null ? a : 1;\r\n\r\n        o.add = function (c, d) {\r\n            for (var i = 0; i < c.length; ++i) {\r\n                o[c.charAt(i)] += d;\r\n            }\r\n\r\n            return o.normalize();\r\n        };\r\n\r\n        o.scale = function (c, f) {\r\n            for (var i = 0; i < c.length; ++i) {\r\n                o[c.charAt(i)] *= f;\r\n            }\r\n\r\n            return o.normalize();\r\n        };\r\n\r\n        o.toString = function () {\r\n            if (o.a >= 1.0) {\r\n                return \"rgb(\" + [o.r, o.g, o.b].join(\",\") + \")\";\r\n            } else {\r\n                return \"rgba(\" + [o.r, o.g, o.b, o.a].join(\",\") + \")\";\r\n            }\r\n        };\r\n\r\n        o.normalize = function () {\r\n            function clamp(min, value, max) {\r\n                return value < min ? min : (value > max ? max : value);\r\n            }\r\n\r\n            o.r = clamp(0, parseInt(o.r), 255);\r\n            o.g = clamp(0, parseInt(o.g), 255);\r\n            o.b = clamp(0, parseInt(o.b), 255);\r\n            o.a = clamp(0, o.a, 1);\r\n            return o;\r\n        };\r\n\r\n        o.clone = function () {\r\n            return $.color.make(o.r, o.b, o.g, o.a);\r\n        };\r\n\r\n        return o.normalize();\r\n    }\r\n\r\n    // extract CSS color property from element, going up in the DOM\r\n    // if it's \"transparent\"\r\n    $.color.extract = function (elem, css) {\r\n        var c;\r\n\r\n        do {\r\n            c = elem.css(css).toLowerCase();\r\n            // keep going until we find an element that has color, or\r\n            // we hit the body or root (have no parent)\r\n            if (c !== '' && c !== 'transparent') {\r\n                break;\r\n            }\r\n\r\n            elem = elem.parent();\r\n        } while (elem.length && !$.nodeName(elem.get(0), \"body\"));\r\n\r\n        // catch Safari's way of signalling transparent\r\n        if (c === \"rgba(0, 0, 0, 0)\") {\r\n            c = \"transparent\";\r\n        }\r\n\r\n        return $.color.parse(c);\r\n    }\r\n\r\n    // parse CSS color string (like \"rgb(10, 32, 43)\" or \"#fff\"),\r\n    // returns color object, if parsing failed, you get black (0, 0,\r\n    // 0) out\r\n    $.color.parse = function (str) {\r\n        var res, m = $.color.make;\r\n\r\n        // Look for rgb(num,num,num)\r\n        res = /rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(str);\r\n        if (res) {\r\n            return m(parseInt(res[1], 10), parseInt(res[2], 10), parseInt(res[3], 10));\r\n        }\r\n\r\n        // Look for rgba(num,num,num,num)\r\n        res = /rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str)\r\n        if (res) {\r\n            return m(parseInt(res[1], 10), parseInt(res[2], 10), parseInt(res[3], 10), parseFloat(res[4]));\r\n        }\r\n\r\n        // Look for rgb(num%,num%,num%)\r\n        res = /rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*\\)/.exec(str);\r\n        if (res) {\r\n            return m(parseFloat(res[1]) * 2.55, parseFloat(res[2]) * 2.55, parseFloat(res[3]) * 2.55);\r\n        }\r\n\r\n        // Look for rgba(num%,num%,num%,num)\r\n        res = /rgba\\(\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str);\r\n        if (res) {\r\n            return m(parseFloat(res[1]) * 2.55, parseFloat(res[2]) * 2.55, parseFloat(res[3]) * 2.55, parseFloat(res[4]));\r\n        }\r\n\r\n        // Look for #a0b1c2\r\n        res = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str);\r\n        if (res) {\r\n            return m(parseInt(res[1], 16), parseInt(res[2], 16), parseInt(res[3], 16));\r\n        }\r\n\r\n        // Look for #fff\r\n        res = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str);\r\n        if (res) {\r\n            return m(parseInt(res[1] + res[1], 16), parseInt(res[2] + res[2], 16), parseInt(res[3] + res[3], 16));\r\n        }\r\n\r\n        // Otherwise, we're most likely dealing with a named color\r\n        var name = $.trim(str).toLowerCase();\r\n        if (name === \"transparent\") {\r\n            return m(255, 255, 255, 0);\r\n        } else {\r\n            // default to black\r\n            res = lookupColors[name] || [0, 0, 0];\r\n            return m(res[0], res[1], res[2]);\r\n        }\r\n    }\r\n\r\n    var lookupColors = {\r\n        aqua: [0, 255, 255],\r\n        azure: [240, 255, 255],\r\n        beige: [245, 245, 220],\r\n        black: [0, 0, 0],\r\n        blue: [0, 0, 255],\r\n        brown: [165, 42, 42],\r\n        cyan: [0, 255, 255],\r\n        darkblue: [0, 0, 139],\r\n        darkcyan: [0, 139, 139],\r\n        darkgrey: [169, 169, 169],\r\n        darkgreen: [0, 100, 0],\r\n        darkkhaki: [189, 183, 107],\r\n        darkmagenta: [139, 0, 139],\r\n        darkolivegreen: [85, 107, 47],\r\n        darkorange: [255, 140, 0],\r\n        darkorchid: [153, 50, 204],\r\n        darkred: [139, 0, 0],\r\n        darksalmon: [233, 150, 122],\r\n        darkviolet: [148, 0, 211],\r\n        fuchsia: [255, 0, 255],\r\n        gold: [255, 215, 0],\r\n        green: [0, 128, 0],\r\n        indigo: [75, 0, 130],\r\n        khaki: [240, 230, 140],\r\n        lightblue: [173, 216, 230],\r\n        lightcyan: [224, 255, 255],\r\n        lightgreen: [144, 238, 144],\r\n        lightgrey: [211, 211, 211],\r\n        lightpink: [255, 182, 193],\r\n        lightyellow: [255, 255, 224],\r\n        lime: [0, 255, 0],\r\n        magenta: [255, 0, 255],\r\n        maroon: [128, 0, 0],\r\n        navy: [0, 0, 128],\r\n        olive: [128, 128, 0],\r\n        orange: [255, 165, 0],\r\n        pink: [255, 192, 203],\r\n        purple: [128, 0, 128],\r\n        violet: [128, 0, 128],\r\n        red: [255, 0, 0],\r\n        silver: [192, 192, 192],\r\n        white: [255, 255, 255],\r\n        yellow: [255, 255, 0]\r\n    };\r\n})(jQuery);\r\n","/** ## jquery.flot.canvaswrapper\r\n\r\nThis plugin contains the function for creating and manipulating both the canvas\r\nlayers and svg layers.\r\n\r\nThe Canvas object is a wrapper around an HTML5 canvas tag.\r\nThe constructor Canvas(cls, container) takes as parameters cls,\r\nthe list of classes to apply to the canvas adnd the containter,\r\nelement onto which to append the canvas. The canvas operations\r\ndon't work unless the canvas is attached to the DOM.\r\n\r\n### jquery.canvaswrapper.js API functions\r\n*/\r\n\r\n(function($) {\r\n    var Canvas = function(cls, container) {\r\n        var element = container.getElementsByClassName(cls)[0];\r\n\r\n        if (!element) {\r\n            element = document.createElement('canvas');\r\n            element.className = cls;\r\n            element.style.direction = 'ltr';\r\n            element.style.position = 'absolute';\r\n            element.style.left = '0px';\r\n            element.style.top = '0px';\r\n\r\n            container.appendChild(element);\r\n\r\n            // If HTML5 Canvas isn't available, throw\r\n\r\n            if (!element.getContext) {\r\n                throw new Error('Canvas is not available.');\r\n            }\r\n        }\r\n\r\n        this.element = element;\r\n\r\n        var context = this.context = element.getContext('2d');\r\n        this.pixelRatio = $.plot.browser.getPixelRatio(context);\r\n\r\n        // Size the canvas to match the internal dimensions of its container\r\n\r\n        var box = container.getBoundingClientRect();\r\n        this.resize(box.width, box.height);\r\n\r\n        // Collection of HTML div layers for text overlaid onto the canvas\r\n\r\n        this.SVGContainer = null;\r\n        this.SVG = {};\r\n\r\n        // Cache of text fragments and metrics, so we can avoid expensively\r\n        // re-calculating them when the plot is re-rendered in a loop.\r\n\r\n        this._textCache = {};\r\n    }\r\n\r\n    /**\r\n    - resize(width, height)\r\n\r\n     Resizes the canvas to the given dimensions.\r\n     The width represents the new width of the canvas, meanwhile the height\r\n     is the new height of the canvas, both of them in pixels.\r\n    */\r\n\r\n    Canvas.prototype.resize = function(width, height) {\r\n        var minSize = 10;\r\n        width = width < minSize ? minSize : width;\r\n        height = height < minSize ? minSize : height;\r\n\r\n        var element = this.element,\r\n            context = this.context,\r\n            pixelRatio = this.pixelRatio;\r\n\r\n        // Resize the canvas, increasing its density based on the display's\r\n        // pixel ratio; basically giving it more pixels without increasing the\r\n        // size of its element, to take advantage of the fact that retina\r\n        // displays have that many more pixels in the same advertised space.\r\n\r\n        // Resizing should reset the state (excanvas seems to be buggy though)\r\n\r\n        if (this.width !== width) {\r\n            element.width = width * pixelRatio;\r\n            element.style.width = width + 'px';\r\n            this.width = width;\r\n        }\r\n\r\n        if (this.height !== height) {\r\n            element.height = height * pixelRatio;\r\n            element.style.height = height + 'px';\r\n            this.height = height;\r\n        }\r\n\r\n        // Save the context, so we can reset in case we get replotted.  The\r\n        // restore ensure that we're really back at the initial state, and\r\n        // should be safe even if we haven't saved the initial state yet.\r\n\r\n        context.restore();\r\n        context.save();\r\n\r\n        // Scale the coordinate space to match the display density; so even though we\r\n        // may have twice as many pixels, we still want lines and other drawing to\r\n        // appear at the same size; the extra pixels will just make them crisper.\r\n\r\n        context.scale(pixelRatio, pixelRatio);\r\n    };\r\n\r\n    /**\r\n    - clear()\r\n\r\n     Clears the entire canvas area, not including any overlaid HTML text\r\n    */\r\n    Canvas.prototype.clear = function() {\r\n        this.context.clearRect(0, 0, this.width, this.height);\r\n    };\r\n\r\n    /**\r\n    - render()\r\n\r\n     Finishes rendering the canvas, including managing the text overlay.\r\n    */\r\n    Canvas.prototype.render = function() {\r\n        var cache = this._textCache;\r\n\r\n        // For each text layer, add elements marked as active that haven't\r\n        // already been rendered, and remove those that are no longer active.\r\n\r\n        for (var layerKey in cache) {\r\n            if (hasOwnProperty.call(cache, layerKey)) {\r\n                var layer = this.getSVGLayer(layerKey),\r\n                    layerCache = cache[layerKey];\r\n\r\n                var display = layer.style.display;\r\n                layer.style.display = 'none';\r\n\r\n                for (var styleKey in layerCache) {\r\n                    if (hasOwnProperty.call(layerCache, styleKey)) {\r\n                        var styleCache = layerCache[styleKey];\r\n                        for (var key in styleCache) {\r\n                            if (hasOwnProperty.call(styleCache, key)) {\r\n                                var val = styleCache[key],\r\n                                    positions = val.positions;\r\n\r\n                                for (var i = 0, position; positions[i]; i++) {\r\n                                    position = positions[i];\r\n                                    if (position.active) {\r\n                                        if (!position.rendered) {\r\n                                            layer.appendChild(position.element);\r\n                                            position.rendered = true;\r\n                                        }\r\n                                    } else {\r\n                                        positions.splice(i--, 1);\r\n                                        if (position.rendered) {\r\n                                            while (position.element.firstChild) {\r\n                                                position.element.removeChild(position.element.firstChild);\r\n                                            }\r\n                                            position.element.parentNode.removeChild(position.element);\r\n                                        }\r\n                                    }\r\n                                }\r\n\r\n                                if (positions.length === 0) {\r\n                                    if (val.measured) {\r\n                                        val.measured = false;\r\n                                    } else {\r\n                                        delete styleCache[key];\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                layer.style.display = display;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n    - getSVGLayer(classes)\r\n\r\n     Creates (if necessary) and returns the SVG overlay container.\r\n     The classes string represents the string of space-separated CSS classes\r\n     used to uniquely identify the text layer. It return the svg-layer div.\r\n    */\r\n    Canvas.prototype.getSVGLayer = function(classes) {\r\n        var layer = this.SVG[classes];\r\n\r\n        // Create the SVG layer if it doesn't exist\r\n\r\n        if (!layer) {\r\n            // Create the svg layer container, if it doesn't exist\r\n\r\n            var svgElement;\r\n\r\n            if (!this.SVGContainer) {\r\n                this.SVGContainer = document.createElement('div');\r\n                this.SVGContainer.className = 'flot-svg';\r\n                this.SVGContainer.style.position = 'absolute';\r\n                this.SVGContainer.style.top = '0px';\r\n                this.SVGContainer.style.left = '0px';\r\n                this.SVGContainer.style.bottom = '0px';\r\n                this.SVGContainer.style.right = '0px';\r\n                this.SVGContainer.style.pointerEvents = 'none';\r\n                this.element.parentNode.appendChild(this.SVGContainer);\r\n\r\n                svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n                svgElement.style.width = '100%';\r\n                svgElement.style.height = '100%';\r\n\r\n                this.SVGContainer.appendChild(svgElement);\r\n            } else {\r\n                svgElement = this.SVGContainer.firstChild;\r\n            }\r\n\r\n            layer = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n            layer.setAttribute('class', classes);\r\n            layer.style.position = 'absolute';\r\n            layer.style.top = '0px';\r\n            layer.style.left = '0px';\r\n            layer.style.bottom = '0px';\r\n            layer.style.right = '0px';\r\n            svgElement.appendChild(layer);\r\n            this.SVG[classes] = layer;\r\n        }\r\n\r\n        return layer;\r\n    };\r\n\r\n    /**\r\n    - getTextInfo(layer, text, font, angle, width)\r\n\r\n     Creates (if necessary) and returns a text info object.\r\n     The object looks like this:\r\n     ```js\r\n     {\r\n         width //Width of the text's wrapper div.\r\n         height //Height of the text's wrapper div.\r\n         element //The HTML div containing the text.\r\n         positions //Array of positions at which this text is drawn.\r\n      }\r\n      ```\r\n      The positions array contains objects that look like this:\r\n      ```js\r\n      {\r\n         active //Flag indicating whether the text should be visible.\r\n         rendered //Flag indicating whether the text is currently visible.\r\n         element //The HTML div containing the text.\r\n         text //The actual text and is identical with element[0].textContent.\r\n         x //X coordinate at which to draw the text.\r\n         y //Y coordinate at which to draw the text.\r\n      }\r\n      ```\r\n      Each position after the first receives a clone of the original element.\r\n      The idea is that that the width, height, and general 'identity' of the\r\n      text is constant no matter where it is placed; the placements are a\r\n      secondary property.\r\n\r\n      Canvas maintains a cache of recently-used text info objects; getTextInfo\r\n      either returns the cached element or creates a new entry.\r\n\r\n     The layer parameter is string of space-separated CSS classes uniquely\r\n     identifying the layer containing this text.\r\n     Text is the text string to retrieve info for.\r\n     Font is either a string of space-separated CSS classes or a font-spec object,\r\n     defining the text's font and style.\r\n     Angle is the angle at which to rotate the text, in degrees. Angle is currently unused,\r\n     it will be implemented in the future.\r\n     The last parameter is the Maximum width of the text before it wraps.\r\n     The method returns a text info object.\r\n    */\r\n    Canvas.prototype.getTextInfo = function(layer, text, font, angle, width) {\r\n        var textStyle, layerCache, styleCache, info;\r\n\r\n        // Cast the value to a string, in case we were given a number or such\r\n\r\n        text = '' + text;\r\n\r\n        // If the font is a font-spec object, generate a CSS font definition\r\n\r\n        if (typeof font === 'object') {\r\n            textStyle = font.style + ' ' + font.variant + ' ' + font.weight + ' ' + font.size + 'px/' + font.lineHeight + 'px ' + font.family;\r\n        } else {\r\n            textStyle = font;\r\n        }\r\n\r\n        // Retrieve (or create) the cache for the text's layer and styles\r\n\r\n        layerCache = this._textCache[layer];\r\n\r\n        if (layerCache == null) {\r\n            layerCache = this._textCache[layer] = {};\r\n        }\r\n\r\n        styleCache = layerCache[textStyle];\r\n\r\n        if (styleCache == null) {\r\n            styleCache = layerCache[textStyle] = {};\r\n        }\r\n\r\n        var key = generateKey(text);\r\n        info = styleCache[key];\r\n\r\n        // If we can't find a matching element in our cache, create a new one\r\n\r\n        if (!info) {\r\n            var element = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n            if (text.indexOf('<br>') !== -1) {\r\n                addTspanElements(text, element, -9999);\r\n            } else {\r\n                var textNode = document.createTextNode(text);\r\n                element.appendChild(textNode);\r\n            }\r\n\r\n            element.style.position = 'absolute';\r\n            element.style.maxWidth = width;\r\n            element.setAttributeNS(null, 'x', -9999);\r\n            element.setAttributeNS(null, 'y', -9999);\r\n\r\n            if (typeof font === 'object') {\r\n                element.style.font = textStyle;\r\n                element.style.fill = font.fill;\r\n            } else if (typeof font === 'string') {\r\n                element.setAttribute('class', font);\r\n            }\r\n\r\n            this.getSVGLayer(layer).appendChild(element);\r\n            var elementRect = element.getBBox();\r\n\r\n            info = styleCache[key] = {\r\n                width: elementRect.width,\r\n                height: elementRect.height,\r\n                measured: true,\r\n                element: element,\r\n                positions: []\r\n            };\r\n\r\n            //remove elements from dom\r\n            while (element.firstChild) {\r\n                element.removeChild(element.firstChild);\r\n            }\r\n            element.parentNode.removeChild(element);\r\n        }\r\n\r\n        info.measured = true;\r\n        return info;\r\n    };\r\n\r\n    /**\r\n    - addText (layer, x, y, text, font, angle, width, halign, valign, transforms)\r\n\r\n     Adds a text string to the canvas text overlay.\r\n     The text isn't drawn immediately; it is marked as rendering, which will\r\n     result in its addition to the canvas on the next render pass.\r\n\r\n     The layer is string of space-separated CSS classes uniquely\r\n     identifying the layer containing this text.\r\n     X and Y represents the X and Y coordinate at which to draw the text.\r\n     and text is the string to draw\r\n    */\r\n    Canvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign, transforms) {\r\n        var info = this.getTextInfo(layer, text, font, angle, width),\r\n            positions = info.positions;\r\n\r\n        // Tweak the div's position to match the text's alignment\r\n\r\n        if (halign === 'center') {\r\n            x -= info.width / 2;\r\n        } else if (halign === 'right') {\r\n            x -= info.width;\r\n        }\r\n\r\n        if (valign === 'middle') {\r\n            y -= info.height / 2;\r\n        } else if (valign === 'bottom') {\r\n            y -= info.height;\r\n        }\r\n\r\n        y += 0.75 * info.height;\r\n\r\n        // Determine whether this text already exists at this position.\r\n        // If so, mark it for inclusion in the next render pass.\r\n\r\n        for (var i = 0, position; positions[i]; i++) {\r\n            position = positions[i];\r\n            if (position.x === x && position.y === y && position.text === text) {\r\n                position.active = true;\r\n                return;\r\n            } else if (position.active === false) {\r\n                position.active = true;\r\n                position.text = text;\r\n                if (text.indexOf('<br>') !== -1) {\r\n                    y -= 0.25 * info.height;\r\n                    addTspanElements(text, position.element, x);\r\n                } else {\r\n                    position.element.textContent = text;\r\n                }\r\n                position.element.setAttributeNS(null, 'x', x);\r\n                position.element.setAttributeNS(null, 'y', y);\r\n                position.x = x;\r\n                position.y = y;\r\n                return;\r\n            }\r\n        }\r\n\r\n        // If the text doesn't exist at this position, create a new entry\r\n\r\n        // For the very first position we'll re-use the original element,\r\n        // while for subsequent ones we'll clone it.\r\n\r\n        position = {\r\n            active: true,\r\n            rendered: false,\r\n            element: positions.length ? info.element.cloneNode() : info.element,\r\n            text: text,\r\n            x: x,\r\n            y: y\r\n        };\r\n\r\n        positions.push(position);\r\n\r\n        if (text.indexOf('<br>') !== -1) {\r\n            y -= 0.25 * info.height;\r\n            addTspanElements(text, position.element, x);\r\n        } else {\r\n            position.element.textContent = text;\r\n        }\r\n\r\n        // Move the element to its final position within the container\r\n        position.element.setAttributeNS(null, 'x', x);\r\n        position.element.setAttributeNS(null, 'y', y);\r\n        position.element.style.textAlign = halign;\r\n\r\n        if (transforms) {\r\n            transforms.forEach(function(t) {\r\n                info.element.transform.baseVal.appendItem(t);\r\n            });\r\n        }\r\n    };\r\n\r\n    var addTspanElements = function(text, element, x) {\r\n        var lines = text.split('<br>'),\r\n            tspan, i, offset;\r\n\r\n        for (i = 0; i < lines.length; i++) {\r\n            if (!element.childNodes[i]) {\r\n                tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\r\n                element.appendChild(tspan);\r\n            } else {\r\n                tspan = element.childNodes[i];\r\n            }\r\n            tspan.textContent = lines[i];\r\n            offset = i * 1 + 'em';\r\n            tspan.setAttributeNS(null, 'dy', offset);\r\n            tspan.setAttributeNS(null, 'x', x);\r\n        }\r\n    }\r\n\r\n    /**\r\n    - removeText (layer, x, y, text, font, angle)\r\n\r\n      The function removes one or more text strings from the canvas text overlay.\r\n      If no parameters are given, all text within the layer is removed.\r\n\r\n      Note that the text is not immediately removed; it is simply marked as\r\n      inactive, which will result in its removal on the next render pass.\r\n      This avoids the performance penalty for 'clear and redraw' behavior,\r\n      where we potentially get rid of all text on a layer, but will likely\r\n      add back most or all of it later, as when redrawing axes, for example.\r\n\r\n      The layer is a string of space-separated CSS classes uniquely\r\n      identifying the layer containing this text. The following parameter are\r\n      X and Y coordinate of the text.\r\n      Text is the string to remove, while the font is either a string of space-separated CSS\r\n      classes or a font-spec object, defining the text's font and style.\r\n     */\r\n    Canvas.prototype.removeText = function(layer, x, y, text, font, angle) {\r\n        var info, htmlYCoord;\r\n        if (text == null) {\r\n            var layerCache = this._textCache[layer];\r\n            if (layerCache != null) {\r\n                for (var styleKey in layerCache) {\r\n                    if (hasOwnProperty.call(layerCache, styleKey)) {\r\n                        var styleCache = layerCache[styleKey];\r\n                        for (var key in styleCache) {\r\n                            if (hasOwnProperty.call(styleCache, key)) {\r\n                                var positions = styleCache[key].positions;\r\n                                positions.forEach(function(position) {\r\n                                    position.active = false;\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            info = this.getTextInfo(layer, text, font, angle);\r\n            positions = info.positions;\r\n            positions.forEach(function(position) {\r\n                htmlYCoord = y + 0.75 * info.height;\r\n                if (position.x === x && position.y === htmlYCoord && position.text === text) {\r\n                    position.active = false;\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n    - clearCache()\r\n\r\n     Clears the cache used to speed up the text size measurements.\r\n     As an (unfortunate) side effect all text within the text Layer is removed.\r\n     Use this function before plot.setupGrid() and plot.draw() if the plot just\r\n     became visible or the styles changed.\r\n    */\r\n    Canvas.prototype.clearCache = function() {\r\n        var cache = this._textCache;\r\n        for (var layerKey in cache) {\r\n            if (hasOwnProperty.call(cache, layerKey)) {\r\n                var layer = this.getSVGLayer(layerKey);\r\n                while (layer.firstChild) {\r\n                    layer.removeChild(layer.firstChild);\r\n                }\r\n            }\r\n        };\r\n\r\n        this._textCache = {};\r\n    };\r\n\r\n    function generateKey(text) {\r\n        return text.replace(/0|1|2|3|4|5|6|7|8|9/g, '0');\r\n    }\r\n\r\n    if (!window.Flot) {\r\n        window.Flot = {};\r\n    }\r\n\r\n    window.Flot.Canvas = Canvas;\r\n})(jQuery);\r\n","/* Javascript plotting library for jQuery, version 1.0.3.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\n*/\r\n\r\n// the actual Flot code\r\n(function($) {\r\n    \"use strict\";\r\n\r\n    var Canvas = window.Flot.Canvas;\r\n\r\n    function defaultTickGenerator(axis) {\r\n        var ticks = [],\r\n            start = $.plot.saturated.saturate($.plot.saturated.floorInBase(axis.min, axis.tickSize)),\r\n            i = 0,\r\n            v = Number.NaN,\r\n            prev;\r\n\r\n        if (start === -Number.MAX_VALUE) {\r\n            ticks.push(start);\r\n            start = $.plot.saturated.floorInBase(axis.min + axis.tickSize, axis.tickSize);\r\n        }\r\n\r\n        do {\r\n            prev = v;\r\n            //v = start + i * axis.tickSize;\r\n            v = $.plot.saturated.multiplyAdd(axis.tickSize, i, start);\r\n            ticks.push(v);\r\n            ++i;\r\n        } while (v < axis.max && v !== prev);\r\n\r\n        return ticks;\r\n    }\r\n\r\n    function defaultTickFormatter(value, axis, precision) {\r\n        var oldTickDecimals = axis.tickDecimals,\r\n            expPosition = (\"\" + value).indexOf(\"e\");\r\n\r\n        if (expPosition !== -1) {\r\n            return expRepTickFormatter(value, axis, precision);\r\n        }\r\n\r\n        if (precision > 0) {\r\n            axis.tickDecimals = precision;\r\n        }\r\n\r\n        var factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1,\r\n            formatted = \"\" + Math.round(value * factor) / factor;\r\n\r\n        // If tickDecimals was specified, ensure that we have exactly that\r\n        // much precision; otherwise default to the value's own precision.\r\n        if (axis.tickDecimals != null) {\r\n            var decimal = formatted.indexOf(\".\"),\r\n                decimalPrecision = decimal === -1 ? 0 : formatted.length - decimal - 1;\r\n            if (decimalPrecision < axis.tickDecimals) {\r\n                var decimals = (\"\" + factor).substr(1, axis.tickDecimals - decimalPrecision);\r\n                formatted = (decimalPrecision ? formatted : formatted + \".\") + decimals;\r\n            }\r\n        }\r\n\r\n        axis.tickDecimals = oldTickDecimals;\r\n        return formatted;\r\n    };\r\n\r\n    function expRepTickFormatter(value, axis, precision) {\r\n        var expPosition = (\"\" + value).indexOf(\"e\"),\r\n            exponentValue = parseInt((\"\" + value).substr(expPosition + 1)),\r\n            tenExponent = expPosition !== -1 ? exponentValue : (value > 0 ? Math.floor(Math.log(value) / Math.LN10) : 0),\r\n            roundWith = Math.pow(10, tenExponent),\r\n            x = value / roundWith;\r\n\r\n        if (precision) {\r\n            var updatedPrecision = recomputePrecision(value, precision);\r\n            return (value / roundWith).toFixed(updatedPrecision) + 'e' + tenExponent;\r\n        }\r\n\r\n        if (axis.tickDecimals > 0) {\r\n            return x.toFixed(recomputePrecision(value, axis.tickDecimals)) + 'e' + tenExponent;\r\n        }\r\n        return x.toFixed() + 'e' + tenExponent;\r\n    }\r\n\r\n    function recomputePrecision(num, precision) {\r\n        //for numbers close to zero, the precision from flot will be a big number\r\n        //while for big numbers, the precision will be negative\r\n        var log10Value = Math.log(Math.abs(num)) * Math.LOG10E,\r\n            newPrecision = Math.abs(log10Value + precision);\r\n\r\n        return newPrecision <= 20 ? Math.floor(newPrecision) : 20;\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////\r\n    // The top-level container for the entire plot.\r\n    function Plot(placeholder, data_, options_, plugins) {\r\n        // data is on the form:\r\n        //   [ series1, series2 ... ]\r\n        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]\r\n        // or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\r\n\r\n        var series = [],\r\n            options = {\r\n                // the color theme used for graphs\r\n                colors: [\"#edc240\", \"#afd8f8\", \"#cb4b4b\", \"#4da74d\", \"#9440ed\"],\r\n                xaxis: {\r\n                    show: null, // null = auto-detect, true = always, false = never\r\n                    position: \"bottom\", // or \"top\"\r\n                    mode: null, // null or \"time\"\r\n                    font: null, // null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\r\n                    color: null, // base color, labels, ticks\r\n                    tickColor: null, // possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\r\n                    transform: null, // null or f: number -> number to transform axis\r\n                    inverseTransform: null, // if transform is set, this should be the inverse function\r\n                    min: null, // min. value to show, null means set automatically\r\n                    max: null, // max. value to show, null means set automatically\r\n                    autoScaleMargin: null, // margin in % to add if autoScale option is on \"loose\" mode,\r\n                    autoScale: \"exact\", // Available modes: \"none\", \"loose\", \"exact\", \"sliding-window\"\r\n                    windowSize: null, // null or number. This is the size of sliding-window.\r\n                    growOnly: null, // grow only, useful for smoother auto-scale, the scales will grow to accomodate data but won't shrink back.\r\n                    ticks: null, // either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\r\n                    tickFormatter: null, // fn: number -> string\r\n                    showTickLabels: \"major\", // \"none\", \"endpoints\", \"major\", \"all\"\r\n                    labelWidth: null, // size of tick labels in pixels\r\n                    labelHeight: null,\r\n                    reserveSpace: null, // whether to reserve space even if axis isn't shown\r\n                    tickLength: null, // size in pixels of major tick marks\r\n                    showMinorTicks: null, // true = show minor tick marks, false = hide minor tick marks\r\n                    showTicks: null, // true = show tick marks, false = hide all tick marks\r\n                    gridLines: null, // true = show grid lines, false = hide grid lines\r\n                    alignTicksWithAxis: null, // axis number or null for no sync\r\n                    tickDecimals: null, // no. of decimals, null means auto\r\n                    tickSize: null, // number or [number, \"unit\"]\r\n                    minTickSize: null, // number or [number, \"unit\"]\r\n                    offset: { below: 0, above: 0 }, // the plot drawing offset. this is calculated by the flot.navigate for each axis\r\n                    boxPosition: { centerX: 0, centerY: 0 } //position of the axis on the corresponding axis box\r\n                },\r\n                yaxis: {\r\n                    autoScaleMargin: 0.02, // margin in % to add if autoScale option is on \"loose\" mode\r\n                    autoScale: \"loose\", // Available modes: \"none\", \"loose\", \"exact\"\r\n                    growOnly: null, // grow only, useful for smoother auto-scale, the scales will grow to accomodate data but won't shrink back.\r\n                    position: \"left\", // or \"right\"\r\n                    showTickLabels: \"major\", // \"none\", \"endpoints\", \"major\", \"all\"\r\n                    offset: { below: 0, above: 0 }, // the plot drawing offset. this is calculated by the flot.navigate for each axis\r\n                    boxPosition: { centerX: 0, centerY: 0 } //position of the axis on the corresponding axis box\r\n                },\r\n                xaxes: [],\r\n                yaxes: [],\r\n                series: {\r\n                    points: {\r\n                        show: false,\r\n                        radius: 3,\r\n                        lineWidth: 2, // in pixels\r\n                        fill: true,\r\n                        fillColor: \"#ffffff\",\r\n                        symbol: 'circle' // or callback\r\n                    },\r\n                    lines: {\r\n                        // we don't put in show: false so we can see\r\n                        // whether lines were actively disabled\r\n                        lineWidth: 1, // in pixels\r\n                        fill: false,\r\n                        fillColor: null,\r\n                        steps: false\r\n                        // Omit 'zero', so we can later default its value to\r\n                        // match that of the 'fill' option.\r\n                    },\r\n                    bars: {\r\n                        show: false,\r\n                        lineWidth: 2, // in pixels\r\n                        barWidth: 1, // in units of the x axis\r\n                        fill: true,\r\n                        fillColor: null,\r\n                        align: \"left\", // \"left\", \"right\", or \"center\"\r\n                        zero: true\r\n                    },\r\n                    shadowSize: 3,\r\n                    highlightColor: null\r\n                },\r\n                grid: {\r\n                    show: true,\r\n                    aboveData: false,\r\n                    color: \"#545454\", // primary color used for outline and labels\r\n                    backgroundColor: null, // null for transparent, else color\r\n                    borderColor: null, // set if different from the grid color\r\n                    tickColor: null, // color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\r\n                    margin: 0, // distance from the canvas edge to the grid\r\n                    labelMargin: 5, // in pixels\r\n                    axisMargin: 8, // in pixels\r\n                    borderWidth: 1, // in pixels\r\n                    minBorderMargin: null, // in pixels, null means taken from points radius\r\n                    markings: null, // array of ranges or fn: axes -> array of ranges\r\n                    markingsColor: \"#f4f4f4\",\r\n                    markingsLineWidth: 2,\r\n                    // interactive stuff\r\n                    clickable: false,\r\n                    hoverable: false,\r\n                    autoHighlight: true, // highlight in case mouse is near\r\n                    mouseActiveRadius: 15 // how far the mouse can be away to activate an item\r\n                },\r\n                interaction: {\r\n                    redrawOverlayInterval: 1000 / 60 // time between updates, -1 means in same flow\r\n                },\r\n                hooks: {}\r\n            },\r\n            surface = null, // the canvas for the plot itself\r\n            overlay = null, // canvas for interactive stuff on top of plot\r\n            eventHolder = null, // jQuery object that events should be bound to\r\n            ctx = null,\r\n            octx = null,\r\n            xaxes = [],\r\n            yaxes = [],\r\n            plotOffset = {\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0\r\n            },\r\n            plotWidth = 0,\r\n            plotHeight = 0,\r\n            hooks = {\r\n                processOptions: [],\r\n                processRawData: [],\r\n                processDatapoints: [],\r\n                processOffset: [],\r\n                setupGrid: [],\r\n                adjustSeriesDataRange: [],\r\n                setRange: [],\r\n                drawBackground: [],\r\n                drawSeries: [],\r\n                drawAxis: [],\r\n                draw: [],\r\n                axisReserveSpace: [],\r\n                bindEvents: [],\r\n                drawOverlay: [],\r\n                resize: [],\r\n                shutdown: []\r\n            },\r\n            plot = this;\r\n\r\n        // interactive features\r\n\r\n        var redrawTimeout = null;\r\n\r\n        // public functions\r\n        plot.setData = setData;\r\n        plot.setupGrid = setupGrid;\r\n        plot.draw = draw;\r\n        plot.getPlaceholder = function() {\r\n            return placeholder;\r\n        };\r\n        plot.getCanvas = function() {\r\n            return surface.element;\r\n        };\r\n        plot.getSurface = function() {\r\n            return surface;\r\n        };\r\n        plot.getEventHolder = function() {\r\n            return eventHolder[0];\r\n        };\r\n        plot.getPlotOffset = function() {\r\n            return plotOffset;\r\n        };\r\n        plot.width = function() {\r\n            return plotWidth;\r\n        };\r\n        plot.height = function() {\r\n            return plotHeight;\r\n        };\r\n        plot.offset = function() {\r\n            var o = eventHolder.offset();\r\n            o.left += plotOffset.left;\r\n            o.top += plotOffset.top;\r\n            return o;\r\n        };\r\n        plot.getData = function() {\r\n            return series;\r\n        };\r\n        plot.getAxes = function() {\r\n            var res = {};\r\n            $.each(xaxes.concat(yaxes), function(_, axis) {\r\n                if (axis) {\r\n                    res[axis.direction + (axis.n !== 1 ? axis.n : \"\") + \"axis\"] = axis;\r\n                }\r\n            });\r\n            return res;\r\n        };\r\n        plot.getXAxes = function() {\r\n            return xaxes;\r\n        };\r\n        plot.getYAxes = function() {\r\n            return yaxes;\r\n        };\r\n        plot.c2p = canvasToCartesianAxisCoords;\r\n        plot.p2c = cartesianAxisToCanvasCoords;\r\n        plot.getOptions = function() {\r\n            return options;\r\n        };\r\n        plot.triggerRedrawOverlay = triggerRedrawOverlay;\r\n        plot.pointOffset = function(point) {\r\n            return {\r\n                left: parseInt(xaxes[axisNumber(point, \"x\") - 1].p2c(+point.x) + plotOffset.left, 10),\r\n                top: parseInt(yaxes[axisNumber(point, \"y\") - 1].p2c(+point.y) + plotOffset.top, 10)\r\n            };\r\n        };\r\n        plot.shutdown = shutdown;\r\n        plot.destroy = function() {\r\n            shutdown();\r\n            placeholder.removeData(\"plot\").empty();\r\n\r\n            series = [];\r\n            options = null;\r\n            surface = null;\r\n            overlay = null;\r\n            eventHolder = null;\r\n            ctx = null;\r\n            octx = null;\r\n            xaxes = [];\r\n            yaxes = [];\r\n            hooks = null;\r\n            plot = null;\r\n        };\r\n\r\n        plot.resize = function() {\r\n            var width = placeholder.width(),\r\n                height = placeholder.height();\r\n            surface.resize(width, height);\r\n            overlay.resize(width, height);\r\n\r\n            executeHooks(hooks.resize, [width, height]);\r\n        };\r\n\r\n        plot.clearTextCache = function () {\r\n            surface.clearCache();\r\n            overlay.clearCache();\r\n        };\r\n\r\n        plot.computeRangeForDataSeries = computeRangeForDataSeries;\r\n        plot.adjustSeriesDataRange = adjustSeriesDataRange;\r\n        plot.findNearbyItem = findNearbyItem;\r\n        plot.findNearbyInterpolationPoint = findNearbyInterpolationPoint;\r\n        plot.computeValuePrecision = computeValuePrecision;\r\n        plot.computeTickSize = computeTickSize;\r\n\r\n        // public attributes\r\n        plot.hooks = hooks;\r\n\r\n        // initialize\r\n        var MINOR_TICKS_COUNT_CONSTANT = $.plot.uiConstants.MINOR_TICKS_COUNT_CONSTANT;\r\n        var TICK_LENGTH_CONSTANT = $.plot.uiConstants.TICK_LENGTH_CONSTANT;\r\n        initPlugins(plot);\r\n        setupCanvases();\r\n        parseOptions(options_);\r\n        setData(data_);\r\n        setupGrid();\r\n        draw();\r\n        bindEvents();\r\n\r\n        function executeHooks(hook, args) {\r\n            args = [plot].concat(args);\r\n            for (var i = 0; i < hook.length; ++i) {\r\n                hook[i].apply(this, args);\r\n            }\r\n        }\r\n\r\n        function initPlugins() {\r\n            // References to key classes, allowing plugins to modify them\r\n\r\n            var classes = {\r\n                Canvas: Canvas\r\n            };\r\n\r\n            for (var i = 0; i < plugins.length; ++i) {\r\n                var p = plugins[i];\r\n                p.init(plot, classes);\r\n                if (p.options) {\r\n                    $.extend(true, options, p.options);\r\n                }\r\n            }\r\n        }\r\n\r\n        function parseOptions(opts) {\r\n            $.extend(true, options, opts);\r\n\r\n            // $.extend merges arrays, rather than replacing them.  When less\r\n            // colors are provided than the size of the default palette, we\r\n            // end up with those colors plus the remaining defaults, which is\r\n            // not expected behavior; avoid it by replacing them here.\r\n\r\n            if (opts && opts.colors) {\r\n                options.colors = opts.colors;\r\n            }\r\n\r\n            if (options.xaxis.color == null) {\r\n                options.xaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n            }\r\n\r\n            if (options.yaxis.color == null) {\r\n                options.yaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n            }\r\n\r\n            if (options.xaxis.tickColor == null) {\r\n                // grid.tickColor for back-compatibility\r\n                options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;\r\n            }\r\n\r\n            if (options.yaxis.tickColor == null) {\r\n                // grid.tickColor for back-compatibility\r\n                options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;\r\n            }\r\n\r\n            if (options.grid.borderColor == null) {\r\n                options.grid.borderColor = options.grid.color;\r\n            }\r\n\r\n            if (options.grid.tickColor == null) {\r\n                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n            }\r\n\r\n            // Fill in defaults for axis options, including any unspecified\r\n            // font-spec fields, if a font-spec was provided.\r\n\r\n            // If no x/y axis options were provided, create one of each anyway,\r\n            // since the rest of the code assumes that they exist.\r\n\r\n            var i, axisOptions, axisCount,\r\n                fontSize = placeholder.css(\"font-size\"),\r\n                fontSizeDefault = fontSize ? +fontSize.replace(\"px\", \"\") : 13,\r\n                fontDefaults = {\r\n                    style: placeholder.css(\"font-style\"),\r\n                    size: Math.round(0.8 * fontSizeDefault),\r\n                    variant: placeholder.css(\"font-variant\"),\r\n                    weight: placeholder.css(\"font-weight\"),\r\n                    family: placeholder.css(\"font-family\")\r\n                };\r\n\r\n            axisCount = options.xaxes.length || 1;\r\n            for (i = 0; i < axisCount; ++i) {\r\n                axisOptions = options.xaxes[i];\r\n                if (axisOptions && !axisOptions.tickColor) {\r\n                    axisOptions.tickColor = axisOptions.color;\r\n                }\r\n\r\n                axisOptions = $.extend(true, {}, options.xaxis, axisOptions);\r\n                options.xaxes[i] = axisOptions;\r\n\r\n                if (axisOptions.font) {\r\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\r\n                    if (!axisOptions.font.color) {\r\n                        axisOptions.font.color = axisOptions.color;\r\n                    }\r\n                    if (!axisOptions.font.lineHeight) {\r\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\r\n                    }\r\n                }\r\n            }\r\n\r\n            axisCount = options.yaxes.length || 1;\r\n            for (i = 0; i < axisCount; ++i) {\r\n                axisOptions = options.yaxes[i];\r\n                if (axisOptions && !axisOptions.tickColor) {\r\n                    axisOptions.tickColor = axisOptions.color;\r\n                }\r\n\r\n                axisOptions = $.extend(true, {}, options.yaxis, axisOptions);\r\n                options.yaxes[i] = axisOptions;\r\n\r\n                if (axisOptions.font) {\r\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\r\n                    if (!axisOptions.font.color) {\r\n                        axisOptions.font.color = axisOptions.color;\r\n                    }\r\n                    if (!axisOptions.font.lineHeight) {\r\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // save options on axes for future reference\r\n            for (i = 0; i < options.xaxes.length; ++i) {\r\n                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];\r\n            }\r\n\r\n            for (i = 0; i < options.yaxes.length; ++i) {\r\n                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];\r\n            }\r\n\r\n            //process boxPosition options used for axis.box size\r\n            $.each(allAxes(), function(_, axis) {\r\n                axis.boxPosition = axis.options.boxPosition || {centerX: 0, centerY: 0};\r\n            });\r\n\r\n            // add hooks from options\r\n            for (var n in hooks) {\r\n                if (options.hooks[n] && options.hooks[n].length) {\r\n                    hooks[n] = hooks[n].concat(options.hooks[n]);\r\n                }\r\n            }\r\n\r\n            executeHooks(hooks.processOptions, [options]);\r\n        }\r\n\r\n        function setData(d) {\r\n            var oldseries = series;\r\n            series = parseData(d);\r\n            fillInSeriesOptions();\r\n            processData(oldseries);\r\n        }\r\n\r\n        function parseData(d) {\r\n            var res = [];\r\n            for (var i = 0; i < d.length; ++i) {\r\n                var s = $.extend(true, {}, options.series);\r\n\r\n                if (d[i].data != null) {\r\n                    s.data = d[i].data; // move the data instead of deep-copy\r\n                    delete d[i].data;\r\n\r\n                    $.extend(true, s, d[i]);\r\n\r\n                    d[i].data = s.data;\r\n                } else {\r\n                    s.data = d[i];\r\n                }\r\n\r\n                res.push(s);\r\n            }\r\n\r\n            return res;\r\n        }\r\n\r\n        function axisNumber(obj, coord) {\r\n            var a = obj[coord + \"axis\"];\r\n            if (typeof a === \"object\") {\r\n                // if we got a real axis, extract number\r\n                a = a.n;\r\n            }\r\n\r\n            if (typeof a !== \"number\") {\r\n                a = 1; // default to first axis\r\n            }\r\n\r\n            return a;\r\n        }\r\n\r\n        function allAxes() {\r\n            // return flat array without annoying null entries\r\n            return xaxes.concat(yaxes).filter(function(a) {\r\n                return a;\r\n            });\r\n        }\r\n\r\n        // canvas to axis for cartesian axes\r\n        function canvasToCartesianAxisCoords(pos) {\r\n            // return an object with x/y corresponding to all used axes\r\n            var res = {},\r\n                i, axis;\r\n            for (i = 0; i < xaxes.length; ++i) {\r\n                axis = xaxes[i];\r\n                if (axis && axis.used) {\r\n                    res[\"x\" + axis.n] = axis.c2p(pos.left);\r\n                }\r\n            }\r\n\r\n            for (i = 0; i < yaxes.length; ++i) {\r\n                axis = yaxes[i];\r\n                if (axis && axis.used) {\r\n                    res[\"y\" + axis.n] = axis.c2p(pos.top);\r\n                }\r\n            }\r\n\r\n            if (res.x1 !== undefined) {\r\n                res.x = res.x1;\r\n            }\r\n\r\n            if (res.y1 !== undefined) {\r\n                res.y = res.y1;\r\n            }\r\n\r\n            return res;\r\n        }\r\n\r\n        // axis to canvas for cartesian axes\r\n        function cartesianAxisToCanvasCoords(pos) {\r\n            // get canvas coords from the first pair of x/y found in pos\r\n            var res = {},\r\n                i, axis, key;\r\n\r\n            for (i = 0; i < xaxes.length; ++i) {\r\n                axis = xaxes[i];\r\n                if (axis && axis.used) {\r\n                    key = \"x\" + axis.n;\r\n                    if (pos[key] == null && axis.n === 1) {\r\n                        key = \"x\";\r\n                    }\r\n\r\n                    if (pos[key] != null) {\r\n                        res.left = axis.p2c(pos[key]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (i = 0; i < yaxes.length; ++i) {\r\n                axis = yaxes[i];\r\n                if (axis && axis.used) {\r\n                    key = \"y\" + axis.n;\r\n                    if (pos[key] == null && axis.n === 1) {\r\n                        key = \"y\";\r\n                    }\r\n\r\n                    if (pos[key] != null) {\r\n                        res.top = axis.p2c(pos[key]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return res;\r\n        }\r\n\r\n        function getOrCreateAxis(axes, number) {\r\n            if (!axes[number - 1]) {\r\n                axes[number - 1] = {\r\n                    n: number, // save the number for future reference\r\n                    direction: axes === xaxes ? \"x\" : \"y\",\r\n                    options: $.extend(true, {}, axes === xaxes ? options.xaxis : options.yaxis)\r\n                };\r\n            }\r\n\r\n            return axes[number - 1];\r\n        }\r\n\r\n        function fillInSeriesOptions() {\r\n            var neededColors = series.length,\r\n                maxIndex = -1,\r\n                i;\r\n\r\n            // Subtract the number of series that already have fixed colors or\r\n            // color indexes from the number that we still need to generate.\r\n\r\n            for (i = 0; i < series.length; ++i) {\r\n                var sc = series[i].color;\r\n                if (sc != null) {\r\n                    neededColors--;\r\n                    if (typeof sc === \"number\" && sc > maxIndex) {\r\n                        maxIndex = sc;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // If any of the series have fixed color indexes, then we need to\r\n            // generate at least as many colors as the highest index.\r\n\r\n            if (neededColors <= maxIndex) {\r\n                neededColors = maxIndex + 1;\r\n            }\r\n\r\n            // Generate all the colors, using first the option colors and then\r\n            // variations on those colors once they're exhausted.\r\n\r\n            var c, colors = [],\r\n                colorPool = options.colors,\r\n                colorPoolSize = colorPool.length,\r\n                variation = 0,\r\n                definedColors = series.length - neededColors;\r\n\r\n            for (i = 0; i < neededColors; i++) {\r\n                c = $.color.parse(colorPool[(definedColors + i) % colorPoolSize] || \"#666\");\r\n\r\n                // Each time we exhaust the colors in the pool we adjust\r\n                // a scaling factor used to produce more variations on\r\n                // those colors. The factor alternates negative/positive\r\n                // to produce lighter/darker colors.\r\n\r\n                // Reset the variation after every few cycles, or else\r\n                // it will end up producing only white or black colors.\r\n\r\n                if (i % colorPoolSize === 0 && i) {\r\n                    if (variation >= 0) {\r\n                        if (variation < 0.5) {\r\n                            variation = -variation - 0.2;\r\n                        } else variation = 0;\r\n                    } else variation = -variation;\r\n                }\r\n\r\n                colors[i] = c.scale('rgb', 1 + variation);\r\n            }\r\n\r\n            // Finalize the series options, filling in their colors\r\n\r\n            var colori = 0,\r\n                s;\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n\r\n                // assign colors\r\n                if (s.color == null) {\r\n                    s.color = colors[colori].toString();\r\n                    ++colori;\r\n                } else if (typeof s.color === \"number\") {\r\n                    s.color = colors[s.color].toString();\r\n                }\r\n\r\n                // turn on lines automatically in case nothing is set\r\n                if (s.lines.show == null) {\r\n                    var v, show = true;\r\n                    for (v in s) {\r\n                        if (s[v] && s[v].show) {\r\n                            show = false;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    if (show) {\r\n                        s.lines.show = true;\r\n                    }\r\n                }\r\n\r\n                // If nothing was provided for lines.zero, default it to match\r\n                // lines.fill, since areas by default should extend to zero.\r\n\r\n                if (s.lines.zero == null) {\r\n                    s.lines.zero = !!s.lines.fill;\r\n                }\r\n\r\n                // setup axes\r\n                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, \"x\"));\r\n                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, \"y\"));\r\n            }\r\n        }\r\n\r\n        function processData(prevSeries) {\r\n            var topSentry = Number.POSITIVE_INFINITY,\r\n                bottomSentry = Number.NEGATIVE_INFINITY,\r\n                i, j, k, m,\r\n                s, points, ps, val, f, p,\r\n                data, format;\r\n\r\n            function updateAxis(axis, min, max) {\r\n                if (min < axis.datamin && min !== -Infinity) {\r\n                    axis.datamin = min;\r\n                }\r\n\r\n                if (max > axis.datamax && max !== Infinity) {\r\n                    axis.datamax = max;\r\n                }\r\n            }\r\n\r\n            function reusePoints(prevSeries, i) {\r\n                if (prevSeries && prevSeries[i] && prevSeries[i].datapoints && prevSeries[i].datapoints.points) {\r\n                    return prevSeries[i].datapoints.points;\r\n                }\r\n\r\n                return [];\r\n            }\r\n\r\n            $.each(allAxes(), function(_, axis) {\r\n                // init axis\r\n                if (axis.options.growOnly !== true) {\r\n                    axis.datamin = topSentry;\r\n                    axis.datamax = bottomSentry;\r\n                } else {\r\n                    if (axis.datamin === undefined) {\r\n                        axis.datamin = topSentry;\r\n                    }\r\n                    if (axis.datamax === undefined) {\r\n                        axis.datamax = bottomSentry;\r\n                    }\r\n                }\r\n                axis.used = false;\r\n            });\r\n\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                s.datapoints = {\r\n                    points: []\r\n                };\r\n\r\n                if (s.datapoints.points.length === 0) {\r\n                    s.datapoints.points = reusePoints(prevSeries, i);\r\n                }\r\n\r\n                executeHooks(hooks.processRawData, [s, s.data, s.datapoints]);\r\n            }\r\n\r\n            // first pass: clean and copy data\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n\r\n                data = s.data;\r\n                format = s.datapoints.format;\r\n\r\n                if (!format) {\r\n                    format = [];\r\n                    // find out how to copy\r\n                    format.push({\r\n                        x: true,\r\n                        y: false,\r\n                        number: true,\r\n                        required: true,\r\n                        computeRange: s.xaxis.options.autoScale !== 'none',\r\n                        defaultValue: null\r\n                    });\r\n\r\n                    format.push({\r\n                        x: false,\r\n                        y: true,\r\n                        number: true,\r\n                        required: true,\r\n                        computeRange: s.yaxis.options.autoScale !== 'none',\r\n                        defaultValue: null\r\n                    });\r\n\r\n                    if (s.bars.show || (s.lines.show && s.lines.fill)) {\r\n                        var expectedPs = s.datapoints.pointsize != null ? s.datapoints.pointsize : (s.data && s.data[0] && s.data[0].length ? s.data[0].length : 3);\r\n                        if (expectedPs > 2) {\r\n                            format.push({\r\n                                x: false,\r\n                                y: true,\r\n                                number: true,\r\n                                required: false,\r\n                                computeRange: s.yaxis.options.autoScale !== 'none',\r\n                                defaultValue: 0\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    s.datapoints.format = format;\r\n                }\r\n\r\n                s.xaxis.used = s.yaxis.used = true;\r\n\r\n                if (s.datapoints.pointsize != null) continue; // already filled in\r\n\r\n                s.datapoints.pointsize = format.length;\r\n                ps = s.datapoints.pointsize;\r\n                points = s.datapoints.points;\r\n\r\n                var insertSteps = s.lines.show && s.lines.steps;\r\n\r\n                for (j = k = 0; j < data.length; ++j, k += ps) {\r\n                    p = data[j];\r\n\r\n                    var nullify = p == null;\r\n                    if (!nullify) {\r\n                        for (m = 0; m < ps; ++m) {\r\n                            val = p[m];\r\n                            f = format[m];\r\n\r\n                            if (f) {\r\n                                if (f.number && val != null) {\r\n                                    val = +val; // convert to number\r\n                                    if (isNaN(val)) {\r\n                                        val = null;\r\n                                    }\r\n                                }\r\n\r\n                                if (val == null) {\r\n                                    if (f.required) nullify = true;\r\n\r\n                                    if (f.defaultValue != null) val = f.defaultValue;\r\n                                }\r\n                            }\r\n\r\n                            points[k + m] = val;\r\n                        }\r\n                    }\r\n\r\n                    if (nullify) {\r\n                        for (m = 0; m < ps; ++m) {\r\n                            val = points[k + m];\r\n                            if (val != null) {\r\n                                f = format[m];\r\n                                // extract min/max info\r\n                                if (f.computeRange) {\r\n                                    if (f.x) {\r\n                                        updateAxis(s.xaxis, val, val);\r\n                                    }\r\n                                    if (f.y) {\r\n                                        updateAxis(s.yaxis, val, val);\r\n                                    }\r\n                                }\r\n                            }\r\n                            points[k + m] = null;\r\n                        }\r\n                    } else {\r\n                        // a little bit of line specific stuff that\r\n                        // perhaps shouldn't be here, but lacking\r\n                        // better means...\r\n                        if (insertSteps && k > 0 &&\r\n                            points[k - ps] != null &&\r\n                            points[k - ps] !== points[k] &&\r\n                            points[k - ps + 1] !== points[k + 1]) {\r\n                            // copy the point to make room for a middle point\r\n                            for (m = 0; m < ps; ++m) {\r\n                                points[k + ps + m] = points[k + m];\r\n                            }\r\n\r\n                            // middle point has same y\r\n                            points[k + 1] = points[k - ps + 1];\r\n\r\n                            // we've added a point, better reflect that\r\n                            k += ps;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                points.length = k; //trims the internal buffer to the correct length\r\n            }\r\n\r\n            // give the hooks a chance to run\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n\r\n                executeHooks(hooks.processDatapoints, [s, s.datapoints]);\r\n            }\r\n\r\n            // second pass: find datamax/datamin for auto-scaling\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                format = s.datapoints.format;\r\n\r\n                if (format.every(function (f) { return !f.computeRange; })) {\r\n                    continue;\r\n                }\r\n\r\n                var range = plot.adjustSeriesDataRange(s,\r\n                    plot.computeRangeForDataSeries(s));\r\n\r\n                executeHooks(hooks.adjustSeriesDataRange, [s, range]);\r\n\r\n                updateAxis(s.xaxis, range.xmin, range.xmax);\r\n                updateAxis(s.yaxis, range.ymin, range.ymax);\r\n            }\r\n\r\n            $.each(allAxes(), function(_, axis) {\r\n                if (axis.datamin === topSentry) {\r\n                    axis.datamin = null;\r\n                }\r\n\r\n                if (axis.datamax === bottomSentry) {\r\n                    axis.datamax = null;\r\n                }\r\n            });\r\n        }\r\n\r\n        function setupCanvases() {\r\n            // Make sure the placeholder is clear of everything except canvases\r\n            // from a previous plot in this container that we'll try to re-use.\r\n\r\n            placeholder.css(\"padding\", 0) // padding messes up the positioning\r\n                .children().filter(function() {\r\n                    return !$(this).hasClass(\"flot-overlay\") && !$(this).hasClass('flot-base');\r\n                }).remove();\r\n\r\n            if (placeholder.css(\"position\") === 'static') {\r\n                placeholder.css(\"position\", \"relative\"); // for positioning labels and overlay\r\n            }\r\n\r\n            surface = new Canvas(\"flot-base\", placeholder[0]);\r\n            overlay = new Canvas(\"flot-overlay\", placeholder[0]); // overlay canvas for interactive features\r\n\r\n            ctx = surface.context;\r\n            octx = overlay.context;\r\n\r\n            // define which element we're listening for events on\r\n            eventHolder = $(overlay.element).unbind();\r\n\r\n            // If we're re-using a plot object, shut down the old one\r\n\r\n            var existing = placeholder.data(\"plot\");\r\n\r\n            if (existing) {\r\n                existing.shutdown();\r\n                overlay.clear();\r\n            }\r\n\r\n            // save in case we get replotted\r\n            placeholder.data(\"plot\", plot);\r\n        }\r\n\r\n        function bindEvents() {\r\n            executeHooks(hooks.bindEvents, [eventHolder]);\r\n        }\r\n\r\n        function shutdown() {\r\n            if (redrawTimeout) {\r\n                clearTimeout(redrawTimeout);\r\n            }\r\n\r\n            executeHooks(hooks.shutdown, [eventHolder]);\r\n        }\r\n\r\n        function setTransformationHelpers(axis) {\r\n            // set helper functions on the axis, assumes plot area\r\n            // has been computed already\r\n\r\n            function identity(x) {\r\n                return x;\r\n            }\r\n\r\n            var s, m, t = axis.options.transform || identity,\r\n                it = axis.options.inverseTransform;\r\n\r\n            // precompute how much the axis is scaling a point\r\n            // in canvas space\r\n            if (axis.direction === \"x\") {\r\n                if (isFinite(t(axis.max) - t(axis.min))) {\r\n                    s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));\r\n                } else {\r\n                    s = axis.scale = 1 / Math.abs($.plot.saturated.delta(t(axis.min), t(axis.max), plotWidth));\r\n                }\r\n                m = Math.min(t(axis.max), t(axis.min));\r\n            } else {\r\n                if (isFinite(t(axis.max) - t(axis.min))) {\r\n                    s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));\r\n                } else {\r\n                    s = axis.scale = 1 / Math.abs($.plot.saturated.delta(t(axis.min), t(axis.max), plotHeight));\r\n                }\r\n                s = -s;\r\n                m = Math.max(t(axis.max), t(axis.min));\r\n            }\r\n\r\n            // data point to canvas coordinate\r\n            if (t === identity) {\r\n                // slight optimization\r\n                axis.p2c = function(p) {\r\n                    if (isFinite(p - m)) {\r\n                        return (p - m) * s;\r\n                    } else {\r\n                        return (p / 4 - m / 4) * s * 4;\r\n                    }\r\n                };\r\n            } else {\r\n                axis.p2c = function(p) {\r\n                    var tp = t(p);\r\n\r\n                    if (isFinite(tp - m)) {\r\n                        return (tp - m) * s;\r\n                    } else {\r\n                        return (tp / 4 - m / 4) * s * 4;\r\n                    }\r\n                };\r\n            }\r\n\r\n            // canvas coordinate to data point\r\n            if (!it) {\r\n                axis.c2p = function(c) {\r\n                    return m + c / s;\r\n                };\r\n            } else {\r\n                axis.c2p = function(c) {\r\n                    return it(m + c / s);\r\n                };\r\n            }\r\n        }\r\n\r\n        function measureTickLabels(axis) {\r\n            var opts = axis.options,\r\n                ticks = opts.showTickLabels !== 'none' && axis.ticks ? axis.ticks : [],\r\n                showMajorTickLabels = opts.showTickLabels === 'major' || opts.showTickLabels === 'all',\r\n                showEndpointsTickLabels = opts.showTickLabels === 'endpoints' || opts.showTickLabels === 'all',\r\n                labelWidth = opts.labelWidth || 0,\r\n                labelHeight = opts.labelHeight || 0,\r\n                legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\r\n                layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\r\n                font = opts.font || \"flot-tick-label tickLabel\";\r\n\r\n            for (var i = 0; i < ticks.length; ++i) {\r\n                var t = ticks[i];\r\n                var label = t.label;\r\n\r\n                if (!t.label ||\r\n                    (showMajorTickLabels === false && i > 0 && i < ticks.length - 1) ||\r\n                    (showEndpointsTickLabels === false && (i === 0 || i === ticks.length - 1))) {\r\n                    continue;\r\n                }\r\n\r\n                if (typeof t.label === 'object') {\r\n                    label = t.label.name;\r\n                }\r\n\r\n                var info = surface.getTextInfo(layer, label, font);\r\n\r\n                labelWidth = Math.max(labelWidth, info.width);\r\n                labelHeight = Math.max(labelHeight, info.height);\r\n            }\r\n\r\n            axis.labelWidth = opts.labelWidth || labelWidth;\r\n            axis.labelHeight = opts.labelHeight || labelHeight;\r\n        }\r\n\r\n        function allocateAxisBoxFirstPhase(axis) {\r\n            // find the bounding box of the axis by looking at label\r\n            // widths/heights and ticks, make room by diminishing the\r\n            // plotOffset; this first phase only looks at one\r\n            // dimension per axis, the other dimension depends on the\r\n            // other axes so will have to wait\r\n\r\n            // here reserve additional space\r\n            executeHooks(hooks.axisReserveSpace, [axis]);\r\n\r\n            var lw = axis.labelWidth,\r\n                lh = axis.labelHeight,\r\n                pos = axis.options.position,\r\n                isXAxis = axis.direction === \"x\",\r\n                tickLength = axis.options.tickLength,\r\n                showTicks = axis.options.showTicks,\r\n                showMinorTicks = axis.options.showMinorTicks,\r\n                gridLines = axis.options.gridLines,\r\n                axisMargin = options.grid.axisMargin,\r\n                padding = options.grid.labelMargin,\r\n                innermost = true,\r\n                outermost = true,\r\n                found = false;\r\n\r\n            // Determine the axis's position in its direction and on its side\r\n\r\n            $.each(isXAxis ? xaxes : yaxes, function(i, a) {\r\n                if (a && (a.show || a.reserveSpace)) {\r\n                    if (a === axis) {\r\n                        found = true;\r\n                    } else if (a.options.position === pos) {\r\n                        if (found) {\r\n                            outermost = false;\r\n                        } else {\r\n                            innermost = false;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            // The outermost axis on each side has no margin\r\n            if (outermost) {\r\n                axisMargin = 0;\r\n            }\r\n\r\n            // Set the default tickLength if necessary\r\n            if (tickLength == null) {\r\n                tickLength = TICK_LENGTH_CONSTANT;\r\n            }\r\n\r\n            // By default, major tick marks are visible\r\n            if (showTicks == null) {\r\n                showTicks = true;\r\n            }\r\n\r\n            // By default, minor tick marks are visible\r\n            if (showMinorTicks == null) {\r\n                showMinorTicks = true;\r\n            }\r\n\r\n            // By default, grid lines are visible\r\n            if (gridLines == null) {\r\n                if (innermost) {\r\n                    gridLines = true;\r\n                } else {\r\n                    gridLines = false;\r\n                }\r\n            }\r\n\r\n            if (!isNaN(+tickLength)) {\r\n                padding += showTicks ? +tickLength : 0;\r\n            }\r\n\r\n            if (isXAxis) {\r\n                lh += padding;\r\n\r\n                if (pos === \"bottom\") {\r\n                    plotOffset.bottom += lh + axisMargin;\r\n                    axis.box = {\r\n                        top: surface.height - plotOffset.bottom,\r\n                        height: lh\r\n                    };\r\n                } else {\r\n                    axis.box = {\r\n                        top: plotOffset.top + axisMargin,\r\n                        height: lh\r\n                    };\r\n                    plotOffset.top += lh + axisMargin;\r\n                }\r\n            } else {\r\n                lw += padding;\r\n\r\n                if (pos === \"left\") {\r\n                    axis.box = {\r\n                        left: plotOffset.left + axisMargin,\r\n                        width: lw\r\n                    };\r\n                    plotOffset.left += lw + axisMargin;\r\n                } else {\r\n                    plotOffset.right += lw + axisMargin;\r\n                    axis.box = {\r\n                        left: surface.width - plotOffset.right,\r\n                        width: lw\r\n                    };\r\n                }\r\n            }\r\n\r\n            // save for future reference\r\n            axis.position = pos;\r\n            axis.tickLength = tickLength;\r\n            axis.showMinorTicks = showMinorTicks;\r\n            axis.showTicks = showTicks;\r\n            axis.gridLines = gridLines;\r\n            axis.box.padding = padding;\r\n            axis.innermost = innermost;\r\n        }\r\n\r\n        function allocateAxisBoxSecondPhase(axis) {\r\n            // now that all axis boxes have been placed in one\r\n            // dimension, we can set the remaining dimension coordinates\r\n            if (axis.direction === \"x\") {\r\n                axis.box.left = plotOffset.left - axis.labelWidth / 2;\r\n                axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.labelWidth;\r\n            } else {\r\n                axis.box.top = plotOffset.top - axis.labelHeight / 2;\r\n                axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.labelHeight;\r\n            }\r\n        }\r\n\r\n        function adjustLayoutForThingsStickingOut() {\r\n            // possibly adjust plot offset to ensure everything stays\r\n            // inside the canvas and isn't clipped off\r\n\r\n            var minMargin = options.grid.minBorderMargin,\r\n                i;\r\n\r\n            // check stuff from the plot (FIXME: this should just read\r\n            // a value from the series, otherwise it's impossible to\r\n            // customize)\r\n            if (minMargin == null) {\r\n                minMargin = 0;\r\n                for (i = 0; i < series.length; ++i) {\r\n                    minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth / 2));\r\n                }\r\n            }\r\n\r\n            var a, offset = {},\r\n                margins = {\r\n                    left: minMargin,\r\n                    right: minMargin,\r\n                    top: minMargin,\r\n                    bottom: minMargin\r\n                };\r\n\r\n            // check axis labels, note we don't check the actual\r\n            // labels but instead use the overall width/height to not\r\n            // jump as much around with replots\r\n            $.each(allAxes(), function(_, axis) {\r\n                if (axis.reserveSpace && axis.ticks && axis.ticks.length) {\r\n                    if (axis.direction === \"x\") {\r\n                        margins.left = Math.max(margins.left, axis.labelWidth / 2);\r\n                        margins.right = Math.max(margins.right, axis.labelWidth / 2);\r\n                    } else {\r\n                        margins.bottom = Math.max(margins.bottom, axis.labelHeight / 2);\r\n                        margins.top = Math.max(margins.top, axis.labelHeight / 2);\r\n                    }\r\n                }\r\n            });\r\n\r\n            for (a in margins) {\r\n                offset[a] = margins[a] - plotOffset[a];\r\n            }\r\n            $.each(xaxes.concat(yaxes), function(_, axis) {\r\n                alignAxisWithGrid(axis, offset, function (offset) {\r\n                    return offset > 0;\r\n                });\r\n            });\r\n\r\n            plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));\r\n            plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));\r\n            plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));\r\n            plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));\r\n        }\r\n\r\n        function alignAxisWithGrid(axis, offset, isValid) {\r\n            if (axis.direction === \"x\") {\r\n                if (axis.position === \"bottom\" && isValid(offset.bottom)) {\r\n                    axis.box.top -= Math.ceil(offset.bottom);\r\n                }\r\n                if (axis.position === \"top\" && isValid(offset.top)) {\r\n                    axis.box.top += Math.ceil(offset.top);\r\n                }\r\n            } else {\r\n                if (axis.position === \"left\" && isValid(offset.left)) {\r\n                    axis.box.left += Math.ceil(offset.left);\r\n                }\r\n                if (axis.position === \"right\" && isValid(offset.right)) {\r\n                    axis.box.left -= Math.ceil(offset.right);\r\n                }\r\n            }\r\n        }\r\n\r\n        function setupGrid() {\r\n            var i, a, axes = allAxes(),\r\n                showGrid = options.grid.show;\r\n\r\n            // Initialize the plot's offset from the edge of the canvas\r\n\r\n            for (a in plotOffset) {\r\n                plotOffset[a] = 0;\r\n            }\r\n\r\n            executeHooks(hooks.processOffset, [plotOffset]);\r\n\r\n            // If the grid is visible, add its border width to the offset\r\n            for (a in plotOffset) {\r\n                if (typeof (options.grid.borderWidth) === \"object\") {\r\n                    plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;\r\n                } else {\r\n                    plotOffset[a] += showGrid ? options.grid.borderWidth : 0;\r\n                }\r\n            }\r\n\r\n            $.each(axes, function(_, axis) {\r\n                var axisOpts = axis.options;\r\n                axis.show = axisOpts.show == null ? axis.used : axisOpts.show;\r\n                axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;\r\n                setupTickFormatter(axis);\r\n                executeHooks(hooks.setRange, [axis]);\r\n                setRange(axis);\r\n            });\r\n\r\n            if (showGrid) {\r\n                plotWidth = surface.width - plotOffset.left - plotOffset.right;\r\n                plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\r\n\r\n                var allocatedAxes = $.grep(axes, function(axis) {\r\n                    return axis.show || axis.reserveSpace;\r\n                });\r\n\r\n                $.each(allocatedAxes, function(_, axis) {\r\n                    // make the ticks\r\n                    setupTickGeneration(axis);\r\n                    setMajorTicks(axis);\r\n                    snapRangeToTicks(axis, axis.ticks);\r\n\r\n                    //for computing the endpoints precision, transformationHelpers are needed\r\n                    setTransformationHelpers(axis);\r\n                    setEndpointTicks(axis, series);\r\n\r\n                    // find labelWidth/Height for axis\r\n                    measureTickLabels(axis);\r\n                });\r\n\r\n                // with all dimensions calculated, we can compute the\r\n                // axis bounding boxes, start from the outside\r\n                // (reverse order)\r\n                for (i = allocatedAxes.length - 1; i >= 0; --i) {\r\n                    allocateAxisBoxFirstPhase(allocatedAxes[i]);\r\n                }\r\n\r\n                // make sure we've got enough space for things that\r\n                // might stick out\r\n                adjustLayoutForThingsStickingOut();\r\n\r\n                $.each(allocatedAxes, function(_, axis) {\r\n                    allocateAxisBoxSecondPhase(axis);\r\n                });\r\n            }\r\n\r\n            //adjust axis and plotOffset according to grid.margins\r\n            if (options.grid.margin) {\r\n                for (a in plotOffset) {\r\n                    var margin = options.grid.margin || 0;\r\n                    plotOffset[a] += typeof margin === \"number\" ? margin : (margin[a] || 0);\r\n                }\r\n                $.each(xaxes.concat(yaxes), function(_, axis) {\r\n                    alignAxisWithGrid(axis, options.grid.margin, function(offset) {\r\n                        return offset !== undefined && offset !== null;\r\n                    });\r\n                });\r\n            }\r\n\r\n            //after adjusting the axis, plot width and height will be modified\r\n            plotWidth = surface.width - plotOffset.left - plotOffset.right;\r\n            plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\r\n\r\n            // now we got the proper plot dimensions, we can compute the scaling\r\n            $.each(axes, function(_, axis) {\r\n                setTransformationHelpers(axis);\r\n            });\r\n\r\n            if (showGrid) {\r\n                drawAxisLabels();\r\n            }\r\n\r\n            executeHooks(hooks.setupGrid, []);\r\n        }\r\n\r\n        function widenMinMax(minimum, maximum) {\r\n            var min = (minimum === undefined ? null : minimum);\r\n            var max = (maximum === undefined ? null : maximum);\r\n            var delta = max - min;\r\n            if (delta === 0.0) {\r\n                // degenerate case\r\n                var widen = max === 0 ? 1 : 0.01;\r\n                var wmin = null;\r\n                if (min == null) {\r\n                    wmin -= widen;\r\n                }\r\n\r\n                // always widen max if we couldn't widen min to ensure we\r\n                // don't fall into min == max which doesn't work\r\n                if (max == null || min != null) {\r\n                    max += widen;\r\n                }\r\n\r\n                if (wmin != null) {\r\n                    min = wmin;\r\n                }\r\n            }\r\n\r\n            return {\r\n                min: min,\r\n                max: max\r\n            };\r\n        }\r\n\r\n        function autoScaleAxis(axis) {\r\n            var opts = axis.options,\r\n                min = opts.min,\r\n                max = opts.max,\r\n                datamin = axis.datamin,\r\n                datamax = axis.datamax,\r\n                delta;\r\n\r\n            switch (opts.autoScale) {\r\n                case \"none\":\r\n                    min = +(opts.min != null ? opts.min : datamin);\r\n                    max = +(opts.max != null ? opts.max : datamax);\r\n                    break;\r\n                case \"loose\":\r\n                    if (datamin != null && datamax != null) {\r\n                        min = datamin;\r\n                        max = datamax;\r\n                        delta = $.plot.saturated.saturate(max - min);\r\n                        var margin = ((typeof opts.autoScaleMargin === 'number') ? opts.autoScaleMargin : 0.02);\r\n                        min = $.plot.saturated.saturate(min - delta * margin);\r\n                        max = $.plot.saturated.saturate(max + delta * margin);\r\n\r\n                        // make sure we don't go below zero if all values are positive\r\n                        if (min < 0 && datamin >= 0) {\r\n                            min = 0;\r\n                        }\r\n                    } else {\r\n                        min = opts.min;\r\n                        max = opts.max;\r\n                    }\r\n                    break;\r\n                case \"exact\":\r\n                    min = (datamin != null ? datamin : opts.min);\r\n                    max = (datamax != null ? datamax : opts.max);\r\n                    break;\r\n                case \"sliding-window\":\r\n                    if (datamax > max) {\r\n                        // move the window to fit the new data,\r\n                        // keeping the axis range constant\r\n                        max = datamax;\r\n                        min = Math.max(datamax - (opts.windowSize || 100), min);\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            var widenedMinMax = widenMinMax(min, max);\r\n            min = widenedMinMax.min;\r\n            max = widenedMinMax.max;\r\n\r\n            // grow loose or grow exact supported\r\n            if (opts.growOnly === true && opts.autoScale !== \"none\" && opts.autoScale !== \"sliding-window\") {\r\n                min = (min < datamin) ? min : (datamin !== null ? datamin : min);\r\n                max = (max > datamax) ? max : (datamax !== null ? datamax : max);\r\n            }\r\n\r\n            axis.autoScaledMin = min;\r\n            axis.autoScaledMax = max;\r\n        }\r\n\r\n        function setRange(axis) {\r\n            autoScaleAxis(axis);\r\n\r\n            var min = axis.autoScaledMin,\r\n                max = axis.autoScaledMax,\r\n                plotOffset = axis.options.offset;\r\n\r\n            min = (min != null ? min : -1) + (plotOffset.below || 0);\r\n            max = (max != null ? max : 1) + (plotOffset.above || 0);\r\n\r\n            if (min > max) {\r\n                var tmp = min;\r\n                min = max;\r\n                max = tmp;\r\n                axis.options.offset = { above: 0, below: 0 };\r\n            }\r\n\r\n            axis.min = $.plot.saturated.saturate(min);\r\n            axis.max = $.plot.saturated.saturate(max);\r\n        }\r\n\r\n        function computeValuePrecision (min, max, direction, ticks, tickDecimals) {\r\n            var noTicks = fixupNumberOfTicks(direction, surface, ticks);\r\n\r\n            var delta = $.plot.saturated.delta(min, max, noTicks),\r\n                dec = -Math.floor(Math.log(delta) / Math.LN10);\r\n\r\n            //if it is called with tickDecimals, then the precision should not be greather then that\r\n            if (tickDecimals && dec > tickDecimals) {\r\n                dec = tickDecimals;\r\n            }\r\n\r\n            var magn = Math.pow(10, -dec),\r\n                norm = delta / magn;\r\n\r\n            if (norm > 2.25 && norm < 3 && (dec + 1) <= tickDecimals) {\r\n                //we need an extra decimals when tickSize is 2.5\r\n                ++dec;\r\n            }\r\n\r\n            return isFinite(dec) ? dec : 0;\r\n        };\r\n\r\n        function computeTickSize (min, max, noTicks, tickDecimals) {\r\n            var delta = $.plot.saturated.delta(min, max, noTicks),\r\n                dec = -Math.floor(Math.log(delta) / Math.LN10);\r\n\r\n            //if it is called with tickDecimals, then the precision should not be greather then that\r\n            if (tickDecimals && dec > tickDecimals) {\r\n                dec = tickDecimals;\r\n            }\r\n\r\n            var magn = Math.pow(10, -dec),\r\n                norm = delta / magn, // norm is between 1.0 and 10.0\r\n                size;\r\n\r\n            if (norm < 1.5) {\r\n                size = 1;\r\n            } else if (norm < 3) {\r\n                size = 2;\r\n                if (norm > 2.25 && (tickDecimals == null || (dec + 1) <= tickDecimals)) {\r\n                    size = 2.5;\r\n                }\r\n            } else if (norm < 7.5) {\r\n                size = 5;\r\n            } else {\r\n                size = 10;\r\n            }\r\n\r\n            size *= magn;\r\n            return size;\r\n        }\r\n\r\n        function getAxisTickSize(min, max, direction, options, tickDecimals) {\r\n            var noTicks;\r\n\r\n            if (typeof options.ticks === \"number\" && options.ticks > 0) {\r\n                noTicks = options.ticks;\r\n            } else {\r\n            // heuristic based on the model a*sqrt(x) fitted to\r\n            // some data points that seemed reasonable\r\n                noTicks = 0.3 * Math.sqrt(direction === \"x\" ? surface.width : surface.height);\r\n            }\r\n\r\n            var size = computeTickSize(min, max, noTicks, tickDecimals);\r\n\r\n            if (options.minTickSize != null && size < options.minTickSize) {\r\n                size = options.minTickSize;\r\n            }\r\n\r\n            return options.tickSize || size;\r\n        };\r\n\r\n        function fixupNumberOfTicks(direction, surface, ticksOption) {\r\n            var noTicks;\r\n\r\n            if (typeof ticksOption === \"number\" && ticksOption > 0) {\r\n                noTicks = ticksOption;\r\n            } else {\r\n                noTicks = 0.3 * Math.sqrt(direction === \"x\" ? surface.width : surface.height);\r\n            }\r\n\r\n            return noTicks;\r\n        }\r\n\r\n        function setupTickFormatter(axis) {\r\n            var opts = axis.options;\r\n            if (!axis.tickFormatter) {\r\n                if (typeof opts.tickFormatter === 'function') {\r\n                    axis.tickFormatter = function() {\r\n                        var args = Array.prototype.slice.call(arguments);\r\n                        return \"\" + opts.tickFormatter.apply(null, args);\r\n                    };\r\n                } else {\r\n                    axis.tickFormatter = defaultTickFormatter;\r\n                }\r\n            }\r\n        }\r\n\r\n        function setupTickGeneration(axis) {\r\n            var opts = axis.options;\r\n            var noTicks;\r\n\r\n            noTicks = fixupNumberOfTicks(axis.direction, surface, opts.ticks);\r\n\r\n            axis.delta = $.plot.saturated.delta(axis.min, axis.max, noTicks);\r\n            var precision = plot.computeValuePrecision(axis.min, axis.max, axis.direction, noTicks, opts.tickDecimals);\r\n\r\n            axis.tickDecimals = Math.max(0, opts.tickDecimals != null ? opts.tickDecimals : precision);\r\n            axis.tickSize = getAxisTickSize(axis.min, axis.max, axis.direction, opts, opts.tickDecimals);\r\n\r\n            // Flot supports base-10 axes; any other mode else is handled by a plug-in,\r\n            // like flot.time.js.\r\n\r\n            if (!axis.tickGenerator) {\r\n                axis.tickGenerator = defaultTickGenerator;\r\n            }\r\n\r\n            if (opts.alignTicksWithAxis != null) {\r\n                var otherAxis = (axis.direction === \"x\" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];\r\n                if (otherAxis && otherAxis.used && otherAxis !== axis) {\r\n                    // consider snapping min/max to outermost nice ticks\r\n                    var niceTicks = axis.tickGenerator(axis);\r\n                    if (niceTicks.length > 0) {\r\n                        if (opts.min == null) {\r\n                            axis.min = Math.min(axis.min, niceTicks[0]);\r\n                        }\r\n\r\n                        if (opts.max == null && niceTicks.length > 1) {\r\n                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);\r\n                        }\r\n                    }\r\n\r\n                    axis.tickGenerator = function(axis) {\r\n                        // copy ticks, scaled to this axis\r\n                        var ticks = [],\r\n                            v, i;\r\n                        for (i = 0; i < otherAxis.ticks.length; ++i) {\r\n                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);\r\n                            v = axis.min + v * (axis.max - axis.min);\r\n                            ticks.push(v);\r\n                        }\r\n                        return ticks;\r\n                    };\r\n\r\n                    // we might need an extra decimal since forced\r\n                    // ticks don't necessarily fit naturally\r\n                    if (!axis.mode && opts.tickDecimals == null) {\r\n                        var extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),\r\n                            ts = axis.tickGenerator(axis);\r\n\r\n                        // only proceed if the tick interval rounded\r\n                        // with an extra decimal doesn't give us a\r\n                        // zero at end\r\n                        if (!(ts.length > 1 && /\\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec)))) {\r\n                            axis.tickDecimals = extraDec;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function setMajorTicks(axis) {\r\n            var oticks = axis.options.ticks,\r\n                ticks = [];\r\n            if (oticks == null || (typeof oticks === \"number\" && oticks > 0)) {\r\n                ticks = axis.tickGenerator(axis);\r\n            } else if (oticks) {\r\n                if ($.isFunction(oticks)) {\r\n                // generate the ticks\r\n                    ticks = oticks(axis);\r\n                } else {\r\n                    ticks = oticks;\r\n                }\r\n            }\r\n\r\n            // clean up/labelify the supplied ticks, copy them over\r\n            var i, v;\r\n            axis.ticks = [];\r\n            for (i = 0; i < ticks.length; ++i) {\r\n                var label = null;\r\n                var t = ticks[i];\r\n                if (typeof t === \"object\") {\r\n                    v = +t[0];\r\n                    if (t.length > 1) {\r\n                        label = t[1];\r\n                    }\r\n                } else {\r\n                    v = +t;\r\n                }\r\n\r\n                if (!isNaN(v)) {\r\n                    axis.ticks.push(\r\n                        newTick(v, label, axis, 'major'));\r\n                }\r\n            }\r\n        }\r\n\r\n        function newTick(v, label, axis, type) {\r\n            if (!label) {\r\n                switch (type) {\r\n                    case 'min':\r\n                    case 'max':\r\n                        //improving the precision of endpoints\r\n                        var precision = getEndpointPrecision(v, axis);\r\n                        label = isFinite(precision) ? axis.tickFormatter(v, axis, precision, plot) : axis.tickFormatter(v, axis, precision, plot);\r\n                        break;\r\n                    case 'major':\r\n                        label = axis.tickFormatter(v, axis, undefined, plot);\r\n                }\r\n            }\r\n            return {\r\n                v: v,\r\n                label: label\r\n            };\r\n        }\r\n\r\n        function snapRangeToTicks(axis, ticks) {\r\n            if (axis.options.autoScale === \"loose\" && ticks.length > 0) {\r\n                // snap to ticks\r\n                axis.min = Math.min(axis.min, ticks[0].v);\r\n                axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);\r\n            }\r\n        }\r\n\r\n        function getEndpointPrecision(value, axis) {\r\n            var canvas1 = Math.floor(axis.p2c(value)),\r\n                canvas2 = axis.direction === \"x\" ? canvas1 + 1 : canvas1 - 1,\r\n                point1 = axis.c2p(canvas1),\r\n                point2 = axis.c2p(canvas2),\r\n                precision = computeValuePrecision(point1, point2, axis.direction, 1);\r\n\r\n            return precision;\r\n        }\r\n\r\n        function setEndpointTicks(axis, series) {\r\n            if (isValidEndpointTick(axis, series)) {\r\n                axis.ticks.unshift(newTick(axis.min, null, axis, 'min'));\r\n                axis.ticks.push(newTick(axis.max, null, axis, 'max'));\r\n            }\r\n        }\r\n\r\n        function isValidEndpointTick(axis, series) {\r\n            if (axis.options.showTickLabels === 'endpoints') {\r\n                return true;\r\n            }\r\n            if (axis.options.showTickLabels === 'all') {\r\n                var associatedSeries = series.filter(function(s) {\r\n                        return s.xaxis === axis;\r\n                    }),\r\n                    notAllBarSeries = associatedSeries.some(function(s) {\r\n                        return !s.bars.show;\r\n                    });\r\n                return associatedSeries.length === 0 || notAllBarSeries;\r\n            }\r\n            if (axis.options.showTickLabels === 'major' || axis.options.showTickLabels === 'none') {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        function draw() {\r\n            surface.clear();\r\n            executeHooks(hooks.drawBackground, [ctx]);\r\n\r\n            var grid = options.grid;\r\n\r\n            // draw background, if any\r\n            if (grid.show && grid.backgroundColor) {\r\n                drawBackground();\r\n            }\r\n\r\n            if (grid.show && !grid.aboveData) {\r\n                drawGrid();\r\n            }\r\n\r\n            for (var i = 0; i < series.length; ++i) {\r\n                executeHooks(hooks.drawSeries, [ctx, series[i], i, getColorOrGradient]);\r\n                drawSeries(series[i]);\r\n            }\r\n\r\n            executeHooks(hooks.draw, [ctx]);\r\n\r\n            if (grid.show && grid.aboveData) {\r\n                drawGrid();\r\n            }\r\n\r\n            surface.render();\r\n\r\n            // A draw implies that either the axes or data have changed, so we\r\n            // should probably update the overlay highlights as well.\r\n            triggerRedrawOverlay();\r\n        }\r\n\r\n        function extractRange(ranges, coord) {\r\n            var axis, from, to, key, axes = allAxes();\r\n\r\n            for (var i = 0; i < axes.length; ++i) {\r\n                axis = axes[i];\r\n                if (axis.direction === coord) {\r\n                    key = coord + axis.n + \"axis\";\r\n                    if (!ranges[key] && axis.n === 1) {\r\n                        // support x1axis as xaxis\r\n                        key = coord + \"axis\";\r\n                    }\r\n\r\n                    if (ranges[key]) {\r\n                        from = ranges[key].from;\r\n                        to = ranges[key].to;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // backwards-compat stuff - to be removed in future\r\n            if (!ranges[key]) {\r\n                axis = coord === \"x\" ? xaxes[0] : yaxes[0];\r\n                from = ranges[coord + \"1\"];\r\n                to = ranges[coord + \"2\"];\r\n            }\r\n\r\n            // auto-reverse as an added bonus\r\n            if (from != null && to != null && from > to) {\r\n                var tmp = from;\r\n                from = to;\r\n                to = tmp;\r\n            }\r\n\r\n            return {\r\n                from: from,\r\n                to: to,\r\n                axis: axis\r\n            };\r\n        }\r\n\r\n        function drawBackground() {\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, \"rgba(255, 255, 255, 0)\");\r\n            ctx.fillRect(0, 0, plotWidth, plotHeight);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawMarkings() {\r\n            // draw markings\r\n            var markings = options.grid.markings,\r\n                axes;\r\n\r\n            if (markings) {\r\n                if ($.isFunction(markings)) {\r\n                    axes = plot.getAxes();\r\n                    // xmin etc. is backwards compatibility, to be\r\n                    // removed in the future\r\n                    axes.xmin = axes.xaxis.min;\r\n                    axes.xmax = axes.xaxis.max;\r\n                    axes.ymin = axes.yaxis.min;\r\n                    axes.ymax = axes.yaxis.max;\r\n\r\n                    markings = markings(axes);\r\n                }\r\n\r\n                var i;\r\n                for (i = 0; i < markings.length; ++i) {\r\n                    var m = markings[i],\r\n                        xrange = extractRange(m, \"x\"),\r\n                        yrange = extractRange(m, \"y\");\r\n\r\n                    // fill in missing\r\n                    if (xrange.from == null) {\r\n                        xrange.from = xrange.axis.min;\r\n                    }\r\n\r\n                    if (xrange.to == null) {\r\n                        xrange.to = xrange.axis.max;\r\n                    }\r\n\r\n                    if (yrange.from == null) {\r\n                        yrange.from = yrange.axis.min;\r\n                    }\r\n\r\n                    if (yrange.to == null) {\r\n                        yrange.to = yrange.axis.max;\r\n                    }\r\n\r\n                    // clip\r\n                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||\r\n                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max) {\r\n                        continue;\r\n                    }\r\n\r\n                    xrange.from = Math.max(xrange.from, xrange.axis.min);\r\n                    xrange.to = Math.min(xrange.to, xrange.axis.max);\r\n                    yrange.from = Math.max(yrange.from, yrange.axis.min);\r\n                    yrange.to = Math.min(yrange.to, yrange.axis.max);\r\n\r\n                    var xequal = xrange.from === xrange.to,\r\n                        yequal = yrange.from === yrange.to;\r\n\r\n                    if (xequal && yequal) {\r\n                        continue;\r\n                    }\r\n\r\n                    // then draw\r\n                    xrange.from = Math.floor(xrange.axis.p2c(xrange.from));\r\n                    xrange.to = Math.floor(xrange.axis.p2c(xrange.to));\r\n                    yrange.from = Math.floor(yrange.axis.p2c(yrange.from));\r\n                    yrange.to = Math.floor(yrange.axis.p2c(yrange.to));\r\n\r\n                    if (xequal || yequal) {\r\n                        var lineWidth = m.lineWidth || options.grid.markingsLineWidth,\r\n                            subPixel = lineWidth % 2 ? 0.5 : 0;\r\n                        ctx.beginPath();\r\n                        ctx.strokeStyle = m.color || options.grid.markingsColor;\r\n                        ctx.lineWidth = lineWidth;\r\n                        if (xequal) {\r\n                            ctx.moveTo(xrange.to + subPixel, yrange.from);\r\n                            ctx.lineTo(xrange.to + subPixel, yrange.to);\r\n                        } else {\r\n                            ctx.moveTo(xrange.from, yrange.to + subPixel);\r\n                            ctx.lineTo(xrange.to, yrange.to + subPixel);\r\n                        }\r\n                        ctx.stroke();\r\n                    } else {\r\n                        ctx.fillStyle = m.color || options.grid.markingsColor;\r\n                        ctx.fillRect(xrange.from, yrange.to,\r\n                            xrange.to - xrange.from,\r\n                            yrange.from - yrange.to);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function findEdges(axis) {\r\n            var box = axis.box,\r\n                x = 0,\r\n                y = 0;\r\n\r\n            // find the edges\r\n            if (axis.direction === \"x\") {\r\n                x = 0;\r\n                y = box.top - plotOffset.top + (axis.position === \"top\" ? box.height : 0);\r\n            } else {\r\n                y = 0;\r\n                x = box.left - plotOffset.left + (axis.position === \"left\" ? box.width : 0) + axis.boxPosition.centerX;\r\n            }\r\n\r\n            return {\r\n                x: x,\r\n                y: y\r\n            };\r\n        };\r\n\r\n        function alignPosition(lineWidth, pos) {\r\n            return ((lineWidth % 2) !== 0) ? Math.floor(pos) + 0.5 : pos;\r\n        };\r\n\r\n        function drawTickBar(axis) {\r\n            ctx.lineWidth = 1;\r\n            var edges = findEdges(axis),\r\n                x = edges.x,\r\n                y = edges.y;\r\n\r\n            // draw tick bar\r\n            if (axis.show) {\r\n                var xoff = 0,\r\n                    yoff = 0;\r\n\r\n                ctx.strokeStyle = axis.options.color;\r\n                ctx.beginPath();\r\n                if (axis.direction === \"x\") {\r\n                    xoff = plotWidth + 1;\r\n                } else {\r\n                    yoff = plotHeight + 1;\r\n                }\r\n\r\n                if (axis.direction === \"x\") {\r\n                    y = alignPosition(ctx.lineWidth, y);\r\n                } else {\r\n                    x = alignPosition(ctx.lineWidth, x);\r\n                }\r\n\r\n                ctx.moveTo(x, y);\r\n                ctx.lineTo(x + xoff, y + yoff);\r\n                ctx.stroke();\r\n            }\r\n        };\r\n\r\n        function drawTickMarks(axis) {\r\n            var t = axis.tickLength,\r\n                minorTicks = axis.showMinorTicks,\r\n                minorTicksNr = MINOR_TICKS_COUNT_CONSTANT,\r\n                edges = findEdges(axis),\r\n                x = edges.x,\r\n                y = edges.y,\r\n                i = 0;\r\n\r\n            // draw major tick marks\r\n            ctx.strokeStyle = axis.options.color;\r\n            ctx.beginPath();\r\n\r\n            for (i = 0; i < axis.ticks.length; ++i) {\r\n                var v = axis.ticks[i].v,\r\n                    xoff = 0,\r\n                    yoff = 0,\r\n                    xminor = 0,\r\n                    yminor = 0,\r\n                    j;\r\n\r\n                if (!isNaN(v) && v >= axis.min && v <= axis.max) {\r\n                    if (axis.direction === \"x\") {\r\n                        x = axis.p2c(v);\r\n                        yoff = t;\r\n\r\n                        if (axis.position === \"top\") {\r\n                            yoff = -yoff;\r\n                        }\r\n                    } else {\r\n                        y = axis.p2c(v);\r\n                        xoff = t;\r\n\r\n                        if (axis.position === \"left\") {\r\n                            xoff = -xoff;\r\n                        }\r\n                    }\r\n\r\n                    if (axis.direction === \"x\") {\r\n                        x = alignPosition(ctx.lineWidth, x);\r\n                    } else {\r\n                        y = alignPosition(ctx.lineWidth, y);\r\n                    }\r\n\r\n                    ctx.moveTo(x, y);\r\n                    ctx.lineTo(x + xoff, y + yoff);\r\n                }\r\n\r\n                //draw minor tick marks\r\n                if (minorTicks === true && i < axis.ticks.length - 1) {\r\n                    var v1 = axis.ticks[i].v,\r\n                        v2 = axis.ticks[i + 1].v,\r\n                        step = (v2 - v1) / (minorTicksNr + 1);\r\n\r\n                    for (j = 1; j <= minorTicksNr; j++) {\r\n                        // compute minor tick position\r\n                        if (axis.direction === \"x\") {\r\n                            yminor = t / 2; // minor ticks are half length\r\n                            x = alignPosition(ctx.lineWidth, axis.p2c(v1 + j * step))\r\n\r\n                            if (axis.position === \"top\") {\r\n                                yminor = -yminor;\r\n                            }\r\n\r\n                            // don't go over the plot borders\r\n                            if ((x < 0) || (x > plotWidth)) {\r\n                                continue;\r\n                            }\r\n                        } else {\r\n                            xminor = t / 2; // minor ticks are half length\r\n                            y = alignPosition(ctx.lineWidth, axis.p2c(v1 + j * step));\r\n\r\n                            if (axis.position === \"left\") {\r\n                                xminor = -xminor;\r\n                            }\r\n\r\n                            // don't go over the plot borders\r\n                            if ((y < 0) || (y > plotHeight)) {\r\n                                continue;\r\n                            }\r\n                        }\r\n\r\n                        ctx.moveTo(x, y);\r\n                        ctx.lineTo(x + xminor, y + yminor);\r\n                    }\r\n                }\r\n            }\r\n\r\n            ctx.stroke();\r\n        };\r\n\r\n        function drawGridLines(axis) {\r\n            // check if the line will be overlapped with a border\r\n            var overlappedWithBorder = function (value) {\r\n                var bw = options.grid.borderWidth;\r\n                return (((typeof bw === \"object\" && bw[axis.position] > 0) || bw > 0) && (value === axis.min || value === axis.max));\r\n            };\r\n\r\n            ctx.strokeStyle = options.grid.tickColor;\r\n            ctx.beginPath();\r\n            var i;\r\n            for (i = 0; i < axis.ticks.length; ++i) {\r\n                var v = axis.ticks[i].v,\r\n                    xoff = 0,\r\n                    yoff = 0,\r\n                    x = 0,\r\n                    y = 0;\r\n\r\n                if (isNaN(v) || v < axis.min || v > axis.max) continue;\r\n\r\n                // skip those lying on the axes if we got a border\r\n                if (overlappedWithBorder(v)) continue;\r\n\r\n                if (axis.direction === \"x\") {\r\n                    x = axis.p2c(v);\r\n                    y = plotHeight;\r\n                    yoff = -plotHeight;\r\n                } else {\r\n                    x = 0;\r\n                    y = axis.p2c(v);\r\n                    xoff = plotWidth;\r\n                }\r\n\r\n                if (axis.direction === \"x\") {\r\n                    x = alignPosition(ctx.lineWidth, x);\r\n                } else {\r\n                    y = alignPosition(ctx.lineWidth, y);\r\n                }\r\n\r\n                ctx.moveTo(x, y);\r\n                ctx.lineTo(x + xoff, y + yoff);\r\n            }\r\n\r\n            ctx.stroke();\r\n        };\r\n\r\n        function drawBorder() {\r\n            // If either borderWidth or borderColor is an object, then draw the border\r\n            // line by line instead of as one rectangle\r\n            var bw = options.grid.borderWidth,\r\n                bc = options.grid.borderColor;\r\n\r\n            if (typeof bw === \"object\" || typeof bc === \"object\") {\r\n                if (typeof bw !== \"object\") {\r\n                    bw = {\r\n                        top: bw,\r\n                        right: bw,\r\n                        bottom: bw,\r\n                        left: bw\r\n                    };\r\n                }\r\n                if (typeof bc !== \"object\") {\r\n                    bc = {\r\n                        top: bc,\r\n                        right: bc,\r\n                        bottom: bc,\r\n                        left: bc\r\n                    };\r\n                }\r\n\r\n                if (bw.top > 0) {\r\n                    ctx.strokeStyle = bc.top;\r\n                    ctx.lineWidth = bw.top;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(0 - bw.left, 0 - bw.top / 2);\r\n                    ctx.lineTo(plotWidth, 0 - bw.top / 2);\r\n                    ctx.stroke();\r\n                }\r\n\r\n                if (bw.right > 0) {\r\n                    ctx.strokeStyle = bc.right;\r\n                    ctx.lineWidth = bw.right;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);\r\n                    ctx.lineTo(plotWidth + bw.right / 2, plotHeight);\r\n                    ctx.stroke();\r\n                }\r\n\r\n                if (bw.bottom > 0) {\r\n                    ctx.strokeStyle = bc.bottom;\r\n                    ctx.lineWidth = bw.bottom;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);\r\n                    ctx.lineTo(0, plotHeight + bw.bottom / 2);\r\n                    ctx.stroke();\r\n                }\r\n\r\n                if (bw.left > 0) {\r\n                    ctx.strokeStyle = bc.left;\r\n                    ctx.lineWidth = bw.left;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(0 - bw.left / 2, plotHeight + bw.bottom);\r\n                    ctx.lineTo(0 - bw.left / 2, 0);\r\n                    ctx.stroke();\r\n                }\r\n            } else {\r\n                ctx.lineWidth = bw;\r\n                ctx.strokeStyle = options.grid.borderColor;\r\n                ctx.strokeRect(-bw / 2, -bw / 2, plotWidth + bw, plotHeight + bw);\r\n            }\r\n        };\r\n\r\n        function drawGrid() {\r\n            var axes, bw;\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            drawMarkings();\r\n\r\n            axes = allAxes();\r\n            bw = options.grid.borderWidth;\r\n\r\n            for (var j = 0; j < axes.length; ++j) {\r\n                var axis = axes[j];\r\n\r\n                if (!axis.show) {\r\n                    continue;\r\n                }\r\n\r\n                drawTickBar(axis);\r\n                if (axis.showTicks === true) {\r\n                    drawTickMarks(axis);\r\n                }\r\n\r\n                if (axis.gridLines === true) {\r\n                    drawGridLines(axis, bw);\r\n                }\r\n            }\r\n\r\n            // draw border\r\n            if (bw) {\r\n                drawBorder();\r\n            }\r\n\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawAxisLabels() {\r\n            $.each(allAxes(), function(_, axis) {\r\n                var box = axis.box,\r\n                    legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\r\n                    layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\r\n                    font = axis.options.font || \"flot-tick-label tickLabel\",\r\n                    i, x, y, halign, valign, info,\r\n                    margin = 3,\r\n                    nullBox = {x: NaN, y: NaN, width: NaN, height: NaN}, newLabelBox, labelBoxes = [],\r\n                    overlapping = function(x11, y11, x12, y12, x21, y21, x22, y22) {\r\n                        return ((x11 <= x21 && x21 <= x12) || (x21 <= x11 && x11 <= x22)) &&\r\n                               ((y11 <= y21 && y21 <= y12) || (y21 <= y11 && y11 <= y22));\r\n                    },\r\n                    overlapsOtherLabels = function(newLabelBox, previousLabelBoxes) {\r\n                        return previousLabelBoxes.some(function(labelBox) {\r\n                            return overlapping(\r\n                                newLabelBox.x, newLabelBox.y, newLabelBox.x + newLabelBox.width, newLabelBox.y + newLabelBox.height,\r\n                                labelBox.x, labelBox.y, labelBox.x + labelBox.width, labelBox.y + labelBox.height);\r\n                        });\r\n                    },\r\n                    drawAxisLabel = function (tick, labelBoxes) {\r\n                        if (!tick || !tick.label || tick.v < axis.min || tick.v > axis.max) {\r\n                            return nullBox;\r\n                        }\r\n\r\n                        info = surface.getTextInfo(layer, tick.label, font);\r\n\r\n                        if (axis.direction === \"x\") {\r\n                            halign = \"center\";\r\n                            x = plotOffset.left + axis.p2c(tick.v);\r\n                            if (axis.position === \"bottom\") {\r\n                                y = box.top + box.padding - axis.boxPosition.centerY;\r\n                            } else {\r\n                                y = box.top + box.height - box.padding + axis.boxPosition.centerY;\r\n                                valign = \"bottom\";\r\n                            }\r\n                            newLabelBox = {x: x - info.width / 2 - margin, y: y - margin, width: info.width + 2 * margin, height: info.height + 2 * margin};\r\n                        } else {\r\n                            valign = \"middle\";\r\n                            y = plotOffset.top + axis.p2c(tick.v);\r\n                            if (axis.position === \"left\") {\r\n                                x = box.left + box.width - box.padding - axis.boxPosition.centerX;\r\n                                halign = \"right\";\r\n                            } else {\r\n                                x = box.left + box.padding + axis.boxPosition.centerX;\r\n                            }\r\n                            newLabelBox = {x: x - info.width / 2 - margin, y: y - margin, width: info.width + 2 * margin, height: info.height + 2 * margin};\r\n                        }\r\n\r\n                        if (overlapsOtherLabels(newLabelBox, labelBoxes)) {\r\n                            return nullBox;\r\n                        }\r\n\r\n                        surface.addText(layer, x, y, tick.label, font, null, null, halign, valign);\r\n\r\n                        return newLabelBox;\r\n                    };\r\n\r\n                // Remove text before checking for axis.show and ticks.length;\r\n                // otherwise plugins, like flot-tickrotor, that draw their own\r\n                // tick labels will end up with both theirs and the defaults.\r\n\r\n                surface.removeText(layer);\r\n\r\n                executeHooks(hooks.drawAxis, [axis, surface]);\r\n\r\n                if (!axis.show) {\r\n                    return;\r\n                }\r\n\r\n                switch (axis.options.showTickLabels) {\r\n                    case 'none':\r\n                        break;\r\n                    case 'endpoints':\r\n                        labelBoxes.push(drawAxisLabel(axis.ticks[0], labelBoxes));\r\n                        labelBoxes.push(drawAxisLabel(axis.ticks[axis.ticks.length - 1], labelBoxes));\r\n                        break;\r\n                    case 'major':\r\n                        labelBoxes.push(drawAxisLabel(axis.ticks[0], labelBoxes));\r\n                        labelBoxes.push(drawAxisLabel(axis.ticks[axis.ticks.length - 1], labelBoxes));\r\n                        for (i = 1; i < axis.ticks.length - 1; ++i) {\r\n                            labelBoxes.push(drawAxisLabel(axis.ticks[i], labelBoxes));\r\n                        }\r\n                        break;\r\n                    case 'all':\r\n                        labelBoxes.push(drawAxisLabel(axis.ticks[0], []));\r\n                        labelBoxes.push(drawAxisLabel(axis.ticks[axis.ticks.length - 1], labelBoxes));\r\n                        for (i = 1; i < axis.ticks.length - 1; ++i) {\r\n                            labelBoxes.push(drawAxisLabel(axis.ticks[i], labelBoxes));\r\n                        }\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n\r\n        function drawSeries(series) {\r\n            if (series.lines.show) {\r\n                $.plot.drawSeries.drawSeriesLines(series, ctx, plotOffset, plotWidth, plotHeight, plot.drawSymbol, getColorOrGradient);\r\n            }\r\n\r\n            if (series.bars.show) {\r\n                $.plot.drawSeries.drawSeriesBars(series, ctx, plotOffset, plotWidth, plotHeight, plot.drawSymbol, getColorOrGradient);\r\n            }\r\n\r\n            if (series.points.show) {\r\n                $.plot.drawSeries.drawSeriesPoints(series, ctx, plotOffset, plotWidth, plotHeight, plot.drawSymbol, getColorOrGradient);\r\n            }\r\n        }\r\n\r\n        function computeRangeForDataSeries(series, force, isValid) {\r\n            var points = series.datapoints.points,\r\n                ps = series.datapoints.pointsize,\r\n                format = series.datapoints.format,\r\n                topSentry = Number.POSITIVE_INFINITY,\r\n                bottomSentry = Number.NEGATIVE_INFINITY,\r\n                range = {\r\n                    xmin: topSentry,\r\n                    ymin: topSentry,\r\n                    xmax: bottomSentry,\r\n                    ymax: bottomSentry\r\n                };\r\n\r\n            for (var j = 0; j < points.length; j += ps) {\r\n                if (points[j] === null) {\r\n                    continue;\r\n                }\r\n\r\n                if (typeof (isValid) === 'function' && !isValid(points[j])) {\r\n                    continue;\r\n                }\r\n\r\n                for (var m = 0; m < ps; ++m) {\r\n                    var val = points[j + m],\r\n                        f = format[m];\r\n                    if (f === null || f === undefined) {\r\n                        continue;\r\n                    }\r\n\r\n                    if (typeof (isValid) === 'function' && !isValid(val)) {\r\n                        continue;\r\n                    }\r\n\r\n                    if ((!force && !f.computeRange) || val === Infinity || val === -Infinity) {\r\n                        continue;\r\n                    }\r\n\r\n                    if (f.x === true) {\r\n                        if (val < range.xmin) {\r\n                            range.xmin = val;\r\n                        }\r\n\r\n                        if (val > range.xmax) {\r\n                            range.xmax = val;\r\n                        }\r\n                    }\r\n\r\n                    if (f.y === true) {\r\n                        if (val < range.ymin) {\r\n                            range.ymin = val;\r\n                        }\r\n\r\n                        if (val > range.ymax) {\r\n                            range.ymax = val;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return range;\r\n        };\r\n\r\n        function adjustSeriesDataRange(series, range) {\r\n            if (series.bars.show) {\r\n                // make sure we got room for the bar on the dancing floor\r\n                var delta;\r\n\r\n                //update bar width if needed\r\n                if (series.datapoints && series.datapoints.points) {\r\n                    computeBarWidth(series);\r\n                }\r\n\r\n                switch (series.bars.align) {\r\n                    case \"left\":\r\n                        delta = 0;\r\n                        break;\r\n                    case \"right\":\r\n                        delta = -series.bars.barWidth;\r\n                        break;\r\n                    default:\r\n                        delta = -series.bars.barWidth / 2;\r\n                }\r\n\r\n                range.xmin += delta;\r\n                range.xmax += delta + series.bars.barWidth;\r\n            }\r\n\r\n            if ((series.bars.show && series.bars.zero) || (series.lines.show && series.lines.zero)) {\r\n                var ps = series.datapoints.pointsize;\r\n\r\n                // make sure the 0 point is included in the computed y range when requested\r\n                if (ps <= 2) {\r\n                    /*if ps > 0 the points were already taken into account for autoScale */\r\n                    range.ymin = Math.min(0, range.ymin);\r\n                    range.ymax = Math.max(0, range.ymax);\r\n                }\r\n            }\r\n\r\n            return range;\r\n        };\r\n\r\n        function computeBarWidth(series) {\r\n            var pointsize = series.datapoints.pointsize, minDistance = Number.MAX_VALUE,\r\n                distance = series.datapoints.points[pointsize] - series.datapoints.points[0] || 1;\r\n\r\n            if (isFinite(distance)) {\r\n                minDistance = distance;\r\n            }\r\n            for (var j = pointsize; j < series.datapoints.points.length - pointsize; j += pointsize) {\r\n                distance = Math.abs(series.datapoints.points[pointsize + j] - series.datapoints.points[j]);\r\n                if (distance < minDistance && isFinite(distance)) {\r\n                    minDistance = distance;\r\n                }\r\n            }\r\n            series.bars.barWidth = 0.8 * minDistance;\r\n        }\r\n\r\n        // returns the data item the mouse is over/ the cursor is closest to, or null if none is found\r\n        function findNearbyItem(mouseX, mouseY, seriesFilter, radius, computeDistance) {\r\n            var maxDistance = radius,\r\n                smallestDistance = maxDistance * maxDistance + 1,\r\n                item = null,\r\n                dx, dy, dist,\r\n                i, j, ps;\r\n\r\n            for (i = series.length - 1; i >= 0; --i) {\r\n                if (!seriesFilter(i)) continue;\r\n\r\n                var s = series[i],\r\n                    x, y,\r\n                    axisx = s.xaxis,\r\n                    axisy = s.yaxis,\r\n                    points = s.datapoints.points,\r\n                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster\r\n                    my = axisy.c2p(mouseY),\r\n                    maxx = maxDistance / axisx.scale,\r\n                    maxy = maxDistance / axisy.scale;\r\n\r\n                ps = s.datapoints.pointsize;\r\n                // with inverse transforms, we can't use the maxx/maxy\r\n                // optimization, sadly\r\n                if (axisx.options.inverseTransform) {\r\n                    maxx = Number.MAX_VALUE;\r\n                }\r\n\r\n                if (axisy.options.inverseTransform) {\r\n                    maxy = Number.MAX_VALUE;\r\n                }\r\n\r\n                for (j = 0; j < points.length; j += ps) {\r\n                    x = points[j];\r\n                    y = points[j + 1];\r\n                    if (x == null) {\r\n                        continue;\r\n                    }\r\n\r\n                    if (x - mx > maxx || x - mx < -maxx ||\r\n                        y - my > maxy || y - my < -maxy) {\r\n                        continue;\r\n                    }\r\n\r\n                    // We have to calculate distances in pixels, not in\r\n                    // data units, because the scales of the axes may be different\r\n                    dx = Math.abs(axisx.p2c(x) - mouseX);\r\n                    dy = Math.abs(axisy.p2c(y) - mouseY);\r\n                    dist = computeDistance ? computeDistance(dx, dy) : dx * dx + dy * dy;\r\n\r\n                    // use <= to ensure last point takes precedence\r\n                    // (last generally means on top of)\r\n                    if (dist < smallestDistance) {\r\n                        smallestDistance = dist;\r\n                        item = [i, j / ps];\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (item) {\r\n                i = item[0];\r\n                j = item[1];\r\n                ps = series[i].datapoints.pointsize;\r\n\r\n                return {\r\n                    datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),\r\n                    dataIndex: j,\r\n                    series: series[i],\r\n                    seriesIndex: i\r\n                };\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        function findNearbyInterpolationPoint(posX, posY, seriesFilter) {\r\n            var i, j, dist, dx, dy, ps,\r\n                item,\r\n                smallestDistance = Number.MAX_VALUE;\r\n\r\n            for (i = 0; i < series.length; ++i) {\r\n                if (!seriesFilter(i)) {\r\n                    continue;\r\n                }\r\n                var points = series[i].datapoints.points;\r\n                ps = series[i].datapoints.pointsize;\r\n\r\n                // if the data is coming from positive -> negative, reverse the comparison\r\n                const comparer = points[points.length - ps] < points[0]\r\n                    ? function (x1, x2) { return x1 > x2 }\r\n                    : function (x1, x2) { return x2 > x1 };\r\n\r\n                // do not interpolate outside the bounds of the data.\r\n                if (comparer(posX, points[0])) {\r\n                    continue;\r\n                }\r\n\r\n                // Find the nearest points, x-wise\r\n                for (j = ps; j < points.length; j += ps) {\r\n                    if (comparer(posX, points[j])) {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Now Interpolate\r\n                var y,\r\n                    p1x = points[j - ps],\r\n                    p1y = points[j - ps + 1],\r\n                    p2x = points[j],\r\n                    p2y = points[j + 1];\r\n\r\n                if ((p1x === undefined) || (p2x === undefined) ||\r\n                    (p1y === undefined) || (p2y === undefined)) {\r\n                    continue;\r\n                }\r\n\r\n                if (p1x === p2x) {\r\n                    y = p2y\r\n                } else {\r\n                    y = p1y + (p2y - p1y) * (posX - p1x) / (p2x - p1x);\r\n                }\r\n\r\n                posY = y;\r\n\r\n                dx = Math.abs(series[i].xaxis.p2c(p2x) - posX);\r\n                dy = Math.abs(series[i].yaxis.p2c(p2y) - posY);\r\n                dist = dx * dx + dy * dy;\r\n\r\n                if (dist < smallestDistance) {\r\n                    smallestDistance = dist;\r\n                    item = [posX, posY, i, j];\r\n                }\r\n            }\r\n\r\n            if (item) {\r\n                i = item[2];\r\n                j = item[3];\r\n                ps = series[i].datapoints.pointsize;\r\n                points = series[i].datapoints.points;\r\n                p1x = points[j - ps];\r\n                p1y = points[j - ps + 1];\r\n                p2x = points[j];\r\n                p2y = points[j + 1];\r\n\r\n                return {\r\n                    datapoint: [item[0], item[1]],\r\n                    leftPoint: [p1x, p1y],\r\n                    rightPoint: [p2x, p2y],\r\n                    seriesIndex: i\r\n                };\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        function triggerRedrawOverlay() {\r\n            var t = options.interaction.redrawOverlayInterval;\r\n            if (t === -1) { // skip event queue\r\n                drawOverlay();\r\n                return;\r\n            }\r\n\r\n            if (!redrawTimeout) {\r\n                redrawTimeout = setTimeout(function() {\r\n                    drawOverlay(plot);\r\n                }, t);\r\n            }\r\n        }\r\n\r\n        function drawOverlay(plot) {\r\n            redrawTimeout = null;\r\n\r\n            if (!octx) {\r\n                return;\r\n            }\r\n            overlay.clear();\r\n            executeHooks(hooks.drawOverlay, [octx, overlay]);\r\n            var event = new CustomEvent('onDrawingDone');\r\n            plot.getEventHolder().dispatchEvent(event);\r\n        }\r\n\r\n        function getColorOrGradient(spec, bottom, top, defaultColor) {\r\n            if (typeof spec === \"string\") {\r\n                return spec;\r\n            } else {\r\n                // assume this is a gradient spec; IE currently only\r\n                // supports a simple vertical gradient properly, so that's\r\n                // what we support too\r\n                var gradient = ctx.createLinearGradient(0, top, 0, bottom);\r\n\r\n                for (var i = 0, l = spec.colors.length; i < l; ++i) {\r\n                    var c = spec.colors[i];\r\n                    if (typeof c !== \"string\") {\r\n                        var co = $.color.parse(defaultColor);\r\n                        if (c.brightness != null) {\r\n                            co = co.scale('rgb', c.brightness);\r\n                        }\r\n\r\n                        if (c.opacity != null) {\r\n                            co.a *= c.opacity;\r\n                        }\r\n\r\n                        c = co.toString();\r\n                    }\r\n                    gradient.addColorStop(i / (l - 1), c);\r\n                }\r\n\r\n                return gradient;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Add the plot function to the top level of the jQuery object\r\n\r\n    $.plot = function(placeholder, data, options) {\r\n        var plot = new Plot($(placeholder), data, options, $.plot.plugins);\r\n        return plot;\r\n    };\r\n\r\n    $.plot.version = \"1.0.3\";\r\n\r\n    $.plot.plugins = [];\r\n\r\n    // Also add the plot function as a chainable property\r\n    $.fn.plot = function(data, options) {\r\n        return this.each(function() {\r\n            $.plot(this, data, options);\r\n        });\r\n    };\r\n\r\n    $.plot.linearTickGenerator = defaultTickGenerator;\r\n    $.plot.defaultTickFormatter = defaultTickFormatter;\r\n    $.plot.expRepTickFormatter = expRepTickFormatter;\r\n})(jQuery);\r\n","(function ($) {\r\n    'use strict';\r\n    var saturated = {\r\n        saturate: function (a) {\r\n            if (a === Infinity) {\r\n                return Number.MAX_VALUE;\r\n            }\r\n\r\n            if (a === -Infinity) {\r\n                return -Number.MAX_VALUE;\r\n            }\r\n\r\n            return a;\r\n        },\r\n        delta: function(min, max, noTicks) {\r\n            return ((max - min) / noTicks) === Infinity ? (max / noTicks - min / noTicks) : (max - min) / noTicks\r\n        },\r\n        multiply: function (a, b) {\r\n            return saturated.saturate(a * b);\r\n        },\r\n        // returns c * bInt * a. Beahves properly in the case where c is negative\r\n        // and bInt * a is bigger that Number.MAX_VALUE (Infinity)\r\n        multiplyAdd: function (a, bInt, c) {\r\n            if (isFinite(a * bInt)) {\r\n                return saturated.saturate(a * bInt + c);\r\n            } else {\r\n                var result = c;\r\n\r\n                for (var i = 0; i < bInt; i++) {\r\n                    result += a;\r\n                }\r\n\r\n                return saturated.saturate(result);\r\n            }\r\n        },\r\n        // round to nearby lower multiple of base\r\n        floorInBase: function(n, base) {\r\n            return base * Math.floor(n / base);\r\n        }\r\n    };\r\n\r\n    $.plot.saturated = saturated;\r\n})(jQuery);\r\n","/** ## jquery.flot.browser.js\r\n\r\nThis plugin is used to make available some browser-related utility functions.\r\n\r\n### Methods\r\n*/\r\n\r\n(function ($) {\r\n    'use strict';\r\n\r\n    var browser = {\r\n        /**\r\n        - getPageXY(e)\r\n\r\n         Calculates the pageX and pageY using the screenX, screenY properties of the event\r\n         and the scrolling of the page. This is needed because the pageX and pageY\r\n         properties of the event are not correct while running tests in Edge. */\r\n        getPageXY: function (e) {\r\n            // This code is inspired from https://stackoverflow.com/a/3464890\r\n            var doc = document.documentElement,\r\n                pageX = e.clientX + (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\r\n                pageY = e.clientY + (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\r\n            return { X: pageX, Y: pageY };\r\n        },\r\n\r\n        /**\r\n        - getPixelRatio(context)\r\n\r\n         This function returns the current pixel ratio defined by the product of desktop\r\n         zoom and page zoom.\r\n         Additional info: https://www.html5rocks.com/en/tutorials/canvas/hidpi/\r\n        */\r\n        getPixelRatio: function(context) {\r\n            var devicePixelRatio = window.devicePixelRatio || 1,\r\n                backingStoreRatio =\r\n                context.webkitBackingStorePixelRatio ||\r\n                context.mozBackingStorePixelRatio ||\r\n                context.msBackingStorePixelRatio ||\r\n                context.oBackingStorePixelRatio ||\r\n                context.backingStorePixelRatio || 1;\r\n            return devicePixelRatio / backingStoreRatio;\r\n        },\r\n\r\n        /**\r\n        - isSafari, isMobileSafari, isOpera, isFirefox, isIE, isEdge, isChrome, isBlink\r\n\r\n         This is a collection of functions, used to check if the code is running in a\r\n         particular browser or Javascript engine.\r\n        */\r\n        isSafari: function() {\r\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\r\n            // Safari 3.0+ \"[object HTMLElementConstructor]\"\r\n            return /constructor/i.test(window.top.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!window.top['safari'] || (typeof window.top.safari !== 'undefined' && window.top.safari.pushNotification));\r\n        },\r\n\r\n        isMobileSafari: function() {\r\n            //isMobileSafari adapted from https://stackoverflow.com/questions/3007480/determine-if-user-navigated-from-mobile-safari\r\n            return navigator.userAgent.match(/(iPod|iPhone|iPad)/) && navigator.userAgent.match(/AppleWebKit/);\r\n        },\r\n\r\n        isOpera: function() {\r\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\r\n            //Opera 8.0+\r\n            return (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\r\n        },\r\n\r\n        isFirefox: function() {\r\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\r\n            // Firefox 1.0+\r\n            return typeof InstallTrigger !== 'undefined';\r\n        },\r\n\r\n        isIE: function() {\r\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\r\n            // Internet Explorer 6-11\r\n            return /*@cc_on!@*/false || !!document.documentMode;\r\n        },\r\n\r\n        isEdge: function() {\r\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\r\n            // Edge 20+\r\n            return !browser.isIE() && !!window.StyleMedia;\r\n        },\r\n\r\n        isChrome: function() {\r\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\r\n            // Chrome 1+\r\n            return !!window.chrome && !!window.chrome.webstore;\r\n        },\r\n\r\n        isBlink: function() {\r\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\r\n            return (browser.isChrome() || browser.isOpera()) && !!window.CSS;\r\n        }\r\n    };\r\n\r\n    $.plot.browser = browser;\r\n})(jQuery);\r\n","/**\r\n## jquery.flot.drawSeries.js\r\n\r\nThis plugin is used by flot for drawing lines, plots, bars or area.\r\n\r\n### Public methods\r\n*/\r\n\r\n(function($) {\r\n    \"use strict\";\r\n\r\n    function DrawSeries() {\r\n        function plotLine(datapoints, xoffset, yoffset, axisx, axisy, ctx) {\r\n            var points = datapoints.points,\r\n                ps = datapoints.pointsize,\r\n                prevx = null,\r\n                prevy = null;\r\n            var x1 = 0.0,\r\n                y1 = 0.0,\r\n                x2 = 0.0,\r\n                y2 = 0.0,\r\n                i = 0;\r\n\r\n            ctx.beginPath();\r\n            for (i = ps; i < points.length; i += ps) {\r\n                x1 = points[i - ps];\r\n                y1 = points[i - ps + 1];\r\n                x2 = points[i];\r\n                y2 = points[i + 1];\r\n\r\n                if (x1 === null || x2 === null) {\r\n                    continue;\r\n                }\r\n\r\n                // clip with ymin\r\n                if (y1 <= y2 && y1 < axisy.min) {\r\n                    if (y2 < axisy.min) {\r\n                        // line segment is outside\r\n                        continue;\r\n                    }\r\n                    // compute new intersection point\r\n                    x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                    y1 = axisy.min;\r\n                } else if (y2 <= y1 && y2 < axisy.min) {\r\n                    if (y1 < axisy.min) {\r\n                        continue;\r\n                    }\r\n\r\n                    x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                    y2 = axisy.min;\r\n                }\r\n\r\n                // clip with ymax\r\n                if (y1 >= y2 && y1 > axisy.max) {\r\n                    if (y2 > axisy.max) {\r\n                        continue;\r\n                    }\r\n\r\n                    x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                    y1 = axisy.max;\r\n                } else if (y2 >= y1 && y2 > axisy.max) {\r\n                    if (y1 > axisy.max) {\r\n                        continue;\r\n                    }\r\n\r\n                    x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                    y2 = axisy.max;\r\n                }\r\n\r\n                // clip with xmin\r\n                if (x1 <= x2 && x1 < axisx.min) {\r\n                    if (x2 < axisx.min) {\r\n                        continue;\r\n                    }\r\n\r\n                    y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                    x1 = axisx.min;\r\n                } else if (x2 <= x1 && x2 < axisx.min) {\r\n                    if (x1 < axisx.min) {\r\n                        continue;\r\n                    }\r\n\r\n                    y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                    x2 = axisx.min;\r\n                }\r\n\r\n                // clip with xmax\r\n                if (x1 >= x2 && x1 > axisx.max) {\r\n                    if (x2 > axisx.max) {\r\n                        continue;\r\n                    }\r\n\r\n                    y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                    x1 = axisx.max;\r\n                } else if (x2 >= x1 && x2 > axisx.max) {\r\n                    if (x1 > axisx.max) {\r\n                        continue;\r\n                    }\r\n\r\n                    y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                    x2 = axisx.max;\r\n                }\r\n\r\n                if (x1 !== prevx || y1 !== prevy) {\r\n                    ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\r\n                }\r\n\r\n                prevx = x2;\r\n                prevy = y2;\r\n                ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n\r\n        function plotLineArea(datapoints, axisx, axisy, fillTowards, ctx) {\r\n            var points = datapoints.points,\r\n                ps = datapoints.pointsize,\r\n                bottom = fillTowards > axisy.min ? Math.min(axisy.max, fillTowards) : axisy.min,\r\n                i = 0,\r\n                ypos = 1,\r\n                areaOpen = false,\r\n                segmentStart = 0,\r\n                segmentEnd = 0;\r\n\r\n            // we process each segment in two turns, first forward\r\n            // direction to sketch out top, then once we hit the\r\n            // end we go backwards to sketch the bottom\r\n            while (true) {\r\n                if (ps > 0 && i > points.length + ps) {\r\n                    break;\r\n                }\r\n\r\n                i += ps; // ps is negative if going backwards\r\n\r\n                var x1 = points[i - ps],\r\n                    y1 = points[i - ps + ypos],\r\n                    x2 = points[i],\r\n                    y2 = points[i + ypos];\r\n\r\n                if (ps === -2) {\r\n                    /* going backwards and no value for the bottom provided in the series*/\r\n                    y1 = y2 = bottom;\r\n                }\r\n\r\n                if (areaOpen) {\r\n                    if (ps > 0 && x1 != null && x2 == null) {\r\n                        // at turning point\r\n                        segmentEnd = i;\r\n                        ps = -ps;\r\n                        ypos = 2;\r\n                        continue;\r\n                    }\r\n\r\n                    if (ps < 0 && i === segmentStart + ps) {\r\n                        // done with the reverse sweep\r\n                        ctx.fill();\r\n                        areaOpen = false;\r\n                        ps = -ps;\r\n                        i = segmentStart = segmentEnd + ps;\r\n                        continue;\r\n                    }\r\n                }\r\n\r\n                if (x1 == null || x2 == null) {\r\n                    continue;\r\n                }\r\n\r\n                // clip x values\r\n\r\n                // clip with xmin\r\n                if (x1 <= x2 && x1 < axisx.min) {\r\n                    if (x2 < axisx.min) {\r\n                        continue;\r\n                    }\r\n\r\n                    y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                    x1 = axisx.min;\r\n                } else if (x2 <= x1 && x2 < axisx.min) {\r\n                    if (x1 < axisx.min) {\r\n                        continue;\r\n                    }\r\n\r\n                    y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                    x2 = axisx.min;\r\n                }\r\n\r\n                // clip with xmax\r\n                if (x1 >= x2 && x1 > axisx.max) {\r\n                    if (x2 > axisx.max) {\r\n                        continue;\r\n                    }\r\n\r\n                    y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                    x1 = axisx.max;\r\n                } else if (x2 >= x1 && x2 > axisx.max) {\r\n                    if (x1 > axisx.max) {\r\n                        continue;\r\n                    }\r\n\r\n                    y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                    x2 = axisx.max;\r\n                }\r\n\r\n                if (!areaOpen) {\r\n                    // open area\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));\r\n                    areaOpen = true;\r\n                }\r\n\r\n                // now first check the case where both is outside\r\n                if (y1 >= axisy.max && y2 >= axisy.max) {\r\n                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));\r\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));\r\n                    continue;\r\n                } else if (y1 <= axisy.min && y2 <= axisy.min) {\r\n                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));\r\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));\r\n                    continue;\r\n                }\r\n\r\n                // else it's a bit more complicated, there might\r\n                // be a flat maxed out rectangle first, then a\r\n                // triangular cutout or reverse; to find these\r\n                // keep track of the current x values\r\n                var x1old = x1,\r\n                    x2old = x2;\r\n\r\n                // clip the y values, without shortcutting, we\r\n                // go through all cases in turn\r\n\r\n                // clip with ymin\r\n                if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {\r\n                    x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                    y1 = axisy.min;\r\n                } else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {\r\n                    x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                    y2 = axisy.min;\r\n                }\r\n\r\n                // clip with ymax\r\n                if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {\r\n                    x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                    y1 = axisy.max;\r\n                } else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {\r\n                    x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                    y2 = axisy.max;\r\n                }\r\n\r\n                // if the x value was changed we got a rectangle\r\n                // to fill\r\n                if (x1 !== x1old) {\r\n                    ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));\r\n                    // it goes to (x1, y1), but we fill that below\r\n                }\r\n\r\n                // fill triangular section, this sometimes result\r\n                // in redundant points if (x1, y1) hasn't changed\r\n                // from previous line to, but we just ignore that\r\n                ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));\r\n                ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\r\n\r\n                // fill the other rectangle if it's there\r\n                if (x2 !== x2old) {\r\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\r\n                    ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n        - drawSeriesLines(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient)\r\n\r\n         This function is used for drawing lines or area fill.  In case the series has line decimation function\r\n         attached, before starting to draw, as an optimization the points will first be decimated.\r\n\r\n         The series parameter contains the series to be drawn on ctx context. The plotOffset, plotWidth and\r\n         plotHeight are the corresponding parameters of flot used to determine the drawing surface.\r\n         The function getColorOrGradient is used to compute the fill style of lines and area.\r\n        */\r\n        function drawSeriesLines(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient) {\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n            ctx.lineJoin = \"round\";\r\n\r\n            if (series.lines.dashes && ctx.setLineDash) {\r\n                ctx.setLineDash(series.lines.dashes);\r\n            }\r\n\r\n            var datapoints = {\r\n                format: series.datapoints.format,\r\n                points: series.datapoints.points,\r\n                pointsize: series.datapoints.pointsize\r\n            };\r\n\r\n            if (series.decimate) {\r\n                datapoints.points = series.decimate(series, series.xaxis.min, series.xaxis.max, plotWidth, series.yaxis.min, series.yaxis.max, plotHeight);\r\n            }\r\n\r\n            var lw = series.lines.lineWidth;\r\n\r\n            ctx.lineWidth = lw;\r\n            ctx.strokeStyle = series.color;\r\n            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight, getColorOrGradient);\r\n            if (fillStyle) {\r\n                ctx.fillStyle = fillStyle;\r\n                plotLineArea(datapoints, series.xaxis, series.yaxis, series.lines.fillTowards || 0, ctx);\r\n            }\r\n\r\n            if (lw > 0) {\r\n                plotLine(datapoints, 0, 0, series.xaxis, series.yaxis, ctx);\r\n            }\r\n\r\n            ctx.restore();\r\n        }\r\n\r\n        /**\r\n        - drawSeriesPoints(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient)\r\n\r\n         This function is used for drawing points using a given symbol. In case the series has points decimation\r\n         function attached, before starting to draw, as an optimization the points will first be decimated.\r\n\r\n         The series parameter contains the series to be drawn on ctx context. The plotOffset, plotWidth and\r\n         plotHeight are the corresponding parameters of flot used to determine the drawing surface.\r\n         The function drawSymbol is used to compute and draw the symbol chosen for the points.\r\n        */\r\n        function drawSeriesPoints(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient) {\r\n            function drawCircle(ctx, x, y, radius, shadow, fill) {\r\n                ctx.moveTo(x + radius, y);\r\n                ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);\r\n            }\r\n            drawCircle.fill = true;\r\n            function plotPoints(datapoints, radius, fill, offset, shadow, axisx, axisy, drawSymbolFn) {\r\n                var points = datapoints.points,\r\n                    ps = datapoints.pointsize;\r\n\r\n                ctx.beginPath();\r\n                for (var i = 0; i < points.length; i += ps) {\r\n                    var x = points[i],\r\n                        y = points[i + 1];\r\n                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max) {\r\n                        continue;\r\n                    }\r\n\r\n                    x = axisx.p2c(x);\r\n                    y = axisy.p2c(y) + offset;\r\n\r\n                    drawSymbolFn(ctx, x, y, radius, shadow, fill);\r\n                }\r\n                if (drawSymbolFn.fill && !shadow) {\r\n                    ctx.fill();\r\n                }\r\n                ctx.stroke();\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            var datapoints = {\r\n                format: series.datapoints.format,\r\n                points: series.datapoints.points,\r\n                pointsize: series.datapoints.pointsize\r\n            };\r\n\r\n            if (series.decimatePoints) {\r\n                datapoints.points = series.decimatePoints(series, series.xaxis.min, series.xaxis.max, plotWidth, series.yaxis.min, series.yaxis.max, plotHeight);\r\n            }\r\n\r\n            var lw = series.points.lineWidth,\r\n                radius = series.points.radius,\r\n                symbol = series.points.symbol,\r\n                drawSymbolFn;\r\n\r\n            if (symbol === 'circle') {\r\n                drawSymbolFn = drawCircle;\r\n            } else if (typeof symbol === 'string' && drawSymbol && drawSymbol[symbol]) {\r\n                drawSymbolFn = drawSymbol[symbol];\r\n            } else if (typeof drawSymbol === 'function') {\r\n                drawSymbolFn = drawSymbol;\r\n            }\r\n\r\n            // If the user sets the line width to 0, we change it to a very\r\n            // small value. A line width of 0 seems to force the default of 1.\r\n\r\n            if (lw === 0) {\r\n                lw = 0.0001;\r\n            }\r\n\r\n            ctx.lineWidth = lw;\r\n            ctx.fillStyle = getFillStyle(series.points, series.color, null, null, getColorOrGradient);\r\n            ctx.strokeStyle = series.color;\r\n            plotPoints(datapoints, radius,\r\n                true, 0, false,\r\n                series.xaxis, series.yaxis, drawSymbolFn);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, lineWidth) {\r\n            var left = x + barLeft,\r\n                right = x + barRight,\r\n                bottom = b, top = y,\r\n                drawLeft, drawRight, drawTop, drawBottom = false,\r\n                tmp;\r\n\r\n            drawLeft = drawRight = drawTop = true;\r\n\r\n            // account for negative bars\r\n            if (top < bottom) {\r\n                tmp = top;\r\n                top = bottom;\r\n                bottom = tmp;\r\n                drawBottom = true;\r\n                drawTop = false;\r\n            }\r\n\r\n            // clip\r\n            if (right < axisx.min || left > axisx.max ||\r\n                top < axisy.min || bottom > axisy.max) {\r\n                return;\r\n            }\r\n\r\n            if (left < axisx.min) {\r\n                left = axisx.min;\r\n                drawLeft = false;\r\n            }\r\n\r\n            if (right > axisx.max) {\r\n                right = axisx.max;\r\n                drawRight = false;\r\n            }\r\n\r\n            if (bottom < axisy.min) {\r\n                bottom = axisy.min;\r\n                drawBottom = false;\r\n            }\r\n\r\n            if (top > axisy.max) {\r\n                top = axisy.max;\r\n                drawTop = false;\r\n            }\r\n\r\n            left = axisx.p2c(left);\r\n            bottom = axisy.p2c(bottom);\r\n            right = axisx.p2c(right);\r\n            top = axisy.p2c(top);\r\n\r\n            // fill the bar\r\n            if (fillStyleCallback) {\r\n                c.fillStyle = fillStyleCallback(bottom, top);\r\n                c.fillRect(left, top, right - left, bottom - top)\r\n            }\r\n\r\n            // draw outline\r\n            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {\r\n                c.beginPath();\r\n\r\n                // FIXME: inline moveTo is buggy with excanvas\r\n                c.moveTo(left, bottom);\r\n                if (drawLeft) {\r\n                    c.lineTo(left, top);\r\n                } else {\r\n                    c.moveTo(left, top);\r\n                }\r\n\r\n                if (drawTop) {\r\n                    c.lineTo(right, top);\r\n                } else {\r\n                    c.moveTo(right, top);\r\n                }\r\n\r\n                if (drawRight) {\r\n                    c.lineTo(right, bottom);\r\n                } else {\r\n                    c.moveTo(right, bottom);\r\n                }\r\n\r\n                if (drawBottom) {\r\n                    c.lineTo(left, bottom);\r\n                } else {\r\n                    c.moveTo(left, bottom);\r\n                }\r\n\r\n                c.stroke();\r\n            }\r\n        }\r\n\r\n        /**\r\n        - drawSeriesBars(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient)\r\n\r\n         This function is used for drawing series represented as bars. In case the series has decimation\r\n         function attached, before starting to draw, as an optimization the points will first be decimated.\r\n\r\n         The series parameter contains the series to be drawn on ctx context. The plotOffset, plotWidth and\r\n         plotHeight are the corresponding parameters of flot used to determine the drawing surface.\r\n         The function getColorOrGradient is used to compute the fill style of bars.\r\n        */\r\n        function drawSeriesBars(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient) {\r\n            function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {\r\n                var points = datapoints.points,\r\n                    ps = datapoints.pointsize,\r\n                    fillTowards = series.bars.fillTowards || 0,\r\n                    bottom = fillTowards > axisy.min ? Math.min(axisy.max, fillTowards) : axisy.min;\r\n\r\n                for (var i = 0; i < points.length; i += ps) {\r\n                    if (points[i] == null) {\r\n                        continue;\r\n                    }\r\n\r\n                    drawBar(points[i], points[i + 1], bottom, barLeft, barRight, fillStyleCallback, axisx, axisy, ctx, series.bars.lineWidth);\r\n                }\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            var datapoints = {\r\n                format: series.datapoints.format,\r\n                points: series.datapoints.points,\r\n                pointsize: series.datapoints.pointsize\r\n            };\r\n\r\n            if (series.decimate) {\r\n                datapoints.points = series.decimate(series, series.xaxis.min, series.xaxis.max, plotWidth);\r\n            }\r\n\r\n            ctx.lineWidth = series.bars.lineWidth;\r\n            ctx.strokeStyle = series.color;\r\n\r\n            var barLeft;\r\n\r\n            switch (series.bars.align) {\r\n                case \"left\":\r\n                    barLeft = 0;\r\n                    break;\r\n                case \"right\":\r\n                    barLeft = -series.bars.barWidth;\r\n                    break;\r\n                default:\r\n                    barLeft = -series.bars.barWidth / 2;\r\n            }\r\n\r\n            var fillStyleCallback = series.bars.fill ? function(bottom, top) {\r\n                return getFillStyle(series.bars, series.color, bottom, top, getColorOrGradient);\r\n            } : null;\r\n\r\n            plotBars(datapoints, barLeft, barLeft + series.bars.barWidth, fillStyleCallback, series.xaxis, series.yaxis);\r\n            ctx.restore();\r\n        }\r\n\r\n        function getFillStyle(filloptions, seriesColor, bottom, top, getColorOrGradient) {\r\n            var fill = filloptions.fill;\r\n            if (!fill) {\r\n                return null;\r\n            }\r\n\r\n            if (filloptions.fillColor) {\r\n                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);\r\n            }\r\n\r\n            var c = $.color.parse(seriesColor);\r\n            c.a = typeof fill === \"number\" ? fill : 0.4;\r\n            c.normalize();\r\n            return c.toString();\r\n        }\r\n\r\n        this.drawSeriesLines = drawSeriesLines;\r\n        this.drawSeriesPoints = drawSeriesPoints;\r\n        this.drawSeriesBars = drawSeriesBars;\r\n        this.drawBar = drawBar;\r\n    };\r\n\r\n    $.plot.drawSeries = new DrawSeries();\r\n})(jQuery);\r\n","(function ($) {\r\n    'use strict';\r\n    $.plot.uiConstants = {\r\n        SNAPPING_CONSTANT: 20,\r\n        PANHINT_LENGTH_CONSTANT: 10,\r\n        MINOR_TICKS_COUNT_CONSTANT: 4,\r\n        TICK_LENGTH_CONSTANT: 10,\r\n        ZOOM_DISTANCE_MARGIN: 25\r\n    };\r\n})(jQuery);\r\n","/* Pretty handling of log axes.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nCopyright (c) 2015 Ciprian Ceteras cipix2000@gmail.com.\r\nCopyright (c) 2017 Raluca Portase\r\nLicensed under the MIT license.\r\n\r\nSet axis.mode to \"log\" to enable.\r\n*/\r\n\r\n/* global jQuery*/\r\n\r\n/**\r\n## jquery.flot.logaxis\r\nThis plugin is used to create logarithmic axis. This includes tick generation,\r\nformatters and transformers to and from logarithmic representation.\r\n\r\n### Methods and hooks\r\n*/\r\n\r\n(function ($) {\r\n    'use strict';\r\n\r\n    var options = {\r\n        xaxis: {}\r\n    };\r\n\r\n    /*tick generators and formatters*/\r\n    var PREFERRED_LOG_TICK_VALUES = computePreferedLogTickValues(Number.MAX_VALUE, 10),\r\n        EXTENDED_LOG_TICK_VALUES = computePreferedLogTickValues(Number.MAX_VALUE, 4);\r\n\r\n    function computePreferedLogTickValues(endLimit, rangeStep) {\r\n        var log10End = Math.floor(Math.log(endLimit) * Math.LOG10E) - 1,\r\n            log10Start = -log10End,\r\n            val, range, vals = [];\r\n\r\n        for (var power = log10Start; power <= log10End; power++) {\r\n            range = Math.pow(10, power);\r\n            for (var mult = 1; mult < 9; mult += rangeStep) {\r\n                val = range * mult;\r\n                vals.push(val);\r\n            }\r\n        }\r\n        return vals;\r\n    }\r\n\r\n    /**\r\n    - logTickGenerator(plot, axis, noTicks)\r\n\r\n    Generates logarithmic ticks, depending on axis range.\r\n    In case the number of ticks that can be generated is less than the expected noTicks/4,\r\n    a linear tick generation is used.\r\n    */\r\n    var logTickGenerator = function (plot, axis, noTicks) {\r\n        var ticks = [],\r\n            minIdx = -1,\r\n            maxIdx = -1,\r\n            surface = plot.getCanvas(),\r\n            logTickValues = PREFERRED_LOG_TICK_VALUES,\r\n            min = clampAxis(axis, plot),\r\n            max = axis.max;\r\n\r\n        if (!noTicks) {\r\n            noTicks = 0.3 * Math.sqrt(axis.direction === \"x\" ? surface.width : surface.height);\r\n        }\r\n\r\n        PREFERRED_LOG_TICK_VALUES.some(function (val, i) {\r\n            if (val >= min) {\r\n                minIdx = i;\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        });\r\n\r\n        PREFERRED_LOG_TICK_VALUES.some(function (val, i) {\r\n            if (val >= max) {\r\n                maxIdx = i;\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        });\r\n\r\n        if (maxIdx === -1) {\r\n            maxIdx = PREFERRED_LOG_TICK_VALUES.length - 1;\r\n        }\r\n\r\n        if (maxIdx - minIdx <= noTicks / 4 && logTickValues.length !== EXTENDED_LOG_TICK_VALUES.length) {\r\n            //try with multiple of 5 for tick values\r\n            logTickValues = EXTENDED_LOG_TICK_VALUES;\r\n            minIdx *= 2;\r\n            maxIdx *= 2;\r\n        }\r\n\r\n        var lastDisplayed = null,\r\n            inverseNoTicks = 1 / noTicks,\r\n            tickValue, pixelCoord, tick;\r\n\r\n        // Count the number of tick values would appear, if we can get at least\r\n        // nTicks / 4 accept them.\r\n        if (maxIdx - minIdx >= noTicks / 4) {\r\n            for (var idx = maxIdx; idx >= minIdx; idx--) {\r\n                tickValue = logTickValues[idx];\r\n                pixelCoord = (Math.log(tickValue) - Math.log(min)) / (Math.log(max) - Math.log(min));\r\n                tick = tickValue;\r\n\r\n                if (lastDisplayed === null) {\r\n                    lastDisplayed = {\r\n                        pixelCoord: pixelCoord,\r\n                        idealPixelCoord: pixelCoord\r\n                    };\r\n                } else {\r\n                    if (Math.abs(pixelCoord - lastDisplayed.pixelCoord) >= inverseNoTicks) {\r\n                        lastDisplayed = {\r\n                            pixelCoord: pixelCoord,\r\n                            idealPixelCoord: lastDisplayed.idealPixelCoord - inverseNoTicks\r\n                        };\r\n                    } else {\r\n                        tick = null;\r\n                    }\r\n                }\r\n\r\n                if (tick) {\r\n                    ticks.push(tick);\r\n                }\r\n            }\r\n            // Since we went in backwards order.\r\n            ticks.reverse();\r\n        } else {\r\n            var tickSize = plot.computeTickSize(min, max, noTicks),\r\n                customAxis = {min: min, max: max, tickSize: tickSize};\r\n            ticks = $.plot.linearTickGenerator(customAxis);\r\n        }\r\n\r\n        return ticks;\r\n    };\r\n\r\n    var clampAxis = function (axis, plot) {\r\n        var min = axis.min,\r\n            max = axis.max;\r\n\r\n        if (min <= 0) {\r\n            //for empty graph if axis.min is not strictly positive make it 0.1\r\n            if (axis.datamin === null) {\r\n                min = axis.min = 0.1;\r\n            } else {\r\n                min = processAxisOffset(plot, axis);\r\n            }\r\n\r\n            if (max < min) {\r\n                axis.max = axis.datamax !== null ? axis.datamax : axis.options.max;\r\n                axis.options.offset.below = 0;\r\n                axis.options.offset.above = 0;\r\n            }\r\n        }\r\n\r\n        return min;\r\n    }\r\n\r\n    /**\r\n    - logTickFormatter(value, axis, precision)\r\n\r\n    This is the corresponding tickFormatter of the logaxis.\r\n    For a number greater that 10^6 or smaller than 10^(-3), this will be drawn\r\n    with e representation\r\n    */\r\n    var logTickFormatter = function (value, axis, precision) {\r\n        var tenExponent = value > 0 ? Math.floor(Math.log(value) / Math.LN10) : 0;\r\n\r\n        if (precision) {\r\n            if ((tenExponent >= -4) && (tenExponent <= 7)) {\r\n                return $.plot.defaultTickFormatter(value, axis, precision);\r\n            } else {\r\n                return $.plot.expRepTickFormatter(value, axis, precision);\r\n            }\r\n        }\r\n        if ((tenExponent >= -4) && (tenExponent <= 7)) {\r\n            //if we have float numbers, return a limited length string(ex: 0.0009 is represented as 0.000900001)\r\n            var formattedValue = tenExponent < 0 ? value.toFixed(-tenExponent) : value.toFixed(tenExponent + 2);\r\n            if (formattedValue.indexOf('.') !== -1) {\r\n                var lastZero = formattedValue.lastIndexOf('0');\r\n\r\n                while (lastZero === formattedValue.length - 1) {\r\n                    formattedValue = formattedValue.slice(0, -1);\r\n                    lastZero = formattedValue.lastIndexOf('0');\r\n                }\r\n\r\n                //delete the dot if is last\r\n                if (formattedValue.indexOf('.') === formattedValue.length - 1) {\r\n                    formattedValue = formattedValue.slice(0, -1);\r\n                }\r\n            }\r\n            return formattedValue;\r\n        } else {\r\n            return $.plot.expRepTickFormatter(value, axis);\r\n        }\r\n    };\r\n\r\n    /*logaxis caracteristic functions*/\r\n    var logTransform = function (v) {\r\n        if (v < PREFERRED_LOG_TICK_VALUES[0]) {\r\n            v = PREFERRED_LOG_TICK_VALUES[0];\r\n        }\r\n\r\n        return Math.log(v);\r\n    };\r\n\r\n    var logInverseTransform = function (v) {\r\n        return Math.exp(v);\r\n    };\r\n\r\n    var invertedTransform = function (v) {\r\n        return -v;\r\n    }\r\n\r\n    var invertedLogTransform = function (v) {\r\n        return -logTransform(v);\r\n    }\r\n\r\n    var invertedLogInverseTransform = function (v) {\r\n        return logInverseTransform(-v);\r\n    }\r\n\r\n    /**\r\n    - setDataminRange(plot, axis)\r\n\r\n    It is used for clamping the starting point of a logarithmic axis.\r\n    This will set the axis datamin range to 0.1 or to the first datapoint greater then 0.\r\n    The function is usefull since the logarithmic representation can not show\r\n    values less than or equal to 0.\r\n    */\r\n    function setDataminRange(plot, axis) {\r\n        if (axis.options.mode === 'log' && axis.datamin <= 0) {\r\n            if (axis.datamin === null) {\r\n                axis.datamin = 0.1;\r\n            } else {\r\n                axis.datamin = processAxisOffset(plot, axis);\r\n            }\r\n        }\r\n    }\r\n\r\n    function processAxisOffset(plot, axis) {\r\n        var series = plot.getData(),\r\n            range = series\r\n                .filter(function(series) {\r\n                    return series.xaxis === axis || series.yaxis === axis;\r\n                })\r\n                .map(function(series) {\r\n                    return plot.computeRangeForDataSeries(series, null, isValid);\r\n                }),\r\n            min = axis.direction === 'x' ? Math.min(0.1, range[0].xmin) : Math.min(0.1, range[0].ymin);\r\n\r\n        axis.min = min;\r\n\r\n        return min;\r\n    }\r\n\r\n    function isValid(a) {\r\n        return a > 0;\r\n    }\r\n\r\n    function init(plot) {\r\n        plot.hooks.processOptions.push(function (plot) {\r\n            $.each(plot.getAxes(), function (axisName, axis) {\r\n                var opts = axis.options;\r\n                if (opts.mode === 'log') {\r\n                    axis.tickGenerator = function (axis) {\r\n                        var noTicks = 11;\r\n                        return logTickGenerator(plot, axis, noTicks);\r\n                    };\r\n                    if (typeof axis.options.tickFormatter !== 'function') {\r\n                        axis.options.tickFormatter = logTickFormatter;\r\n                    }\r\n                    axis.options.transform = opts.inverted ? invertedLogTransform : logTransform;\r\n                    axis.options.inverseTransform = opts.inverted ? invertedLogInverseTransform : logInverseTransform;\r\n                    axis.options.autoScaleMargin = 0;\r\n                    plot.hooks.setRange.push(setDataminRange);\r\n                } else if (opts.inverted) {\r\n                    axis.options.transform = invertedTransform;\r\n                    axis.options.inverseTransform = invertedTransform;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'log',\r\n        version: '0.1'\r\n    });\r\n\r\n    $.plot.logTicksGenerator = logTickGenerator;\r\n    $.plot.logTickFormatter = logTickFormatter;\r\n})(jQuery);\r\n","/* Flot plugin that adds some extra symbols for plotting points.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\nThe symbols are accessed as strings through the standard symbol options:\r\n\r\n    series: {\r\n        points: {\r\n            symbol: \"square\" // or \"diamond\", \"triangle\", \"cross\", \"plus\", \"ellipse\", \"rectangle\"\r\n        }\r\n    }\r\n\r\n*/\r\n\r\n(function ($) {\r\n    // we normalize the area of each symbol so it is approximately the\r\n    // same as a circle of the given radius\r\n\r\n    var square = function (ctx, x, y, radius, shadow) {\r\n            // pi * r^2 = (2s)^2  =>  s = r * sqrt(pi)/2\r\n            var size = radius * Math.sqrt(Math.PI) / 2;\r\n            ctx.rect(x - size, y - size, size + size, size + size);\r\n        },\r\n        rectangle = function (ctx, x, y, radius, shadow) {\r\n            // pi * r^2 = (2s)^2  =>  s = r * sqrt(pi)/2\r\n            var size = radius * Math.sqrt(Math.PI) / 2;\r\n            ctx.rect(x - size, y - size, size + size, size + size);\r\n        },\r\n        diamond = function (ctx, x, y, radius, shadow) {\r\n            // pi * r^2 = 2s^2  =>  s = r * sqrt(pi/2)\r\n            var size = radius * Math.sqrt(Math.PI / 2);\r\n            ctx.moveTo(x - size, y);\r\n            ctx.lineTo(x, y - size);\r\n            ctx.lineTo(x + size, y);\r\n            ctx.lineTo(x, y + size);\r\n            ctx.lineTo(x - size, y);\r\n            ctx.lineTo(x, y - size);\r\n        },\r\n        triangle = function (ctx, x, y, radius, shadow) {\r\n            // pi * r^2 = 1/2 * s^2 * sin (pi / 3)  =>  s = r * sqrt(2 * pi / sin(pi / 3))\r\n            var size = radius * Math.sqrt(2 * Math.PI / Math.sin(Math.PI / 3));\r\n            var height = size * Math.sin(Math.PI / 3);\r\n            ctx.moveTo(x - size / 2, y + height / 2);\r\n            ctx.lineTo(x + size / 2, y + height / 2);\r\n            if (!shadow) {\r\n                ctx.lineTo(x, y - height / 2);\r\n                ctx.lineTo(x - size / 2, y + height / 2);\r\n                ctx.lineTo(x + size / 2, y + height / 2);\r\n            }\r\n        },\r\n        cross = function (ctx, x, y, radius, shadow) {\r\n            // pi * r^2 = (2s)^2  =>  s = r * sqrt(pi)/2\r\n            var size = radius * Math.sqrt(Math.PI) / 2;\r\n            ctx.moveTo(x - size, y - size);\r\n            ctx.lineTo(x + size, y + size);\r\n            ctx.moveTo(x - size, y + size);\r\n            ctx.lineTo(x + size, y - size);\r\n        },\r\n        ellipse = function(ctx, x, y, radius, shadow, fill) {\r\n            if (!shadow) {\r\n                ctx.moveTo(x + radius, y);\r\n                ctx.arc(x, y, radius, 0, Math.PI * 2, false);\r\n            }\r\n        },\r\n        plus = function (ctx, x, y, radius, shadow) {\r\n            var size = radius * Math.sqrt(Math.PI / 2);\r\n            ctx.moveTo(x - size, y);\r\n            ctx.lineTo(x + size, y);\r\n            ctx.moveTo(x, y + size);\r\n            ctx.lineTo(x, y - size);\r\n        },\r\n        handlers = {\r\n            square: square,\r\n            rectangle: rectangle,\r\n            diamond: diamond,\r\n            triangle: triangle,\r\n            cross: cross,\r\n            ellipse: ellipse,\r\n            plus: plus\r\n        };\r\n\r\n    square.fill = true;\r\n    rectangle.fill = true;\r\n    diamond.fill = true;\r\n    triangle.fill = true;\r\n    ellipse.fill = true;\r\n\r\n    function init(plot) {\r\n        plot.drawSymbol = handlers;\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        name: 'symbols',\r\n        version: '1.0'\r\n    });\r\n})(jQuery);\r\n","/* Support for flat 1D data series.\r\n\r\nA 1D flat data series is a data series in the form of a regular 1D array. The\r\nmain reason for using a flat data series is that it performs better, consumes\r\nless memory and generates less garbage collection than the regular flot format.\r\n\r\nExample:\r\n\r\n    plot.setData([[[0,0], [1,1], [2,2], [3,3]]]); // regular flot format\r\n    plot.setData([{flatdata: true, data: [0, 1, 2, 3]}]); // flatdata format\r\n\r\nSet series.flatdata to true to enable this plugin.\r\n\r\nYou can use series.start to specify the starting index of the series (default is 0)\r\nYou can use series.step to specify the interval between consecutive indexes of the series (default is 1)\r\n*/\r\n\r\n/* global jQuery*/\r\n\r\n(function ($) {\r\n    'use strict';\r\n\r\n    function process1DRawData(plot, series, data, datapoints) {\r\n        if (series.flatdata === true) {\r\n            var start = series.start || 0;\r\n            var step = typeof series.step === 'number' ? series.step : 1;\r\n            datapoints.pointsize = 2;\r\n            for (var i = 0, j = 0; i < data.length; i++, j += 2) {\r\n                datapoints.points[j] = start + (i * step);\r\n                datapoints.points[j + 1] = data[i];\r\n            }\r\n            if (datapoints.points !== undefined) {\r\n                datapoints.points.length = data.length * 2;\r\n            } else {\r\n                datapoints.points = [];\r\n            }\r\n        }\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: function(plot) {\r\n            plot.hooks.processRawData.push(process1DRawData);\r\n        },\r\n        name: 'flatdata',\r\n        version: '0.0.2'\r\n    });\r\n})(jQuery);\r\n","/* Flot plugin for adding the ability to pan and zoom the plot.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nCopyright (c) 2016 Ciprian Ceteras.\r\nCopyright (c) 2017 Raluca Portase.\r\nLicensed under the MIT license.\r\n\r\n*/\r\n\r\n/**\r\n## jquery.flot.navigate.js\r\n\r\nThis flot plugin is used for adding the ability to pan and zoom the plot.\r\nA higher level overview is available at [interactions](interactions.md) documentation.\r\n\r\nThe default behaviour is scrollwheel up/down to zoom in, drag\r\nto pan. The plugin defines plot.zoom({ center }), plot.zoomOut() and\r\nplot.pan( offset ) so you easily can add custom controls. It also fires\r\n\"plotpan\" and \"plotzoom\" events, useful for synchronizing plots.\r\n\r\nThe plugin supports these options:\r\n```js\r\n    zoom: {\r\n        interactive: false,\r\n        active: false,\r\n        amount: 1.5         // 2 = 200% (zoom in), 0.5 = 50% (zoom out)\r\n    }\r\n\r\n    pan: {\r\n        interactive: false,\r\n        active: false,\r\n        cursor: \"move\",     // CSS mouse cursor value used when dragging, e.g. \"pointer\"\r\n        frameRate: 20,\r\n        mode: \"smart\"       // enable smart pan mode\r\n    }\r\n\r\n    xaxis: {\r\n        axisZoom: true, //zoom axis when mouse over it is allowed\r\n        plotZoom: true, //zoom axis is allowed for plot zoom\r\n        axisPan: true, //pan axis when mouse over it is allowed\r\n        plotPan: true //pan axis is allowed for plot pan\r\n    }\r\n\r\n    yaxis: {\r\n        axisZoom: true, //zoom axis when mouse over it is allowed\r\n        plotZoom: true, //zoom axis is allowed for plot zoom\r\n        axisPan: true, //pan axis when mouse over it is allowed\r\n        plotPan: true //pan axis is allowed for plot pan\r\n    }\r\n```\r\n**interactive** enables the built-in drag/click behaviour. If you enable\r\ninteractive for pan, then you'll have a basic plot that supports moving\r\naround; the same for zoom.\r\n\r\n**active** is true after a touch tap on plot. This enables plot navigation.\r\nOnce activated, zoom and pan cannot be deactivated. When the plot becomes active,\r\n\"plotactivated\" event is triggered.\r\n\r\n**amount** specifies the default amount to zoom in (so 1.5 = 150%) relative to\r\nthe current viewport.\r\n\r\n**cursor** is a standard CSS mouse cursor string used for visual feedback to the\r\nuser when dragging.\r\n\r\n**frameRate** specifies the maximum number of times per second the plot will\r\nupdate itself while the user is panning around on it (set to null to disable\r\nintermediate pans, the plot will then not update until the mouse button is\r\nreleased).\r\n\r\nExample API usage:\r\n```js\r\n    plot = $.plot(...);\r\n\r\n    // zoom default amount in on the pixel ( 10, 20 )\r\n    plot.zoom({ center: { left: 10, top: 20 } });\r\n\r\n    // zoom out again\r\n    plot.zoomOut({ center: { left: 10, top: 20 } });\r\n\r\n    // zoom 200% in on the pixel (10, 20)\r\n    plot.zoom({ amount: 2, center: { left: 10, top: 20 } });\r\n\r\n    // pan 100 pixels to the left and 20 down\r\n    plot.pan({ left: -100, top: 20 })\r\n```\r\n\r\nHere, \"center\" specifies where the center of the zooming should happen. Note\r\nthat this is defined in pixel space, not the space of the data points (you can\r\nuse the p2c helpers on the axes in Flot to help you convert between these).\r\n\r\n**amount** is the amount to zoom the viewport relative to the current range, so\r\n1 is 100% (i.e. no change), 1.5 is 150% (zoom in), 0.7 is 70% (zoom out). You\r\ncan set the default in the options.\r\n*/\r\n\r\n/* eslint-enable */\r\n(function($) {\r\n    'use strict';\r\n\r\n    var options = {\r\n        zoom: {\r\n            interactive: false,\r\n            active: false,\r\n            amount: 1.5 // how much to zoom relative to current position, 2 = 200% (zoom in), 0.5 = 50% (zoom out)\r\n        },\r\n        pan: {\r\n            interactive: false,\r\n            active: false,\r\n            cursor: \"move\",\r\n            frameRate: 60\r\n        },\r\n        xaxis: {\r\n            axisZoom: true, //zoom axis when mouse over it is allowed\r\n            plotZoom: true, //zoom axis is allowed for plot zoom\r\n            axisPan: true, //pan axis when mouse over it is allowed\r\n            plotPan: true //pan axis is allowed for plot pan\r\n        },\r\n        yaxis: {\r\n            axisZoom: true,\r\n            plotZoom: true,\r\n            axisPan: true,\r\n            plotPan: true\r\n        }\r\n    };\r\n\r\n    var saturated = $.plot.saturated;\r\n    var browser = $.plot.browser;\r\n    var SNAPPING_CONSTANT = $.plot.uiConstants.SNAPPING_CONSTANT;\r\n    var PANHINT_LENGTH_CONSTANT = $.plot.uiConstants.PANHINT_LENGTH_CONSTANT;\r\n\r\n    function init(plot) {\r\n        var panAxes = null;\r\n        var canDrag = false;\r\n\r\n        function onZoomClick(e, zoomOut, amount) {\r\n            var page = browser.getPageXY(e);\r\n\r\n            var c = plot.offset();\r\n            c.left = page.X - c.left;\r\n            c.top = page.Y - c.top;\r\n\r\n            var ec = plot.getPlaceholder().offset();\r\n            ec.left = page.X - ec.left;\r\n            ec.top = page.Y - ec.top;\r\n\r\n            var axes = plot.getXAxes().concat(plot.getYAxes()).filter(function (axis) {\r\n                var box = axis.box;\r\n                if (box !== undefined) {\r\n                    return (ec.left > box.left) && (ec.left < box.left + box.width) &&\r\n                        (ec.top > box.top) && (ec.top < box.top + box.height);\r\n                }\r\n            });\r\n\r\n            if (axes.length === 0) {\r\n                axes = undefined;\r\n            }\r\n\r\n            if (zoomOut) {\r\n                plot.zoomOut({\r\n                    center: c,\r\n                    axes: axes,\r\n                    amount: amount\r\n                });\r\n            } else {\r\n                plot.zoom({\r\n                    center: c,\r\n                    axes: axes,\r\n                    amount: amount\r\n                });\r\n            }\r\n        }\r\n\r\n        var prevCursor = 'default',\r\n            panHint = null,\r\n            panTimeout = null,\r\n            plotState,\r\n            isPanAction = false;\r\n\r\n        function onMouseWheel(e, delta) {\r\n            var maxAbsoluteDeltaOnMac = 1,\r\n                isMacScroll = Math.abs(e.originalEvent.deltaY) <= maxAbsoluteDeltaOnMac,\r\n                defaultNonMacScrollAmount = null,\r\n                macMagicRatio = 50,\r\n                amount = isMacScroll ? 1 + Math.abs(e.originalEvent.deltaY) / macMagicRatio : defaultNonMacScrollAmount;\r\n\r\n            if (isPanAction) {\r\n                onDragEnd(e);\r\n            }\r\n\r\n            if (plot.getOptions().zoom.active) {\r\n                e.preventDefault();\r\n                onZoomClick(e, delta < 0, amount);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        plot.navigationState = function(startPageX, startPageY) {\r\n            var axes = this.getAxes();\r\n            var result = {};\r\n            Object.keys(axes).forEach(function(axisName) {\r\n                var axis = axes[axisName];\r\n                result[axisName] = {\r\n                    navigationOffset: { below: axis.options.offset.below || 0,\r\n                        above: axis.options.offset.above || 0},\r\n                    axisMin: axis.min,\r\n                    axisMax: axis.max,\r\n                    diagMode: false\r\n                }\r\n            });\r\n\r\n            result.startPageX = startPageX || 0;\r\n            result.startPageY = startPageY || 0;\r\n            return result;\r\n        }\r\n\r\n        function onMouseDown(e) {\r\n            canDrag = true;\r\n        }\r\n\r\n        function onMouseUp(e) {\r\n            canDrag = false;\r\n        }\r\n\r\n        function isLeftMouseButtonPressed(e) {\r\n            return e.button === 0;\r\n        }\r\n\r\n        function onDragStart(e) {\r\n            if (!canDrag || !isLeftMouseButtonPressed(e)) {\r\n                return false;\r\n            }\r\n\r\n            isPanAction = true;\r\n            var page = browser.getPageXY(e);\r\n\r\n            var ec = plot.getPlaceholder().offset();\r\n            ec.left = page.X - ec.left;\r\n            ec.top = page.Y - ec.top;\r\n\r\n            panAxes = plot.getXAxes().concat(plot.getYAxes()).filter(function (axis) {\r\n                var box = axis.box;\r\n                if (box !== undefined) {\r\n                    return (ec.left > box.left) && (ec.left < box.left + box.width) &&\r\n                        (ec.top > box.top) && (ec.top < box.top + box.height);\r\n                }\r\n            });\r\n\r\n            if (panAxes.length === 0) {\r\n                panAxes = undefined;\r\n            }\r\n\r\n            var c = plot.getPlaceholder().css('cursor');\r\n            if (c) {\r\n                prevCursor = c;\r\n            }\r\n\r\n            plot.getPlaceholder().css('cursor', plot.getOptions().pan.cursor);\r\n            plotState = plot.navigationState(page.X, page.Y);\r\n        }\r\n\r\n        function onDrag(e) {\r\n            var page = browser.getPageXY(e);\r\n            var frameRate = plot.getOptions().pan.frameRate;\r\n\r\n            if (frameRate === -1) {\r\n                plot.smartPan({\r\n                    x: plotState.startPageX - page.X,\r\n                    y: plotState.startPageY - page.Y\r\n                }, plotState, panAxes);\r\n\r\n                return;\r\n            }\r\n\r\n            if (panTimeout || !frameRate) return;\r\n\r\n            panTimeout = setTimeout(function() {\r\n                plot.smartPan({\r\n                    x: plotState.startPageX - page.X,\r\n                    y: plotState.startPageY - page.Y\r\n                }, plotState, panAxes);\r\n\r\n                panTimeout = null;\r\n            }, 1 / frameRate * 1000);\r\n        }\r\n\r\n        function onDragEnd(e) {\r\n            if (panTimeout) {\r\n                clearTimeout(panTimeout);\r\n                panTimeout = null;\r\n            }\r\n\r\n            isPanAction = false;\r\n            var page = browser.getPageXY(e);\r\n\r\n            plot.getPlaceholder().css('cursor', prevCursor);\r\n            plot.smartPan({\r\n                x: plotState.startPageX - page.X,\r\n                y: plotState.startPageY - page.Y\r\n            }, plotState, panAxes);\r\n            panHint = null;\r\n        }\r\n\r\n        function onDblClick(e) {\r\n            plot.activate();\r\n\r\n            var axes = plot.getTouchedAxis(e.clientX, e.clientY),\r\n                event;\r\n            if (axes[0]) {\r\n                event = new $.Event('re-center', { detail: {\r\n                    axisTouched: axes[0]\r\n                }});\r\n            } else {\r\n                event = new $.Event('re-center', {detail: e});\r\n            }\r\n            plot.getPlaceholder().trigger(event);\r\n        }\r\n\r\n        function onClick(e) {\r\n            plot.activate();\r\n\r\n            if (isPanAction) {\r\n                onDragEnd(e);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        plot.activate = function() {\r\n            var o = plot.getOptions();\r\n            if (!o.pan.active || !o.zoom.active) {\r\n                o.pan.active = true;\r\n                o.zoom.active = true;\r\n                plot.getPlaceholder().trigger(\"plotactivated\", [plot]);\r\n            }\r\n        }\r\n\r\n        function bindEvents(plot, eventHolder) {\r\n            var o = plot.getOptions();\r\n            if (o.zoom.interactive) {\r\n                eventHolder.mousewheel(onMouseWheel);\r\n            }\r\n\r\n            if (o.pan.interactive) {\r\n                eventHolder.bind(\"dragstart\", {\r\n                    distance: 10\r\n                }, onDragStart);\r\n                eventHolder.bind(\"drag\", onDrag);\r\n                eventHolder.bind(\"dragend\", onDragEnd);\r\n                eventHolder.bind(\"mousedown\", onMouseDown);\r\n                eventHolder.bind(\"mouseup\", onMouseUp);\r\n            }\r\n\r\n            eventHolder.dblclick(onDblClick);\r\n            eventHolder.click(onClick);\r\n        }\r\n\r\n        plot.zoomOut = function(args) {\r\n            if (!args) {\r\n                args = {};\r\n            }\r\n\r\n            if (!args.amount) {\r\n                args.amount = plot.getOptions().zoom.amount;\r\n            }\r\n\r\n            args.amount = 1 / args.amount;\r\n            plot.zoom(args);\r\n        };\r\n\r\n        plot.zoom = function(args) {\r\n            if (!args) {\r\n                args = {};\r\n            }\r\n\r\n            var c = args.center,\r\n                amount = args.amount || plot.getOptions().zoom.amount,\r\n                w = plot.width(),\r\n                h = plot.height(),\r\n                axes = args.axes || plot.getAxes();\r\n\r\n            if (!c) {\r\n                c = {\r\n                    left: w / 2,\r\n                    top: h / 2\r\n                };\r\n            }\r\n\r\n            var xf = c.left / w,\r\n                yf = c.top / h,\r\n                minmax = {\r\n                    x: {\r\n                        min: c.left - xf * w / amount,\r\n                        max: c.left + (1 - xf) * w / amount\r\n                    },\r\n                    y: {\r\n                        min: c.top - yf * h / amount,\r\n                        max: c.top + (1 - yf) * h / amount\r\n                    }\r\n                };\r\n\r\n            for (var key in axes) {\r\n                if (!axes.hasOwnProperty(key)) {\r\n                    continue;\r\n                }\r\n\r\n                var axis = axes[key],\r\n                    opts = axis.options,\r\n                    min = minmax[axis.direction].min,\r\n                    max = minmax[axis.direction].max,\r\n                    navigationOffset = axis.options.offset;\r\n\r\n                //skip axis without axisZoom when zooming only on certain axis or axis without plotZoom for zoom on entire plot\r\n                if ((!opts.axisZoom && args.axes) || (!args.axes && !opts.plotZoom)) {\r\n                    continue;\r\n                }\r\n\r\n                min = $.plot.saturated.saturate(axis.c2p(min));\r\n                max = $.plot.saturated.saturate(axis.c2p(max));\r\n                if (min > max) {\r\n                    // make sure min < max\r\n                    var tmp = min;\r\n                    min = max;\r\n                    max = tmp;\r\n                }\r\n\r\n                var offsetBelow = $.plot.saturated.saturate(navigationOffset.below - (axis.min - min));\r\n                var offsetAbove = $.plot.saturated.saturate(navigationOffset.above - (axis.max - max));\r\n                opts.offset = { below: offsetBelow, above: offsetAbove };\r\n            };\r\n\r\n            plot.setupGrid();\r\n            plot.draw();\r\n\r\n            if (!args.preventEvent) {\r\n                plot.getPlaceholder().trigger(\"plotzoom\", [plot, args]);\r\n            }\r\n        };\r\n\r\n        plot.pan = function(args) {\r\n            var delta = {\r\n                x: +args.left,\r\n                y: +args.top\r\n            };\r\n\r\n            if (isNaN(delta.x)) delta.x = 0;\r\n            if (isNaN(delta.y)) delta.y = 0;\r\n\r\n            $.each(args.axes || plot.getAxes(), function(_, axis) {\r\n                var opts = axis.options,\r\n                    d = delta[axis.direction];\r\n\r\n                //skip axis without axisPan when panning only on certain axis or axis without plotPan for pan the entire plot\r\n                if ((!opts.axisPan && args.axes) || (!opts.plotPan && !args.axes)) {\r\n                    return;\r\n                }\r\n\r\n                if (d !== 0) {\r\n                    var navigationOffsetBelow = saturated.saturate(axis.c2p(axis.p2c(axis.min) - d) - axis.c2p(axis.p2c(axis.min))),\r\n                        navigationOffsetAbove = saturated.saturate(axis.c2p(axis.p2c(axis.max) - d) - axis.c2p(axis.p2c(axis.max)));\r\n\r\n                    if (!isFinite(navigationOffsetBelow)) {\r\n                        navigationOffsetBelow = 0;\r\n                    }\r\n\r\n                    if (!isFinite(navigationOffsetAbove)) {\r\n                        navigationOffsetAbove = 0;\r\n                    }\r\n\r\n                    opts.offset = {\r\n                        below: saturated.saturate(navigationOffsetBelow + (opts.offset.below || 0)),\r\n                        above: saturated.saturate(navigationOffsetAbove + (opts.offset.above || 0))\r\n                    };\r\n                }\r\n            });\r\n\r\n            plot.setupGrid();\r\n            plot.draw();\r\n            if (!args.preventEvent) {\r\n                plot.getPlaceholder().trigger(\"plotpan\", [plot, args]);\r\n            }\r\n        };\r\n\r\n        plot.recenter = function(args) {\r\n            $.each(args.axes || plot.getAxes(), function(_, axis) {\r\n                if (args.axes) {\r\n                    if (this.direction === 'x') {\r\n                        axis.options.offset = { below: 0 };\r\n                    } else if (this.direction === 'y') {\r\n                        axis.options.offset = { above: 0 };\r\n                    }\r\n                } else {\r\n                    axis.options.offset = { below: 0, above: 0 };\r\n                }\r\n            });\r\n            plot.setupGrid();\r\n            plot.draw();\r\n        };\r\n\r\n        var shouldSnap = function(delta) {\r\n            return (Math.abs(delta.y) < SNAPPING_CONSTANT && Math.abs(delta.x) >= SNAPPING_CONSTANT) ||\r\n                (Math.abs(delta.x) < SNAPPING_CONSTANT && Math.abs(delta.y) >= SNAPPING_CONSTANT);\r\n        }\r\n\r\n        // adjust delta so the pan action is constrained on the vertical or horizontal direction\r\n        // it the movements in the other direction are small\r\n        var adjustDeltaToSnap = function(delta) {\r\n            if (Math.abs(delta.x) < SNAPPING_CONSTANT && Math.abs(delta.y) >= SNAPPING_CONSTANT) {\r\n                return {x: 0, y: delta.y};\r\n            }\r\n\r\n            if (Math.abs(delta.y) < SNAPPING_CONSTANT && Math.abs(delta.x) >= SNAPPING_CONSTANT) {\r\n                return {x: delta.x, y: 0};\r\n            }\r\n\r\n            return delta;\r\n        }\r\n\r\n        var isDiagonalMode = function(delta) {\r\n            if (Math.abs(delta.x) > 0 && Math.abs(delta.y) > 0) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        var restoreAxisOffset = function(axes, initialState, delta) {\r\n            var axis;\r\n            Object.keys(axes).forEach(function(axisName) {\r\n                axis = axes[axisName];\r\n                if (delta[axis.direction] === 0) {\r\n                    axis.options.offset.below = initialState[axisName].navigationOffset.below;\r\n                    axis.options.offset.above = initialState[axisName].navigationOffset.above;\r\n                }\r\n            });\r\n        }\r\n\r\n        var prevDelta = { x: 0, y: 0 };\r\n        plot.smartPan = function(delta, initialState, panAxes, preventEvent) {\r\n            var snap = shouldSnap(delta),\r\n                axes = plot.getAxes(),\r\n                opts;\r\n            delta = adjustDeltaToSnap(delta);\r\n\r\n            if (isDiagonalMode(delta)) {\r\n                initialState.diagMode = true;\r\n            }\r\n\r\n            if (snap && initialState.diagMode === true) {\r\n                initialState.diagMode = false;\r\n                restoreAxisOffset(axes, initialState, delta);\r\n            }\r\n\r\n            if (snap) {\r\n                panHint = {\r\n                    start: {\r\n                        x: initialState.startPageX - plot.offset().left + plot.getPlotOffset().left,\r\n                        y: initialState.startPageY - plot.offset().top + plot.getPlotOffset().top\r\n                    },\r\n                    end: {\r\n                        x: initialState.startPageX - delta.x - plot.offset().left + plot.getPlotOffset().left,\r\n                        y: initialState.startPageY - delta.y - plot.offset().top + plot.getPlotOffset().top\r\n                    }\r\n                }\r\n            } else {\r\n                panHint = {\r\n                    start: {\r\n                        x: initialState.startPageX - plot.offset().left + plot.getPlotOffset().left,\r\n                        y: initialState.startPageY - plot.offset().top + plot.getPlotOffset().top\r\n                    },\r\n                    end: false\r\n                }\r\n            }\r\n\r\n            if (isNaN(delta.x)) delta.x = 0;\r\n            if (isNaN(delta.y)) delta.y = 0;\r\n\r\n            if (panAxes) {\r\n                axes = panAxes;\r\n            }\r\n\r\n            var axis, axisMin, axisMax, p, d;\r\n            Object.keys(axes).forEach(function(axisName) {\r\n                axis = axes[axisName];\r\n                axisMin = axis.min;\r\n                axisMax = axis.max;\r\n                opts = axis.options;\r\n\r\n                d = delta[axis.direction];\r\n                p = prevDelta[axis.direction];\r\n\r\n                //skip axis without axisPan when panning only on certain axis or axis without plotPan for pan the entire plot\r\n                if ((!opts.axisPan && panAxes) || (!panAxes && !opts.plotPan)) {\r\n                    return;\r\n                }\r\n\r\n                if (d !== 0) {\r\n                    var navigationOffsetBelow = saturated.saturate(axis.c2p(axis.p2c(axisMin) - (p - d)) - axis.c2p(axis.p2c(axisMin))),\r\n                        navigationOffsetAbove = saturated.saturate(axis.c2p(axis.p2c(axisMax) - (p - d)) - axis.c2p(axis.p2c(axisMax)));\r\n\r\n                    if (!isFinite(navigationOffsetBelow)) {\r\n                        navigationOffsetBelow = 0;\r\n                    }\r\n\r\n                    if (!isFinite(navigationOffsetAbove)) {\r\n                        navigationOffsetAbove = 0;\r\n                    }\r\n\r\n                    axis.options.offset.below = saturated.saturate(navigationOffsetBelow + (axis.options.offset.below || 0));\r\n                    axis.options.offset.above = saturated.saturate(navigationOffsetAbove + (axis.options.offset.above || 0));\r\n                }\r\n            });\r\n\r\n            prevDelta = delta;\r\n            plot.setupGrid();\r\n            plot.draw();\r\n\r\n            if (!preventEvent) {\r\n                plot.getPlaceholder().trigger(\"plotpan\", [plot, delta, panAxes, initialState]);\r\n            }\r\n        };\r\n\r\n        function shutdown(plot, eventHolder) {\r\n            eventHolder.unbind(\"mousewheel\", onMouseWheel);\r\n            eventHolder.unbind(\"mousedown\", onMouseDown);\r\n            eventHolder.unbind(\"mouseup\", onMouseUp);\r\n            eventHolder.unbind(\"dragstart\", onDragStart);\r\n            eventHolder.unbind(\"drag\", onDrag);\r\n            eventHolder.unbind(\"dragend\", onDragEnd);\r\n            eventHolder.unbind(\"dblclick\", onDblClick);\r\n            eventHolder.unbind(\"click\", onClick);\r\n\r\n            if (panTimeout) clearTimeout(panTimeout);\r\n        }\r\n\r\n        function drawOverlay(plot, ctx) {\r\n            if (panHint) {\r\n                ctx.strokeStyle = 'rgba(96, 160, 208, 0.7)';\r\n                ctx.lineWidth = 2;\r\n                ctx.lineJoin = \"round\";\r\n                var startx = Math.round(panHint.start.x),\r\n                    starty = Math.round(panHint.start.y),\r\n                    endx, endy;\r\n\r\n                if (panAxes) {\r\n                    if (panAxes[0].direction === 'x') {\r\n                        endy = Math.round(panHint.start.y);\r\n                        endx = Math.round(panHint.end.x);\r\n                    } else if (panAxes[0].direction === 'y') {\r\n                        endx = Math.round(panHint.start.x);\r\n                        endy = Math.round(panHint.end.y);\r\n                    }\r\n                } else {\r\n                    endx = Math.round(panHint.end.x);\r\n                    endy = Math.round(panHint.end.y);\r\n                }\r\n\r\n                ctx.beginPath();\r\n\r\n                if (panHint.end === false) {\r\n                    ctx.moveTo(startx, starty - PANHINT_LENGTH_CONSTANT);\r\n                    ctx.lineTo(startx, starty + PANHINT_LENGTH_CONSTANT);\r\n\r\n                    ctx.moveTo(startx + PANHINT_LENGTH_CONSTANT, starty);\r\n                    ctx.lineTo(startx - PANHINT_LENGTH_CONSTANT, starty);\r\n                } else {\r\n                    var dirX = starty === endy;\r\n\r\n                    ctx.moveTo(startx - (dirX ? 0 : PANHINT_LENGTH_CONSTANT), starty - (dirX ? PANHINT_LENGTH_CONSTANT : 0));\r\n                    ctx.lineTo(startx + (dirX ? 0 : PANHINT_LENGTH_CONSTANT), starty + (dirX ? PANHINT_LENGTH_CONSTANT : 0));\r\n\r\n                    ctx.moveTo(startx, starty);\r\n                    ctx.lineTo(endx, endy);\r\n\r\n                    ctx.moveTo(endx - (dirX ? 0 : PANHINT_LENGTH_CONSTANT), endy - (dirX ? PANHINT_LENGTH_CONSTANT : 0));\r\n                    ctx.lineTo(endx + (dirX ? 0 : PANHINT_LENGTH_CONSTANT), endy + (dirX ? PANHINT_LENGTH_CONSTANT : 0));\r\n                }\r\n\r\n                ctx.stroke();\r\n            }\r\n        }\r\n\r\n        plot.getTouchedAxis = function(touchPointX, touchPointY) {\r\n            var ec = plot.getPlaceholder().offset();\r\n            ec.left = touchPointX - ec.left;\r\n            ec.top = touchPointY - ec.top;\r\n\r\n            var axis = plot.getXAxes().concat(plot.getYAxes()).filter(function (axis) {\r\n                var box = axis.box;\r\n                if (box !== undefined) {\r\n                    return (ec.left > box.left) && (ec.left < box.left + box.width) &&\r\n                            (ec.top > box.top) && (ec.top < box.top + box.height);\r\n                }\r\n            });\r\n\r\n            return axis;\r\n        }\r\n\r\n        plot.hooks.drawOverlay.push(drawOverlay);\r\n        plot.hooks.bindEvents.push(bindEvents);\r\n        plot.hooks.shutdown.push(shutdown);\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'navigate',\r\n        version: '1.3'\r\n    });\r\n})(jQuery);\r\n","/* global jQuery */\r\n\r\n(function($) {\r\n    'use strict';\r\n\r\n    var options = {\r\n        pan: {\r\n            enableTouch: false\r\n        }\r\n    };\r\n\r\n    var ZOOM_DISTANCE_MARGIN = $.plot.uiConstants.ZOOM_DISTANCE_MARGIN;\r\n\r\n    function init(plot) {\r\n        plot.hooks.processOptions.push(initTouchNavigation);\r\n    }\r\n\r\n    function initTouchNavigation(plot, options) {\r\n        var gestureState = {\r\n                zoomEnable: false,\r\n                prevDistance: null,\r\n                prevTapTime: 0,\r\n                prevPanPosition: { x: 0, y: 0 },\r\n                prevTapPosition: { x: 0, y: 0 }\r\n            },\r\n            navigationState = {\r\n                prevTouchedAxis: 'none',\r\n                currentTouchedAxis: 'none',\r\n                touchedAxis: null,\r\n                navigationConstraint: 'unconstrained'\r\n            },\r\n            pan, pinch, doubleTap;\r\n\r\n        function bindEvents(plot, eventHolder) {\r\n            var o = plot.getOptions();\r\n\r\n            if (o.pan.interactive) {\r\n                eventHolder[0].addEventListener('panstart', pan.start, false);\r\n                eventHolder[0].addEventListener('pandrag', pan.drag, false);\r\n                eventHolder[0].addEventListener('panend', pan.end, false);\r\n                eventHolder[0].addEventListener('pinchstart', pinch.start, false);\r\n                eventHolder[0].addEventListener('pinchdrag', pinch.drag, false);\r\n                eventHolder[0].addEventListener('pinchend', pinch.end, false);\r\n                eventHolder[0].addEventListener('doubletap', doubleTap.recenterPlot, false);\r\n            }\r\n        }\r\n\r\n        function shutdown(plot, eventHolder) {\r\n            eventHolder[0].removeEventListener('panstart', pan.start);\r\n            eventHolder[0].removeEventListener('pandrag', pan.drag);\r\n            eventHolder[0].removeEventListener('panend', pan.end);\r\n            eventHolder[0].removeEventListener('pinchstart', pinch.start);\r\n            eventHolder[0].removeEventListener('pinchdrag', pinch.drag);\r\n            eventHolder[0].removeEventListener('pinchend', pinch.end);\r\n            eventHolder[0].removeEventListener('doubletap', doubleTap.recenterPlot);\r\n        }\r\n\r\n        pan = {\r\n            start: function(e) {\r\n                presetNavigationState(e, 'pan', gestureState);\r\n                updateData(e, 'pan', gestureState, navigationState);\r\n            },\r\n\r\n            drag: function(e) {\r\n                presetNavigationState(e, 'pan', gestureState);\r\n                plot.pan({\r\n                    left: delta(e, 'pan', gestureState).x,\r\n                    top: delta(e, 'pan', gestureState).y,\r\n                    axes: navigationState.touchedAxis\r\n                });\r\n                updatePrevPanPosition(e, 'pan', gestureState, navigationState);\r\n            },\r\n\r\n            end: function(e) {\r\n                presetNavigationState(e, 'pan', gestureState);\r\n                if (wasPinchEvent(e, gestureState)) {\r\n                    updateprevPanPosition(e, 'pan', gestureState, navigationState);\r\n                }\r\n            }\r\n        };\r\n        var pinchDragTimeout;\r\n        pinch = {\r\n            start: function(e) {\r\n                if (pinchDragTimeout) {\r\n                    clearTimeout(pinchDragTimeout);\r\n                    pinchDragTimeout = null;\r\n                }\r\n                presetNavigationState(e, 'pinch', gestureState);\r\n                setPrevDistance(e, gestureState);\r\n                updateData(e, 'pinch', gestureState, navigationState);\r\n            },\r\n\r\n            drag: function(e) {\r\n                if (pinchDragTimeout) {\r\n                    return;\r\n                }\r\n                pinchDragTimeout = setTimeout(function() {\r\n                    presetNavigationState(e, 'pinch', gestureState);\r\n                    plot.pan({\r\n                        left: delta(e, 'pinch', gestureState).x,\r\n                        top: delta(e, 'pinch', gestureState).y,\r\n                        axes: navigationState.touchedAxis\r\n                    });\r\n                    updatePrevPanPosition(e, 'pinch', gestureState, navigationState);\r\n\r\n                    var dist = pinchDistance(e);\r\n\r\n                    if (gestureState.zoomEnable || Math.abs(dist - gestureState.prevDistance) > ZOOM_DISTANCE_MARGIN) {\r\n                        zoomPlot(plot, e, gestureState, navigationState);\r\n\r\n                        //activate zoom mode\r\n                        gestureState.zoomEnable = true;\r\n                    }\r\n                    pinchDragTimeout = null;\r\n                }, 1000 / 60);\r\n            },\r\n\r\n            end: function(e) {\r\n                if (pinchDragTimeout) {\r\n                    clearTimeout(pinchDragTimeout);\r\n                    pinchDragTimeout = null;\r\n                }\r\n                presetNavigationState(e, 'pinch', gestureState);\r\n                gestureState.prevDistance = null;\r\n            }\r\n        };\r\n\r\n        doubleTap = {\r\n            recenterPlot: function(e) {\r\n                recenterPlotOnDoubleTap(plot, e, gestureState, navigationState);\r\n            }\r\n        };\r\n\r\n        if (options.pan.enableTouch === true) {\r\n            plot.hooks.bindEvents.push(bindEvents);\r\n            plot.hooks.shutdown.push(shutdown);\r\n        }\r\n\r\n        function presetNavigationState(e, gesture, gestureState) {\r\n            navigationState.touchedAxis = getAxis(plot, e, gesture, navigationState);\r\n            if (noAxisTouched(navigationState)) {\r\n                navigationState.navigationConstraint = 'unconstrained';\r\n            } else {\r\n                navigationState.navigationConstraint = 'axisConstrained';\r\n            }\r\n        }\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'navigateTouch',\r\n        version: '0.3'\r\n    });\r\n\r\n    function recenterPlotOnDoubleTap(plot, e, gestureState, navigationState) {\r\n        checkAxesForDoubleTap(plot, e, navigationState);\r\n        if ((navigationState.currentTouchedAxis === 'x' && navigationState.prevTouchedAxis === 'x') ||\r\n            (navigationState.currentTouchedAxis === 'y' && navigationState.prevTouchedAxis === 'y') ||\r\n            (navigationState.currentTouchedAxis === 'none' && navigationState.prevTouchedAxis === 'none')) {\r\n            plot.recenter({ axes: navigationState.touchedAxis });\r\n        }\r\n    }\r\n\r\n    function checkAxesForDoubleTap(plot, e, navigationState) {\r\n        var axis = plot.getTouchedAxis(e.detail.firstTouch.x, e.detail.firstTouch.y);\r\n        if (axis[0] !== undefined) {\r\n            navigationState.prevTouchedAxis = axis[0].direction;\r\n        }\r\n\r\n        axis = plot.getTouchedAxis(e.detail.secondTouch.x, e.detail.secondTouch.y);\r\n        if (axis[0] !== undefined) {\r\n            navigationState.touchedAxis = axis;\r\n            navigationState.currentTouchedAxis = axis[0].direction;\r\n        }\r\n\r\n        if (noAxisTouched(navigationState)) {\r\n            navigationState.touchedAxis = null;\r\n            navigationState.prevTouchedAxis = 'none';\r\n            navigationState.currentTouchedAxis = 'none';\r\n        }\r\n    }\r\n\r\n    function zoomPlot(plot, e, gestureState, navigationState) {\r\n        var offset = plot.offset(),\r\n            center = {\r\n                left: 0,\r\n                top: 0\r\n            },\r\n            zoomAmount = pinchDistance(e) / gestureState.prevDistance,\r\n            dist = pinchDistance(e);\r\n\r\n        center.left = getPoint(e, 'pinch').x - offset.left;\r\n        center.top = getPoint(e, 'pinch').y - offset.top;\r\n\r\n        // send the computed touched axis to the zoom function so that it only zooms on that one\r\n        plot.zoom({\r\n            center: center,\r\n            amount: zoomAmount,\r\n            axes: navigationState.touchedAxis\r\n        });\r\n        gestureState.prevDistance = dist;\r\n    }\r\n\r\n    function wasPinchEvent(e, gestureState) {\r\n        return (gestureState.zoomEnable && e.detail.touches.length === 1);\r\n    }\r\n\r\n    function getAxis(plot, e, gesture, navigationState) {\r\n        if (e.type === 'pinchstart') {\r\n            var axisTouch1 = plot.getTouchedAxis(e.detail.touches[0].pageX, e.detail.touches[0].pageY);\r\n            var axisTouch2 = plot.getTouchedAxis(e.detail.touches[1].pageX, e.detail.touches[1].pageY);\r\n\r\n            if (axisTouch1.length === axisTouch2.length && axisTouch1.toString() === axisTouch2.toString()) {\r\n                return axisTouch1;\r\n            }\r\n        } else if (e.type === 'panstart') {\r\n            return plot.getTouchedAxis(e.detail.touches[0].pageX, e.detail.touches[0].pageY);\r\n        } else if (e.type === 'pinchend') {\r\n            //update axis since instead on pinch, a pan event is made\r\n            return plot.getTouchedAxis(e.detail.touches[0].pageX, e.detail.touches[0].pageY);\r\n        } else {\r\n            return navigationState.touchedAxis;\r\n        }\r\n    }\r\n\r\n    function noAxisTouched(navigationState) {\r\n        return (!navigationState.touchedAxis || navigationState.touchedAxis.length === 0);\r\n    }\r\n\r\n    function setPrevDistance(e, gestureState) {\r\n        gestureState.prevDistance = pinchDistance(e);\r\n    }\r\n\r\n    function updateData(e, gesture, gestureState, navigationState) {\r\n        var axisDir,\r\n            point = getPoint(e, gesture);\r\n\r\n        switch (navigationState.navigationConstraint) {\r\n            case 'unconstrained':\r\n                navigationState.touchedAxis = null;\r\n                gestureState.prevTapPosition = {\r\n                    x: gestureState.prevPanPosition.x,\r\n                    y: gestureState.prevPanPosition.y\r\n                };\r\n                gestureState.prevPanPosition = {\r\n                    x: point.x,\r\n                    y: point.y\r\n                };\r\n                break;\r\n            case 'axisConstrained':\r\n                axisDir = navigationState.touchedAxis[0].direction;\r\n                navigationState.currentTouchedAxis = axisDir;\r\n                gestureState.prevTapPosition[axisDir] = gestureState.prevPanPosition[axisDir];\r\n                gestureState.prevPanPosition[axisDir] = point[axisDir];\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    function distance(x1, y1, x2, y2) {\r\n        return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\r\n    }\r\n\r\n    function pinchDistance(e) {\r\n        var t1 = e.detail.touches[0],\r\n            t2 = e.detail.touches[1];\r\n        return distance(t1.pageX, t1.pageY, t2.pageX, t2.pageY);\r\n    }\r\n\r\n    function updatePrevPanPosition(e, gesture, gestureState, navigationState) {\r\n        var point = getPoint(e, gesture);\r\n\r\n        switch (navigationState.navigationConstraint) {\r\n            case 'unconstrained':\r\n                gestureState.prevPanPosition.x = point.x;\r\n                gestureState.prevPanPosition.y = point.y;\r\n                break;\r\n            case 'axisConstrained':\r\n                gestureState.prevPanPosition[navigationState.currentTouchedAxis] =\r\n                point[navigationState.currentTouchedAxis];\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    function delta(e, gesture, gestureState) {\r\n        var point = getPoint(e, gesture);\r\n\r\n        return {\r\n            x: point.x - gestureState.prevPanPosition.x,\r\n            y: point.y - gestureState.prevPanPosition.y\r\n        }\r\n    }\r\n\r\n    function getPoint(e, gesture) {\r\n        if (gesture === 'pinch') {\r\n            return {\r\n                x: (e.detail.touches[0].pageX + e.detail.touches[1].pageX) / 2,\r\n                y: (e.detail.touches[0].pageY + e.detail.touches[1].pageY) / 2\r\n            }\r\n        } else {\r\n            return {\r\n                x: e.detail.touches[0].pageX,\r\n                y: e.detail.touches[0].pageY\r\n            }\r\n        }\r\n    }\r\n})(jQuery);\r\n","/* global jQuery */\r\n\r\n/**\r\n## jquery.flot.hover.js\r\n\r\nThis plugin is used for mouse hover and tap on a point of plot series.\r\nIt supports the following options:\r\n```js\r\ngrid: {\r\n    hoverable: false, //to trigger plothover event on mouse hover or tap on a point\r\n    clickable: false //to trigger plotclick event on mouse hover\r\n}\r\n```\r\n\r\nIt listens to native mouse move event or click, as well as artificial generated\r\ntap and touchevent.\r\n\r\nWhen the mouse is over a point or a tap on a point is performed, that point or\r\nthe correscponding bar will be highlighted and a \"plothover\" event will be generated.\r\n\r\nCustom \"touchevent\" is triggered when any touch interaction is made. Hover plugin\r\nhandles this events by unhighlighting all of the previously highlighted points and generates\r\n\"plothovercleanup\" event to notify any part that is handling plothover (for exemple to cleanup\r\nthe tooltip from webcharts).\r\n*/\r\n\r\n(function($) {\r\n    'use strict';\r\n\r\n    var options = {\r\n        grid: {\r\n            hoverable: false,\r\n            clickable: false\r\n        }\r\n    };\r\n\r\n    var browser = $.plot.browser;\r\n\r\n    function init(plot) {\r\n        plot.hooks.processOptions.push(initHover);\r\n    }\r\n\r\n    function initHover(plot, options) {\r\n        var highlights = [];\r\n        plot.highlight = highlight;\r\n        plot.unhighlight = unhighlight;\r\n\r\n        function bindEvents(plot, eventHolder) {\r\n            var o = plot.getOptions();\r\n\r\n            if (o.grid.hoverable || o.grid.clickable) {\r\n                eventHolder[0].addEventListener('touchevent', triggerCleanupEvent, false);\r\n                eventHolder[0].addEventListener('tap', tap.generatePlothoverEvent, false);\r\n            }\r\n\r\n            if (options.grid.clickable) {\r\n                eventHolder.click(onClick);\r\n            }\r\n\r\n            if (options.grid.hoverable) {\r\n                eventHolder.mousemove(onMouseMove);\r\n\r\n                // Use bind, rather than .mouseleave, because we officially\r\n                // still support jQuery 1.2.6, which doesn't define a shortcut\r\n                // for mouseenter or mouseleave.  This was a bug/oversight that\r\n                // was fixed somewhere around 1.3.x.  We can return to using\r\n                // .mouseleave when we drop support for 1.2.6.\r\n\r\n                eventHolder.bind(\"mouseleave\", onMouseLeave);\r\n            }\r\n        }\r\n\r\n        function shutdown(plot, eventHolder) {\r\n            eventHolder[0].removeEventListener('tap', tap.generatePlothoverEvent);\r\n            eventHolder[0].removeEventListener('tap', triggerCleanupEvent);\r\n            eventHolder.unbind(\"mousemove\", onMouseMove);\r\n            eventHolder.unbind(\"mouseleave\", onMouseLeave);\r\n            eventHolder.unbind(\"click\", onClick);\r\n            highlights = [];\r\n        }\r\n\r\n        var tap = {\r\n            generatePlothoverEvent: function (e) {\r\n                var o = plot.getOptions(),\r\n                    series = plot.getData(),\r\n                    newEvent = new CustomEvent('mouseevent');\r\n\r\n                //transform from touch event to mouse event format\r\n                newEvent.pageX = e.detail.changedTouches[0].pageX;\r\n                newEvent.pageY = e.detail.changedTouches[0].pageY;\r\n                newEvent.clientX = e.detail.changedTouches[0].clientX;\r\n                newEvent.clientY = e.detail.changedTouches[0].clientY;\r\n\r\n                if (o.grid.hoverable) {\r\n                    triggerClickHoverEvent('plothover', newEvent,\r\n                        function(i) {\r\n                            return series[i]['hoverable'] !== false;\r\n                        }, 30);\r\n                }\r\n                return false;\r\n            }\r\n        };\r\n\r\n        if (options.grid.hoverable || options.grid.clickable) {\r\n            plot.hooks.bindEvents.push(bindEvents);\r\n            plot.hooks.shutdown.push(shutdown);\r\n            plot.hooks.drawOverlay.push(drawOverlay);\r\n            plot.hooks.processRawData.push(processRawData);\r\n        }\r\n\r\n        function onMouseMove(e) {\r\n            var series = plot.getData();\r\n\r\n            triggerClickHoverEvent(\"plothover\", e,\r\n                function(i) {\r\n                    return series[i][\"hoverable\"] !== false;\r\n                });\r\n        }\r\n\r\n        function onMouseLeave(e) {\r\n            triggerClickHoverEvent(\"plothover\", e,\r\n                function(i) {\r\n                    return false;\r\n                });\r\n        }\r\n\r\n        function onClick(e) {\r\n            var series = plot.getData();\r\n\r\n            triggerClickHoverEvent(\"plotclick\", e,\r\n                function(i) {\r\n                    return series[i][\"clickable\"] !== false;\r\n                });\r\n        }\r\n\r\n        function triggerCleanupEvent() {\r\n            plot.unhighlight();\r\n            plot.getPlaceholder().trigger('plothovercleanup');\r\n        }\r\n\r\n        // trigger click or hover event (they send the same parameters\r\n        // so we share their code)\r\n        function triggerClickHoverEvent(eventname, event, seriesFilter, searchDistance) {\r\n            var options = plot.getOptions(),\r\n                offset = plot.offset(),\r\n                page = browser.getPageXY(event),\r\n                canvasX = page.X - offset.left,\r\n                canvasY = page.Y - offset.top,\r\n                pos = plot.c2p({\r\n                    left: canvasX,\r\n                    top: canvasY\r\n                }),\r\n                distance = searchDistance !== undefined ? searchDistance : options.grid.mouseActiveRadius;\r\n\r\n            pos.pageX = page.X;\r\n            pos.pageY = page.Y;\r\n\r\n            var item = plot.findNearbyItem(canvasX, canvasY, seriesFilter, distance);\r\n\r\n            if (item) {\r\n                // fill in mouse pos for any listeners out there\r\n                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left, 10);\r\n                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top, 10);\r\n            }\r\n\r\n            if (options.grid.autoHighlight) {\r\n                // clear auto-highlights\r\n                for (var i = 0; i < highlights.length; ++i) {\r\n                    var h = highlights[i];\r\n                    if ((h.auto === eventname &&\r\n                        !(item && h.series === item.series &&\r\n                            h.point[0] === item.datapoint[0] &&\r\n                            h.point[1] === item.datapoint[1])) || !item) {\r\n                        unhighlight(h.series, h.point);\r\n                    }\r\n                }\r\n\r\n                if (item) {\r\n                    highlight(item.series, item.datapoint, eventname);\r\n                }\r\n            }\r\n\r\n            plot.getPlaceholder().trigger(eventname, [pos, item]);\r\n        }\r\n\r\n        function highlight(s, point, auto) {\r\n            if (typeof s === \"number\") {\r\n                s = plot.getData()[s];\r\n            }\r\n\r\n            if (typeof point === \"number\") {\r\n                var ps = s.datapoints.pointsize;\r\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\r\n            }\r\n\r\n            var i = indexOfHighlight(s, point);\r\n            if (i === -1) {\r\n                highlights.push({\r\n                    series: s,\r\n                    point: point,\r\n                    auto: auto\r\n                });\r\n\r\n                plot.triggerRedrawOverlay();\r\n            } else if (!auto) {\r\n                highlights[i].auto = false;\r\n            }\r\n        }\r\n\r\n        function unhighlight(s, point) {\r\n            if (s == null && point == null) {\r\n                highlights = [];\r\n                plot.triggerRedrawOverlay();\r\n                return;\r\n            }\r\n\r\n            if (typeof s === \"number\") {\r\n                s = plot.getData()[s];\r\n            }\r\n\r\n            if (typeof point === \"number\") {\r\n                var ps = s.datapoints.pointsize;\r\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\r\n            }\r\n\r\n            var i = indexOfHighlight(s, point);\r\n            if (i !== -1) {\r\n                highlights.splice(i, 1);\r\n\r\n                plot.triggerRedrawOverlay();\r\n            }\r\n        }\r\n\r\n        function indexOfHighlight(s, p) {\r\n            for (var i = 0; i < highlights.length; ++i) {\r\n                var h = highlights[i];\r\n                if (h.series === s &&\r\n                    h.point[0] === p[0] &&\r\n                    h.point[1] === p[1]) {\r\n                    return i;\r\n                }\r\n            }\r\n\r\n            return -1;\r\n        }\r\n\r\n        function processRawData() {\r\n            triggerCleanupEvent();\r\n        }\r\n\r\n        function drawOverlay(plot, octx, overlay) {\r\n            var plotOffset = plot.getPlotOffset(),\r\n                i, hi;\r\n\r\n            octx.save();\r\n            octx.translate(plotOffset.left, plotOffset.top);\r\n            for (i = 0; i < highlights.length; ++i) {\r\n                hi = highlights[i];\r\n\r\n                if (hi.series.bars.show) drawBarHighlight(hi.series, hi.point, octx);\r\n                else drawPointHighlight(hi.series, hi.point, octx, plot);\r\n            }\r\n            octx.restore();\r\n        }\r\n    }\r\n\r\n    function drawPointHighlight(series, point, octx, plot) {\r\n        var x = point[0],\r\n            y = point[1],\r\n            axisx = series.xaxis,\r\n            axisy = series.yaxis,\r\n            highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString();\r\n\r\n        if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max) {\r\n            return;\r\n        }\r\n\r\n        var pointRadius = series.points.radius + series.points.lineWidth / 2;\r\n        octx.lineWidth = pointRadius;\r\n        octx.strokeStyle = highlightColor;\r\n        var radius = 1.5 * pointRadius;\r\n        x = axisx.p2c(x);\r\n        y = axisy.p2c(y);\r\n\r\n        octx.beginPath();\r\n        var symbol = series.points.symbol;\r\n        if (symbol === 'circle') {\r\n            octx.arc(x, y, radius, 0, 2 * Math.PI, false);\r\n        } else if (typeof symbol === 'string' && plot.drawSymbol && plot.drawSymbol[symbol]) {\r\n            plot.drawSymbol[symbol](octx, x, y, radius, false);\r\n        }\r\n\r\n        octx.closePath();\r\n        octx.stroke();\r\n    }\r\n\r\n    function drawBarHighlight(series, point, octx) {\r\n        var highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString(),\r\n            fillStyle = highlightColor,\r\n            barLeft;\r\n\r\n        switch (series.bars.align) {\r\n            case \"left\":\r\n                barLeft = 0;\r\n                break;\r\n            case \"right\":\r\n                barLeft = -series.bars.barWidth;\r\n                break;\r\n            default:\r\n                barLeft = -series.bars.barWidth / 2;\r\n        }\r\n\r\n        octx.lineWidth = series.bars.lineWidth;\r\n        octx.strokeStyle = highlightColor;\r\n\r\n        var fillTowards = series.bars.fillTowards || 0,\r\n            bottom = fillTowards > series.yaxis.min ? Math.min(series.yaxis.max, fillTowards) : series.yaxis.min;\r\n\r\n        $.plot.drawSeries.drawBar(point[0], point[1], point[2] || bottom, barLeft, barLeft + series.bars.barWidth,\r\n            function() {\r\n                return fillStyle;\r\n            }, series.xaxis, series.yaxis, octx, series.bars.lineWidth);\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'hover',\r\n        version: '0.1'\r\n    });\r\n})(jQuery);\r\n","\r\n/* global jQuery */\r\n\r\n(function($) {\r\n    'use strict';\r\n\r\n    var options = {\r\n        pan: {\r\n            enableTouch: false\r\n        }\r\n    };\r\n\r\n    function init(plot) {\r\n        plot.hooks.processOptions.push(initTouchNavigation);\r\n    }\r\n\r\n    function initTouchNavigation(plot, options) {\r\n        var gestureState = {\r\n                twoTouches: false,\r\n                currentTapStart: { x: 0, y: 0 },\r\n                currentTapEnd: { x: 0, y: 0 },\r\n                prevTap: { x: 0, y: 0 },\r\n                currentTap: { x: 0, y: 0 },\r\n                interceptedLongTap: false,\r\n                allowEventPropagation: false,\r\n                prevTapTime: null,\r\n                tapStartTime: null,\r\n                longTapTriggerId: null\r\n            },\r\n            maxDistanceBetweenTaps = 20,\r\n            maxIntervalBetweenTaps = 500,\r\n            maxLongTapDistance = 20,\r\n            minLongTapDuration = 1500,\r\n            pressedTapDuration = 125,\r\n            mainEventHolder;\r\n\r\n        function interpretGestures(e) {\r\n            var o = plot.getOptions();\r\n\r\n            if (!o.pan.active && !o.zoom.active) {\r\n                return;\r\n            }\r\n\r\n            updateOnMultipleTouches(e);\r\n            mainEventHolder.dispatchEvent(new CustomEvent('touchevent', { detail: e }));\r\n\r\n            if (isPinchEvent(e)) {\r\n                executeAction(e, 'pinch');\r\n            } else {\r\n                executeAction(e, 'pan');\r\n                if (!wasPinchEvent(e)) {\r\n                    if (isDoubleTap(e)) {\r\n                        executeAction(e, 'doubleTap');\r\n                    }\r\n                    executeAction(e, 'tap');\r\n                    executeAction(e, 'longTap');\r\n                }\r\n            }\r\n        }\r\n\r\n        function executeAction(e, gesture) {\r\n            switch (gesture) {\r\n                case 'pan':\r\n                    pan[e.type](e);\r\n                    break;\r\n                case 'pinch':\r\n                    pinch[e.type](e);\r\n                    break;\r\n                case 'doubleTap':\r\n                    doubleTap.onDoubleTap(e);\r\n                    break;\r\n                case 'longTap':\r\n                    longTap[e.type](e);\r\n                    break;\r\n                case 'tap':\r\n                    tap[e.type](e);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        function bindEvents(plot, eventHolder) {\r\n            mainEventHolder = eventHolder[0];\r\n            eventHolder[0].addEventListener('touchstart', interpretGestures, false);\r\n            eventHolder[0].addEventListener('touchmove', interpretGestures, false);\r\n            eventHolder[0].addEventListener('touchend', interpretGestures, false);\r\n        }\r\n\r\n        function shutdown(plot, eventHolder) {\r\n            eventHolder[0].removeEventListener('touchstart', interpretGestures);\r\n            eventHolder[0].removeEventListener('touchmove', interpretGestures);\r\n            eventHolder[0].removeEventListener('touchend', interpretGestures);\r\n            if (gestureState.longTapTriggerId) {\r\n                clearTimeout(gestureState.longTapTriggerId);\r\n                gestureState.longTapTriggerId = null;\r\n            }\r\n        }\r\n\r\n        var pan = {\r\n            touchstart: function(e) {\r\n                updatePrevForDoubleTap();\r\n                updateCurrentForDoubleTap(e);\r\n                updateStateForLongTapStart(e);\r\n\r\n                mainEventHolder.dispatchEvent(new CustomEvent('panstart', { detail: e }));\r\n            },\r\n\r\n            touchmove: function(e) {\r\n                preventEventPropagation(e);\r\n\r\n                updateCurrentForDoubleTap(e);\r\n                updateStateForLongTapEnd(e);\r\n\r\n                if (!gestureState.allowEventPropagation) {\r\n                    mainEventHolder.dispatchEvent(new CustomEvent('pandrag', { detail: e }));\r\n                }\r\n            },\r\n\r\n            touchend: function(e) {\r\n                preventEventPropagation(e);\r\n\r\n                if (wasPinchEvent(e)) {\r\n                    mainEventHolder.dispatchEvent(new CustomEvent('pinchend', { detail: e }));\r\n                    mainEventHolder.dispatchEvent(new CustomEvent('panstart', { detail: e }));\r\n                } else if (noTouchActive(e)) {\r\n                    mainEventHolder.dispatchEvent(new CustomEvent('panend', { detail: e }));\r\n                }\r\n            }\r\n        };\r\n\r\n        var pinch = {\r\n            touchstart: function(e) {\r\n                mainEventHolder.dispatchEvent(new CustomEvent('pinchstart', { detail: e }));\r\n            },\r\n\r\n            touchmove: function(e) {\r\n                preventEventPropagation(e);\r\n                gestureState.twoTouches = isPinchEvent(e);\r\n                if (!gestureState.allowEventPropagation) {\r\n                    mainEventHolder.dispatchEvent(new CustomEvent('pinchdrag', { detail: e }));\r\n                }\r\n            },\r\n\r\n            touchend: function(e) {\r\n                preventEventPropagation(e);\r\n            }\r\n        };\r\n\r\n        var doubleTap = {\r\n            onDoubleTap: function(e) {\r\n                preventEventPropagation(e);\r\n                mainEventHolder.dispatchEvent(new CustomEvent('doubletap', { detail: e }));\r\n            }\r\n        };\r\n\r\n        var longTap = {\r\n            touchstart: function(e) {\r\n                longTap.waitForLongTap(e);\r\n            },\r\n\r\n            touchmove: function(e) {\r\n            },\r\n\r\n            touchend: function(e) {\r\n                if (gestureState.longTapTriggerId) {\r\n                    clearTimeout(gestureState.longTapTriggerId);\r\n                    gestureState.longTapTriggerId = null;\r\n                }\r\n            },\r\n\r\n            isLongTap: function(e) {\r\n                var currentTime = new Date().getTime(),\r\n                    tapDuration = currentTime - gestureState.tapStartTime;\r\n                if (tapDuration >= minLongTapDuration && !gestureState.interceptedLongTap) {\r\n                    if (distance(gestureState.currentTapStart.x, gestureState.currentTapStart.y, gestureState.currentTapEnd.x, gestureState.currentTapEnd.y) < maxLongTapDistance) {\r\n                        gestureState.interceptedLongTap = true;\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n\r\n            waitForLongTap: function(e) {\r\n                var longTapTrigger = function() {\r\n                    if (longTap.isLongTap(e)) {\r\n                        mainEventHolder.dispatchEvent(new CustomEvent('longtap', { detail: e }));\r\n                    }\r\n                    gestureState.longTapTriggerId = null;\r\n                };\r\n                if (!gestureState.longTapTriggerId) {\r\n                    gestureState.longTapTriggerId = setTimeout(longTapTrigger, minLongTapDuration);\r\n                }\r\n            }\r\n        };\r\n\r\n        var tap = {\r\n            touchstart: function(e) {\r\n                gestureState.tapStartTime = new Date().getTime();\r\n            },\r\n\r\n            touchmove: function(e) {\r\n            },\r\n\r\n            touchend: function(e) {\r\n                if (tap.isTap(e)) {\r\n                    mainEventHolder.dispatchEvent(new CustomEvent('tap', { detail: e }));\r\n                    preventEventPropagation(e);\r\n                }\r\n            },\r\n\r\n            isTap: function(e) {\r\n                var currentTime = new Date().getTime(),\r\n                    tapDuration = currentTime - gestureState.tapStartTime;\r\n                if (tapDuration <= pressedTapDuration) {\r\n                    if (distance(gestureState.currentTapStart.x, gestureState.currentTapStart.y, gestureState.currentTapEnd.x, gestureState.currentTapEnd.y) < maxLongTapDistance) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        };\r\n\r\n        if (options.pan.enableTouch === true) {\r\n            plot.hooks.bindEvents.push(bindEvents);\r\n            plot.hooks.shutdown.push(shutdown);\r\n        };\r\n\r\n        function updatePrevForDoubleTap() {\r\n            gestureState.prevTap = {\r\n                x: gestureState.currentTap.x,\r\n                y: gestureState.currentTap.y\r\n            };\r\n        };\r\n\r\n        function updateCurrentForDoubleTap(e) {\r\n            gestureState.currentTap = {\r\n                x: e.touches[0].pageX,\r\n                y: e.touches[0].pageY\r\n            };\r\n        }\r\n\r\n        function updateStateForLongTapStart(e) {\r\n            gestureState.tapStartTime = new Date().getTime();\r\n            gestureState.interceptedLongTap = false;\r\n            gestureState.currentTapStart = {\r\n                x: e.touches[0].pageX,\r\n                y: e.touches[0].pageY\r\n            };\r\n            gestureState.currentTapEnd = {\r\n                x: e.touches[0].pageX,\r\n                y: e.touches[0].pageY\r\n            };\r\n        };\r\n\r\n        function updateStateForLongTapEnd(e) {\r\n            gestureState.currentTapEnd = {\r\n                x: e.touches[0].pageX,\r\n                y: e.touches[0].pageY\r\n            };\r\n        };\r\n\r\n        function isDoubleTap(e) {\r\n            var currentTime = new Date().getTime(),\r\n                intervalBetweenTaps = currentTime - gestureState.prevTapTime;\r\n\r\n            if (intervalBetweenTaps >= 0 && intervalBetweenTaps < maxIntervalBetweenTaps) {\r\n                if (distance(gestureState.prevTap.x, gestureState.prevTap.y, gestureState.currentTap.x, gestureState.currentTap.y) < maxDistanceBetweenTaps) {\r\n                    e.firstTouch = gestureState.prevTap;\r\n                    e.secondTouch = gestureState.currentTap;\r\n                    return true;\r\n                }\r\n            }\r\n            gestureState.prevTapTime = currentTime;\r\n            return false;\r\n        }\r\n\r\n        function preventEventPropagation(e) {\r\n            if (!gestureState.allowEventPropagation) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            }\r\n        }\r\n\r\n        function distance(x1, y1, x2, y2) {\r\n            return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\r\n        }\r\n\r\n        function noTouchActive(e) {\r\n            return (e.touches && e.touches.length === 0);\r\n        }\r\n\r\n        function wasPinchEvent(e) {\r\n            return (gestureState.twoTouches && e.touches.length === 1);\r\n        }\r\n\r\n        function updateOnMultipleTouches(e) {\r\n            if (e.touches.length >= 3) {\r\n                gestureState.allowEventPropagation = true;\r\n            } else {\r\n                gestureState.allowEventPropagation = false;\r\n            }\r\n        }\r\n\r\n        function isPinchEvent(e) {\r\n            if (e.touches && e.touches.length >= 2) {\r\n                if (e.touches[0].target === plot.getEventHolder() &&\r\n                    e.touches[1].target === plot.getEventHolder()) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'navigateTouch',\r\n        version: '0.3'\r\n    });\r\n})(jQuery);\r\n","/* Pretty handling of time axes.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\nSet axis.format to \"time\" to enable. See the section \"Time series data\" in\r\nAPI.txt for details.\r\n*/\r\n\r\n/** ## jquery.flot.absRelTime.js\r\n\r\nThis plugin is used to format the time axis in absolute time representation as\r\nwell as relative time representation.\r\n\r\nIt supports the following options:\r\n```js\r\nxaxis: {\r\n    timezone: null, // \"browser\" for local to the client or timezone for timezone-js\r\n    timeformat: null, // format string to use\r\n    twelveHourClock: false, // 12 or 24 time in time mode\r\n    monthNames: null // list of names of months\r\n    timeEpoch: '0000-12-31T18:00:00' // A time in UTC string format to use as an offset for the display of dates (see below)\r\n}\r\nyaxis: {\r\n    timeEpoch: '0000-12-31T18:00:00' // A time in UTC string format to use as an offset for the display of dates (see below)\r\n}\r\n```\r\n\r\nDepending upon the timeformat axis parameter value, the axis tick formatter will\r\nchoose between an absolute time representation if the value begins with '%A' or\r\nrelative time for timeformat '%r'.\r\n\r\nTime formatting options may follow the %A or %r specification in the timeformat string.\r\nThey take the form of:\r\n\r\n<(hh|HH):mm[:ss[.S+]]> or <#T> for localized version of time\r\n\r\n'<HH:mm>'          24-hour format\r\n'<hh:mm:ss>'       12-hour format\r\n'<hh:mm:ss.SSS>'   12-hour format, with three-digit fractional seconds\r\n'<#T.SSS>'         localized format, with three-digit fractional seconds\r\n\r\nDate formatting options will be honored when following the %A specification. Note that it\r\ncan be used in combination with the time formatting (with both sets of options between\r\nthe '<>' characters. If both date and time formatting options are present, currently time\r\nwill always be displayed first, and the date will be displayed on a newline.\r\n\r\nDate formats are as follows:\r\n\r\n<(dd/MM|MM/dd)/yy(yy)> or <#d> for localized version of date\r\n\r\n'<dd/MM>'         Day/Month  (no year)\r\n'<MM/dd/yy>'      Month/Day/2-digit year\r\n'<MM/dd/yyyy>'    Month/Day/4-digit year\r\n'<#d>'            localized date format (per preferred language setting of browser)\r\n\r\nIf the format for an axis is 'time', inside processOptions hook the tickGenerator\r\nand tickFormatter of the axis will be overrided with the custom ones used by time axes.\r\n\r\nThe formatted values look like in the example bellow:\r\n\r\n|format|value(s)|formatted value(s)|\r\n|------|----:|--------------:|\r\n|Absolute time|0|12:00:00 AM 1/1/0001|\r\n|Absolute time|300|12:05:00 AM 1/1/0001|\r\n|Relative Time|0, 300, 600|00:00:00, 00:05:00, 00:10:00|\r\n|Relative Time|300, 600, 900|00:00:00, 00:05:00, 00:10:00|\r\n\r\n### Relative time axis\r\nA relative time axis will show the time values with respect to the first data sample.\r\nBasically, the first datapoint from the points array will be considered time 00:00:00:00.\r\nIf the difference between two datapoints is small, the milliseconds will apear.\r\nOtherwise, the time representation will contain only the hour, minute and second.\r\nNOTE: If a formatString is provided, any date format will be ignored.\r\n\r\n### Absolute time axis\r\nThe absolute time representation contains, beside the hours, minutes and seconds\r\ncorresponding to the sample the date and year.\r\nThe value will be splitted on two rows, where the first row is the time and\r\nthe the second one the date in gregorian date format.\r\n*/\r\n\r\n(function($) {\r\n    'use strict';\r\n\r\n    var options = {\r\n        xaxis: {\r\n            timezone: null, // \"browser\" for local to the client or timezone for timezone-js\r\n            timeformat: null, // format string to use\r\n            twelveHourClock: false, // 12 or 24 time in time mode\r\n            monthNames: null, // list of names of months\r\n            // the UTC date in the form of \"total milliseconds from\" to use as the epoch for formatted values\r\n            // the default will format a date of \"0 milliseconds\" to be \"12:00:00 AM 01/01/0000\"\r\n            timeEpoch: -62135596800000\r\n        },\r\n        yaxis: {\r\n            // the UTC date in the form of \"total milliseconds from\" to use as the epoch for formatted values\r\n            // the default will format a date of \"0 milliseconds\" to be \"12:00:00 AM 01/01/0000\"\r\n            timeEpoch: -62135596800000\r\n        }\r\n    };\r\n\r\n    var floorInBase = $.plot.saturated.floorInBase;\r\n\r\n    // Returns a string with the date d formatted according to fmt.\r\n    // A subset of the Open Group's strftime format is supported.\r\n\r\n    function formatDate(d, fmt, monthNames, dayNames, showMilliseconds, axis) {\r\n        if (typeof d.strftime === \"function\") {\r\n            return d.strftime(fmt);\r\n        }\r\n\r\n        var leftPad = function(n, pad) {\r\n            n = \"\" + n;\r\n            if (pad) pad = \"\" + pad;\r\n            else pad = \"0\";\r\n\r\n            return n.length === 1 ? pad + n : n;\r\n        };\r\n\r\n        var padNTimes = function(n, pad, nTimes, right) {\r\n            n = \"\" + n;\r\n            if (pad) pad = \"\" + pad;\r\n            else pad = \"0\";\r\n\r\n            while (n.length < nTimes) {\r\n                if (right === true) {\r\n                    n = n + pad;\r\n                } else {\r\n                    n = pad + n;\r\n                }\r\n            }\r\n            return n;\r\n        };\r\n\r\n        function addMilliseconds(date, ms) {\r\n            var parts = date.split(' ');\r\n            if (parts.length > 1) {\r\n                var sufix = parts[parts.length - 1];\r\n                parts.splice(parts.length - 1, 1);\r\n\r\n                return parts.join(' ') + ms + ' ' + sufix;\r\n            } else {\r\n                return date + ms;\r\n            }\r\n        }\r\n\r\n        function formatLanguage() {\r\n            // horrible hack\r\n            if (window.NIEmbeddedBrowser && window.NIEmbeddedBrowser.formatLanguage) {\r\n                return window.NIEmbeddedBrowser.formatLanguage;\r\n            }\r\n\r\n            return navigator.locale || 'en-US';\r\n        }\r\n\r\n        // Returns the set of options to be used by an instance of Intl.DateTimeFormat\r\n        function getFormatterOptions(formatString) {\r\n            var options = {};\r\n            if (formatString === undefined || formatString === null) {\r\n                return options;\r\n            }\r\n\r\n            if (formatString.includes(\"#d\")) {\r\n                options['year'] = \"numeric\";\r\n                options['month'] = \"numeric\";\r\n                options['day'] = \"numeric\";\r\n            } else {\r\n                if (formatString.includes(\"yyyy\")) {\r\n                    options['year'] = \"numeric\";\r\n                } else if (formatString.includes(\"yy\")) {\r\n                    options['year'] = \"2-digit\";\r\n                }\r\n\r\n                options['month'] = \"numeric\";\r\n                options['day'] = \"numeric\";\r\n            }\r\n\r\n            if (formatString.includes(\"#T\")) {\r\n                options['hour'] = \"numeric\";\r\n                options['minute'] = \"numeric\";\r\n                options['second'] = \"numeric\";\r\n            } else { // format has either \"hh\" or \"HH\" (which always will show minutes)\r\n                options['hour'] = \"2-digit\";\r\n                options['minute'] = \"2-digit\";\r\n\r\n                if (formatString.includes(\"ss\")) {\r\n                    options['second'] = \"2-digit\";\r\n                }\r\n\r\n                options['hour12'] = formatString.includes(\"hh\");\r\n            }\r\n\r\n            return options;\r\n        }\r\n\r\n        function getFormattedDateString(date, formatString, formatOptions, locale) {\r\n            var showYear = formatString.includes(\"yy\") || formatString.includes(\"#d\");\r\n            if (!showYear && !formatString.includes(\"MM\")) {\r\n                return \"\";\r\n            }\r\n\r\n            // System format\r\n            if (formatString.includes(\"#d\")) {\r\n                return Intl.DateTimeFormat(locale, {year: 'numeric', month: 'numeric', day: 'numeric'}).format(date);\r\n            }\r\n\r\n            // Custom format\r\n            var formatParts = Intl.DateTimeFormat(locale, formatOptions).formatToParts(date);\r\n            var formatPartsTypeList = formatParts.map(({type, value}) => { return type; });\r\n            var dayIndex = formatPartsTypeList.indexOf('day');\r\n            var monthIndex = formatPartsTypeList.indexOf('month');\r\n            var dayMonthDelimiter = formatParts[(monthIndex + dayIndex) / 2].value;\r\n            var dayValue = leftPad(formatParts[dayIndex].value);\r\n            var monthValue = leftPad(formatParts[monthIndex].value);\r\n            var yearValue = showYear ? formatParts[formatPartsTypeList.indexOf('year')].value : \"\";\r\n\r\n            if (showYear) {\r\n                var padAmount = formatString.includes(\"yyyy\") ? 4 : 2;\r\n                yearValue = padNTimes(yearValue, \"0\", padAmount);\r\n            }\r\n\r\n            if (formatString.indexOf(\"dd\") < formatString.indexOf(\"MM\")) {\r\n                return dayValue + dayMonthDelimiter + monthValue + (showYear ? dayMonthDelimiter + yearValue : \"\");\r\n            } else {\r\n                return monthValue + dayMonthDelimiter + dayValue + (showYear ? dayMonthDelimiter + yearValue : \"\");\r\n            }\r\n        }\r\n\r\n        function getFractionalSecondsString(milliseconds, formatString, forceFractionalSeconds) {\r\n            var fractionalSecondsIndex = formatString.indexOf(\".S\");\r\n            var fractionalSecondsSearch = new RegExp(\".S+\", \"g\");\r\n            var fallbackDigitCount = forceFractionalSeconds ? 3 : 0;\r\n            var numberOfFractionalSeconds = fractionalSecondsIndex > 0 ? fractionalSecondsSearch.exec(formatString)[0].length - 1 : fallbackDigitCount;\r\n            var fractionalSecondsString = padNTimes(milliseconds, \"0\", 3);\r\n            fractionalSecondsString = padNTimes(fractionalSecondsString, \"0\", numberOfFractionalSeconds, true);\r\n            fractionalSecondsString = numberOfFractionalSeconds > 0 ? fractionalSecondsString.substring(0, numberOfFractionalSeconds) : \"\";\r\n            return fractionalSecondsString;\r\n        }\r\n\r\n        function getFormattedTimeString(date, formatString, formatOptions, locale) {\r\n            var showTime = formatString.includes(\"hh\") || formatString.includes(\"HH\") || formatString.includes(\"#T\");\r\n            if (!showTime) {\r\n                return \"\";\r\n            }\r\n\r\n            var fractionalSecondsString = getFractionalSecondsString(date.getMilliseconds(), formatString);\r\n\r\n            // System format\r\n            if (formatString.includes(\"#T\")) {\r\n                var formattedDate = Intl.DateTimeFormat(locale, {hour: 'numeric', minute: 'numeric', second: 'numeric'}).format(date);\r\n                if (fractionalSecondsString !== \"\") {\r\n                    var lastDigitSearch = new RegExp(\"[0-9](?!.*[0-9])\", \"g\");\r\n                    lastDigitSearch.test(formattedDate);\r\n                    formattedDate = [formattedDate.slice(0, lastDigitSearch.lastIndex), \".\" + fractionalSecondsString, formattedDate.slice(lastDigitSearch.lastIndex)].join('');\r\n                }\r\n\r\n                return formattedDate;\r\n            }\r\n\r\n            // Custom format\r\n            var formatParts = Intl.DateTimeFormat(locale, formatOptions).formatToParts(date);\r\n            var formatPartsTypeList = formatParts.map(({type, value}) => { return type.toLowerCase(); });\r\n            var hourIndex = formatPartsTypeList.indexOf('hour');\r\n            var minuteIndex = formatPartsTypeList.indexOf('minute');\r\n            var hourMinuteDelimiter = formatParts[(hourIndex + minuteIndex) / 2].value;\r\n            var hourValue = leftPad(formatParts[hourIndex].value);\r\n            var minuteValue = leftPad(formatParts[minuteIndex].value);\r\n            var showSeconds = formatString.includes(\"ss\");\r\n            var secondValue = showSeconds ? leftPad(formatParts[formatPartsTypeList.indexOf('second')].value) : \"\";\r\n            var dayPeriod = formatOptions['hour12'] === true ? formatParts[formatPartsTypeList.indexOf('dayperiod')].value : \"\";\r\n            return hourValue +\r\n                   hourMinuteDelimiter +\r\n                   minuteValue +\r\n                   (showSeconds ? hourMinuteDelimiter + secondValue : \"\") +\r\n                   (showSeconds && fractionalSecondsString.length > 0 ? \".\" + fractionalSecondsString : \"\") +\r\n                   (dayPeriod !== \"\" ? \" \" + dayPeriod : \"\");\r\n        }\r\n\r\n        function getFormattedDateTimeString(date, formatString) {\r\n            var locale = navigator.language || navigator.browserLanguage || navigator.languages[0];\r\n            var formatOptions = getFormatterOptions(formatString);\r\n            var dateString = getFormattedDateString(date, formatString, formatOptions, locale);\r\n            var timeString = getFormattedTimeString(date, formatString, formatOptions, locale);\r\n            return timeString + (dateString !== \"\" && timeString !== \"\" ? \"<br>\" : \"\") + dateString;\r\n        }\r\n\r\n        function toAbsoluteTimeStr(date, showMilliseconds, formatString, timeEpoch) {\r\n            var unixToAbsoluteEpochDiff = 62135596800000,\r\n                minDateValue = -8640000000000000,\r\n                d = date.valueOf(),\r\n                ms = Math.floor(d % 1000);\r\n\r\n            if (ms < 0) {\r\n                ms = 1000 + ms;\r\n            }\r\n\r\n            if (date < minDateValue + unixToAbsoluteEpochDiff) {\r\n                date = minDateValue + unixToAbsoluteEpochDiff;\r\n            }\r\n\r\n            var gregorianDate = makeUtcWrapper(new Date(date.valueOf() + timeEpoch)).date;\r\n\r\n            var time;\r\n            if (formatString !== \"\") {\r\n                time = getFormattedDateTimeString(gregorianDate, formatString);\r\n            } else {\r\n                var msString = showMilliseconds ? '.' + padNTimes(ms, '0', 3) : '';\r\n                time = Globalize.format(gregorianDate, \"T\", formatLanguage());\r\n                time = addMilliseconds(time, msString) + '<br>' + Globalize.format(gregorianDate, \"d\", formatLanguage());\r\n            }\r\n\r\n            return time;\r\n        }\r\n\r\n        function toRelativeTimeStr(date, showMilliseconds, formatString) {\r\n            var result = '';\r\n\r\n            var dateValue = date.valueOf(),\r\n                d = dateValue - (axis.valueOfFirstData === undefined ? 0 : axis.valueOfFirstData);\r\n\r\n            if (d < 0) {\r\n                d = -d;\r\n                result += '-';\r\n            }\r\n            var dateInSeconds = Math.floor(d / 1000);\r\n            var milliseconds = Math.floor(d % 1000);\r\n            var seconds = dateInSeconds % 60;\r\n            var dateInMinutes = Math.floor(dateInSeconds / 60);\r\n            var minutes = dateInMinutes % 60;\r\n            var dateInHours = Math.floor(dateInMinutes / 60);\r\n            var hours = dateInHours % 24;\r\n            var days = Math.floor(dateInHours / 24);\r\n            var showSeconds = formatString === \"\" || formatString.includes(\"ss\");\r\n\r\n            if (days && formatString === \"\") {\r\n                result += days + '.';\r\n            }\r\n\r\n            result += leftPad(hours) + ':';\r\n            result += leftPad(minutes);\r\n            if (showSeconds) {\r\n                result += (\":\" + leftPad(seconds));\r\n                var fractionalSecondsString = getFractionalSecondsString(milliseconds, formatString, showMilliseconds);\r\n                result += (showMilliseconds || fractionalSecondsString.length > 0) ? '.' + fractionalSecondsString : \"\";\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        var r = [];\r\n        var escape = false;\r\n\r\n        if (!monthNames) {\r\n            monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n        }\r\n\r\n        if (!dayNames) {\r\n            dayNames = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n        }\r\n\r\n        for (var i = 0; i < fmt.length; ++i) {\r\n            var c = fmt.charAt(i),\r\n                localDateValue = d.date || d.getDate();\r\n            if (escape) {\r\n                var timeFormatStartIndex = fmt.indexOf('<');\r\n                var timeFormatEndIndex = fmt.indexOf('>');\r\n                var timeFormat = timeFormatStartIndex > 0 ? fmt.substring(timeFormatStartIndex + 1, timeFormatEndIndex) : \"\";\r\n                if (timeFormatStartIndex > 0) {\r\n                    i += (timeFormat.length + 2);\r\n                }\r\n\r\n                switch (c) {\r\n                    case 'r': c = toRelativeTimeStr(localDateValue, showMilliseconds, timeFormat); break;\r\n                    case 'A': c = toAbsoluteTimeStr(localDateValue, showMilliseconds, timeFormat, axis.options.timeEpoch); break;\r\n                }\r\n                r.push(c);\r\n                escape = false;\r\n            } else {\r\n                if (c === \"%\") {\r\n                    escape = true;\r\n                } else {\r\n                    r.push(c);\r\n                }\r\n            }\r\n        }\r\n\r\n        return r.join(\"\");\r\n    }\r\n\r\n    // To have a consistent view of time-based data independent of which time\r\n    // zone the client happens to be in we need a date-like object independent\r\n    // of time zones.  This is done through a wrapper that only calls the UTC\r\n    // versions of the accessor methods.\r\n\r\n    function makeUtcWrapper(d) {\r\n        function addProxyMethod(sourceObj, sourceMethod, targetObj, targetMethod) {\r\n            sourceObj[sourceMethod] = function() {\r\n                return targetObj[targetMethod].apply(targetObj, arguments);\r\n            };\r\n        }\r\n\r\n        var utc = {\r\n            date: d\r\n        };\r\n\r\n        // support strftime, if found\r\n        if (d.strftime !== undefined) {\r\n            addProxyMethod(utc, \"strftime\", d, \"strftime\");\r\n        }\r\n\r\n        addProxyMethod(utc, \"getTime\", d, \"getTime\");\r\n        addProxyMethod(utc, \"setTime\", d, \"setTime\");\r\n\r\n        var props = [\"Date\", \"Day\", \"FullYear\", \"Hours\", \"Milliseconds\", \"Minutes\", \"Month\", \"Seconds\"];\r\n\r\n        for (var p = 0; p < props.length; p++) {\r\n            addProxyMethod(utc, \"get\" + props[p], d, \"getUTC\" + props[p]);\r\n            addProxyMethod(utc, \"set\" + props[p], d, \"setUTC\" + props[p]);\r\n        }\r\n\r\n        return utc;\r\n    }\r\n\r\n    // select time zone strategy.  This returns a date-like object tied to the\r\n    // desired timezone\r\n    function dateGenerator(ts, opts) {\r\n        var maxDateValue = 8640000000000000;\r\n\r\n        ts *= 1000;\r\n\r\n        if (ts > maxDateValue) {\r\n            ts = maxDateValue;\r\n        } else if (ts < -maxDateValue) {\r\n            ts = -maxDateValue;\r\n        }\r\n\r\n        if (opts.timezone === \"browser\") {\r\n            return new Date(ts);\r\n        } else if (!opts.timezone || opts.timezone === \"utc\") {\r\n            return makeUtcWrapper(new Date(ts));\r\n        } else if (typeof timezoneJS !== \"undefined\" && typeof timezoneJS.Date !== \"undefined\") {\r\n            var d = new timezoneJS.Date();\r\n            // timezone-js is fickle, so be sure to set the time zone before\r\n            // setting the time.\r\n            d.setTimezone(opts.timezone);\r\n            d.setTime(ts);\r\n            return d;\r\n        } else {\r\n            return makeUtcWrapper(new Date(ts));\r\n        }\r\n    }\r\n\r\n    // map of app. size of time units in milliseconds\r\n    var timeUnitSize = {\r\n        \"millisecond\": 0.001,\r\n        \"second\": 1,\r\n        \"minute\": 60,\r\n        \"hour\": 60 * 60,\r\n        \"day\": 24 * 60 * 60,\r\n        \"month\": 30 * 24 * 60 * 60,\r\n        \"quarter\": 3 * 30 * 24 * 60 * 60,\r\n        \"year\": 365.2425 * 24 * 60 * 60\r\n    };\r\n\r\n    // the allowed tick sizes, after 1 year we use\r\n    // an integer algorithm\r\n\r\n    var baseSpec = [\r\n        [1, \"millisecond\"], [2, \"millisecond\"], [5, \"millisecond\"], [10, \"millisecond\"],\r\n        [25, \"millisecond\"], [50, \"millisecond\"], [100, \"millisecond\"], [250, \"millisecond\"], [500, \"millisecond\"],\r\n        [1, \"second\"], [2, \"second\"], [5, \"second\"], [10, \"second\"],\r\n        [30, \"second\"],\r\n        [1, \"minute\"], [2, \"minute\"], [5, \"minute\"], [10, \"minute\"],\r\n        [30, \"minute\"],\r\n        [1, \"hour\"], [2, \"hour\"], [4, \"hour\"],\r\n        [8, \"hour\"], [12, \"hour\"],\r\n        [1, \"day\"], [2, \"day\"], [3, \"day\"],\r\n        [0.25, \"month\"], [0.5, \"month\"], [1, \"month\"],\r\n        [2, \"month\"]\r\n    ];\r\n\r\n    // we don't know which variant(s) we'll need yet, but generating both is\r\n    // cheap\r\n\r\n    var specMonths = baseSpec.concat([[3, \"month\"], [6, \"month\"],\r\n        [1, \"year\"]]);\r\n    var specQuarters = baseSpec.concat([[1, \"quarter\"], [2, \"quarter\"],\r\n        [1, \"year\"]]);\r\n\r\n    //function used for relative time axis to compute the first data point from which the values are starting\r\n    function updateAxisFirstData(plot, axis) {\r\n        var plotData = plot.getData();\r\n        if (plotData.length > 0 && (plotData[0].data.length > 0 || plotData[0].datapoints.points.length > 0)) {\r\n            var i, firstPlotData, minFirstPlotData, datapoints = plotData[0].datapoints;\r\n            if (datapoints.points.length !== 0) {\r\n                if (plotData[0].xaxis === axis || plotData[0].yaxis === axis) {\r\n                    minFirstPlotData = axis.direction === \"x\" ? datapoints.points[0] : datapoints.points[1];\r\n                } else { minFirstPlotData = axis.max; }\r\n            } else { minFirstPlotData = axis.min; }\r\n\r\n            for (i = 1; i < plotData.length; i++) {\r\n                datapoints = plotData[i].datapoints;\r\n                if (plotData[i].xaxis === axis || plotData[i].yaxis === axis) {\r\n                    firstPlotData = axis.direction === \"x\" ? datapoints.points[0] : datapoints.points[1];\r\n                    if (minFirstPlotData > firstPlotData) {\r\n                        minFirstPlotData = firstPlotData;\r\n                    }\r\n                }\r\n            }\r\n\r\n            axis.valueOfFirstData = minFirstPlotData * 1000;\r\n        }\r\n    }\r\n\r\n    function init(plot) {\r\n        plot.hooks.processOptions.push(function (plot) {\r\n            $.each(plot.getAxes(), function(axisName, axis) {\r\n                var opts = axis.options;\r\n                if (opts.format === \"time\") {\r\n                    axis.tickGenerator = function(axis) {\r\n                        var ticks = [],\r\n                            d = dateGenerator(axis.min, opts),\r\n                            minSize = 0;\r\n\r\n                        if (axis.valueOfFirstData === undefined) {\r\n                            updateAxisFirstData(plot, axis);\r\n                        }\r\n\r\n                        // make quarter use a possibility if quarters are\r\n                        // mentioned in either of these options\r\n                        var spec = (opts.tickSize && opts.tickSize[1] ===\r\n                            \"quarter\") ||\r\n                            (opts.minTickSize && opts.minTickSize[1] ===\r\n                            \"quarter\") ? specQuarters : specMonths;\r\n\r\n                        if (opts.minTickSize !== null && opts.minTickSize !== undefined) {\r\n                            if (typeof opts.tickSize === \"number\") {\r\n                                minSize = opts.tickSize;\r\n                            } else {\r\n                                minSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];\r\n                            }\r\n                        }\r\n\r\n                        var delta = axis.delta * 2;\r\n                        for (var i = 0; i < spec.length - 1; ++i) {\r\n                            if (delta < (spec[i][0] * timeUnitSize[spec[i][1]] +\r\n                                spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2 &&\r\n                                spec[i][0] * timeUnitSize[spec[i][1]] >= minSize) {\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        var size = spec[i][0];\r\n                        var unit = spec[i][1];\r\n                        // special-case the possibility of several years\r\n                        if (unit === \"year\") {\r\n                            // if given a minTickSize in years, just use it,\r\n                            // ensuring that it's an integer\r\n\r\n                            if (opts.minTickSize !== null && opts.minTickSize !== undefined && opts.minTickSize[1] === \"year\") {\r\n                                size = Math.floor(opts.minTickSize[0]);\r\n                            } else {\r\n                                var magn = Math.pow(10, Math.floor(Math.log(axis.delta / timeUnitSize.year) / Math.LN10));\r\n                                var norm = (axis.delta / timeUnitSize.year) / magn;\r\n\r\n                                if (norm < 1.5) {\r\n                                    size = 1;\r\n                                } else if (norm < 3) {\r\n                                    size = 2;\r\n                                } else if (norm < 7.5) {\r\n                                    size = 5;\r\n                                } else {\r\n                                    size = 10;\r\n                                }\r\n\r\n                                size *= magn;\r\n                            }\r\n\r\n                            // minimum size for years is 1\r\n\r\n                            if (size < 1) {\r\n                                size = 1;\r\n                            }\r\n                        }\r\n\r\n                        axis.tickSize = opts.tickSize || [size, unit];\r\n                        var tickSize = axis.tickSize[0];\r\n                        unit = axis.tickSize[1];\r\n\r\n                        var step = tickSize * timeUnitSize[unit];\r\n\r\n                        if (unit === \"millisecond\") {\r\n                            d.setMilliseconds(floorInBase(d.getMilliseconds(), tickSize));\r\n                        } else if (unit === \"second\") {\r\n                            d.setSeconds(floorInBase(d.getSeconds(), tickSize));\r\n                        } else if (unit === \"minute\") {\r\n                            d.setMinutes(floorInBase(d.getMinutes(), tickSize));\r\n                        } else if (unit === \"hour\") {\r\n                            d.setHours(floorInBase(d.getHours(), tickSize));\r\n                        } else if (unit === \"month\") {\r\n                            d.setMonth(floorInBase(d.getMonth(), tickSize));\r\n                        } else if (unit === \"quarter\") {\r\n                            d.setMonth(3 * floorInBase(d.getMonth() / 3,\r\n                                tickSize));\r\n                        } else if (unit === \"year\") {\r\n                            d.setFullYear(floorInBase(d.getFullYear(), tickSize));\r\n                        }\r\n\r\n                        // reset smaller components\r\n\r\n                        if (step >= timeUnitSize.second) {\r\n                            d.setMilliseconds(0);\r\n                        }\r\n\r\n                        if (step >= timeUnitSize.minute) {\r\n                            d.setSeconds(0);\r\n                        }\r\n                        if (step >= timeUnitSize.hour) {\r\n                            d.setMinutes(0);\r\n                        }\r\n                        if (step >= timeUnitSize.day) {\r\n                            d.setHours(0);\r\n                        }\r\n                        if (step >= timeUnitSize.day * 4) {\r\n                            d.setDate(1);\r\n                        }\r\n                        if (step >= timeUnitSize.month * 2) {\r\n                            d.setMonth(floorInBase(d.getMonth(), 3));\r\n                        }\r\n                        if (step >= timeUnitSize.quarter * 2) {\r\n                            d.setMonth(floorInBase(d.getMonth(), 6));\r\n                        }\r\n                        if (step >= timeUnitSize.year) {\r\n                            d.setMonth(0);\r\n                        }\r\n\r\n                        var carry = 0;\r\n                        var v = Number.NaN;\r\n                        var v1000;\r\n                        var prev;\r\n                        do {\r\n                            prev = v;\r\n                            v1000 = d.getTime();\r\n                            v = v1000 / 1000;\r\n                            ticks.push(v);\r\n\r\n                            if (unit === \"month\" || unit === \"quarter\") {\r\n                                if (tickSize < 1) {\r\n                                    // a bit complicated - we'll divide the\r\n                                    // month/quarter up but we need to take\r\n                                    // care of fractions so we don't end up in\r\n                                    // the middle of a day\r\n                                    d.setDate(1);\r\n                                    var start = d.getTime();\r\n                                    d.setMonth(d.getMonth() +\r\n                                        (unit === \"quarter\" ? 3 : 1));\r\n                                    var end = d.getTime();\r\n                                    d.setTime((v + carry * timeUnitSize.hour + (end - start) * tickSize));\r\n                                    carry = d.getHours();\r\n                                    d.setHours(0);\r\n                                } else {\r\n                                    d.setMonth(d.getMonth() +\r\n                                        tickSize * (unit === \"quarter\" ? 3 : 1));\r\n                                }\r\n                            } else if (unit === \"year\") {\r\n                                d.setFullYear(d.getFullYear() + tickSize);\r\n                            } else {\r\n                                d.setTime((v + step) * 1000);\r\n                            }\r\n                        } while (v < axis.max && v !== prev);\r\n\r\n                        return ticks;\r\n                    };\r\n\r\n                    axis.tickFormatter = function (v, axis) {\r\n                        var d = dateGenerator(v, axis.options);\r\n                        // first check global format\r\n                        if (opts.timeformat !== null && opts.timeformat !== undefined) {\r\n                            return formatDate(d, opts.timeformat, opts.monthNames, opts.dayNames, axis.tickSize[1] === 'millisecond', axis);\r\n                        }\r\n                    };\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'time',\r\n        version: '1.0'\r\n    });\r\n\r\n    // Time-axis support used to be in Flot core, which exposed the\r\n    // formatDate function on the plot object.  Various plugins depend\r\n    // on the function, so we need to re-expose it here.\r\n\r\n    $.plot.formatDate = formatDate;\r\n    $.plot.dateGenerator = dateGenerator;\r\n})(jQuery);\r\n","/*\r\nAxis label plugin for engineering-flot\r\n\r\nDerived from:\r\nAxis Labels Plugin for flot.\r\nhttp://github.com/markrcote/flot-axislabels\r\n\r\nOriginal code is Copyright (c) 2010 Xuan Luo.\r\nOriginal code was released under the GPLv3 license by Xuan Luo, September 2010.\r\nOriginal code was rereleased under the MIT license by Xuan Luo, April 2012.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining\r\na copy of this software and associated documentation files (the\r\n\"Software\"), to deal in the Software without restriction, including\r\nwithout limitation the rights to use, copy, modify, merge, publish,\r\ndistribute, sublicense, and/or sell copies of the Software, and to\r\npermit persons to whom the Software is furnished to do so, subject to\r\nthe following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be\r\nincluded in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n\r\n(function($) {\r\n    \"use strict\";\r\n\r\n    var options = {\r\n        axisLabels: {\r\n            show: true\r\n        }\r\n    };\r\n\r\n    function AxisLabel(axisName, position, padding, placeholder, axisLabel, surface) {\r\n        this.axisName = axisName;\r\n        this.position = position;\r\n        this.padding = padding;\r\n        this.placeholder = placeholder;\r\n        this.axisLabel = axisLabel;\r\n        this.surface = surface;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.elem = null;\r\n    }\r\n\r\n    AxisLabel.prototype.calculateSize = function() {\r\n        var axisId = this.axisName + 'Label',\r\n            layerId = axisId + 'Layer',\r\n            className = axisId + ' axisLabels';\r\n\r\n        var info = this.surface.getTextInfo(layerId, this.axisLabel, className);\r\n        this.labelWidth = info.width;\r\n        this.labelHeight = info.height;\r\n\r\n        if (this.position === 'left' || this.position === 'right') {\r\n            this.width = this.labelHeight + this.padding;\r\n            this.height = 0;\r\n        } else {\r\n            this.width = 0;\r\n            this.height = this.labelHeight + this.padding;\r\n        }\r\n    };\r\n\r\n    AxisLabel.prototype.transforms = function(degrees, x, y, svgLayer) {\r\n        var transforms = [], translate, rotate;\r\n        if (x !== 0 || y !== 0) {\r\n            translate = svgLayer.createSVGTransform();\r\n            translate.setTranslate(x, y);\r\n            transforms.push(translate);\r\n        }\r\n        if (degrees !== 0) {\r\n            rotate = svgLayer.createSVGTransform();\r\n            var centerX = Math.round(this.labelWidth / 2),\r\n                centerY = 0;\r\n            rotate.setRotate(degrees, centerX, centerY);\r\n            transforms.push(rotate);\r\n        }\r\n\r\n        return transforms;\r\n    };\r\n\r\n    AxisLabel.prototype.calculateOffsets = function(box) {\r\n        var offsets = {\r\n            x: 0,\r\n            y: 0,\r\n            degrees: 0\r\n        };\r\n        if (this.position === 'bottom') {\r\n            offsets.x = box.left + box.width / 2 - this.labelWidth / 2;\r\n            offsets.y = box.top + box.height - this.labelHeight;\r\n        } else if (this.position === 'top') {\r\n            offsets.x = box.left + box.width / 2 - this.labelWidth / 2;\r\n            offsets.y = box.top;\r\n        } else if (this.position === 'left') {\r\n            offsets.degrees = -90;\r\n            offsets.x = box.left - this.labelWidth / 2;\r\n            offsets.y = box.height / 2 + box.top;\r\n        } else if (this.position === 'right') {\r\n            offsets.degrees = 90;\r\n            offsets.x = box.left + box.width - this.labelWidth / 2;\r\n            offsets.y = box.height / 2 + box.top;\r\n        }\r\n        offsets.x = Math.round(offsets.x);\r\n        offsets.y = Math.round(offsets.y);\r\n\r\n        return offsets;\r\n    };\r\n\r\n    AxisLabel.prototype.cleanup = function() {\r\n        var axisId = this.axisName + 'Label',\r\n            layerId = axisId + 'Layer',\r\n            className = axisId + ' axisLabels';\r\n        this.surface.removeText(layerId, 0, 0, this.axisLabel, className);\r\n    };\r\n\r\n    AxisLabel.prototype.draw = function(box) {\r\n        var axisId = this.axisName + 'Label',\r\n            layerId = axisId + 'Layer',\r\n            className = axisId + ' axisLabels',\r\n            offsets = this.calculateOffsets(box),\r\n            style = {\r\n                position: 'absolute',\r\n                bottom: '',\r\n                right: '',\r\n                display: 'inline-block',\r\n                'white-space': 'nowrap'\r\n            };\r\n\r\n        var layer = this.surface.getSVGLayer(layerId);\r\n        var transforms = this.transforms(offsets.degrees, offsets.x, offsets.y, layer.parentNode);\r\n\r\n        this.surface.addText(layerId, 0, 0, this.axisLabel, className, undefined, undefined, undefined, undefined, transforms);\r\n        this.surface.render();\r\n        Object.keys(style).forEach(function(key) {\r\n            layer.style[key] = style[key];\r\n        });\r\n    };\r\n\r\n    function init(plot) {\r\n        plot.hooks.processOptions.push(function(plot, options) {\r\n            if (!options.axisLabels.show) {\r\n                return;\r\n            }\r\n\r\n            var axisLabels = {};\r\n            var defaultPadding = 2; // padding between axis and tick labels\r\n\r\n            plot.hooks.axisReserveSpace.push(function(plot, axis) {\r\n                var opts = axis.options;\r\n                var axisName = axis.direction + axis.n;\r\n\r\n                axis.labelHeight += axis.boxPosition.centerY;\r\n                axis.labelWidth += axis.boxPosition.centerX;\r\n\r\n                if (!opts || !opts.axisLabel || !axis.show) {\r\n                    return;\r\n                }\r\n\r\n                var padding = opts.axisLabelPadding === undefined\r\n                    ? defaultPadding\r\n                    : opts.axisLabelPadding;\r\n\r\n                var axisLabel = axisLabels[axisName];\r\n                if (!axisLabel) {\r\n                    axisLabel = new AxisLabel(axisName,\r\n                        opts.position, padding,\r\n                        plot.getPlaceholder()[0], opts.axisLabel, plot.getSurface());\r\n                    axisLabels[axisName] = axisLabel;\r\n                }\r\n\r\n                axisLabel.calculateSize();\r\n\r\n                // Incrementing the sizes of the tick labels.\r\n                axis.labelHeight += axisLabel.height;\r\n                axis.labelWidth += axisLabel.width;\r\n            });\r\n\r\n            // TODO - use the drawAxis hook\r\n            plot.hooks.draw.push(function(plot, ctx) {\r\n                $.each(plot.getAxes(), function(flotAxisName, axis) {\r\n                    var opts = axis.options;\r\n                    if (!opts || !opts.axisLabel || !axis.show) {\r\n                        return;\r\n                    }\r\n\r\n                    var axisName = axis.direction + axis.n;\r\n                    axisLabels[axisName].draw(axis.box);\r\n                });\r\n            });\r\n\r\n            plot.hooks.shutdown.push(function(plot, eventHolder) {\r\n                for (var axisName in axisLabels) {\r\n                    axisLabels[axisName].cleanup();\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'axisLabels',\r\n        version: '3.0'\r\n    });\r\n})(jQuery);\r\n","/* Flot plugin for selecting regions of a plot.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\nThe plugin supports these options:\r\n\r\nselection: {\r\n    mode: null or \"x\" or \"y\" or \"xy\" or \"smart\",\r\n    color: color,\r\n    shape: \"round\" or \"miter\" or \"bevel\",\r\n    minSize: number of pixels\r\n}\r\n\r\nSelection support is enabled by setting the mode to one of \"x\", \"y\" or \"xy\".\r\nIn \"x\" mode, the user will only be able to specify the x range, similarly for\r\n\"y\" mode. For \"xy\", the selection becomes a rectangle where both ranges can be\r\nspecified. \"color\" is color of the selection (if you need to change the color\r\nlater on, you can get to it with plot.getOptions().selection.color). \"shape\"\r\nis the shape of the corners of the selection.\r\n\r\n\"minSize\" is the minimum size a selection can be in pixels. This value can\r\nbe customized to determine the smallest size a selection can be and still\r\nhave the selection rectangle be displayed. When customizing this value, the\r\nfact that it refers to pixels, not axis units must be taken into account.\r\nThus, for example, if there is a bar graph in time mode with BarWidth set to 1\r\nminute, setting \"minSize\" to 1 will not make the minimum selection size 1\r\nminute, but rather 1 pixel. Note also that setting \"minSize\" to 0 will prevent\r\n\"plotunselected\" events from being fired when the user clicks the mouse without\r\ndragging.\r\n\r\nWhen selection support is enabled, a \"plotselected\" event will be emitted on\r\nthe DOM element you passed into the plot function. The event handler gets a\r\nparameter with the ranges selected on the axes, like this:\r\n\r\n    placeholder.bind( \"plotselected\", function( event, ranges ) {\r\n        alert(\"You selected \" + ranges.xaxis.from + \" to \" + ranges.xaxis.to)\r\n        // similar for yaxis - with multiple axes, the extra ones are in\r\n        // x2axis, x3axis, ...\r\n    });\r\n\r\nThe \"plotselected\" event is only fired when the user has finished making the\r\nselection. A \"plotselecting\" event is fired during the process with the same\r\nparameters as the \"plotselected\" event, in case you want to know what's\r\nhappening while it's happening,\r\n\r\nA \"plotunselected\" event with no arguments is emitted when the user clicks the\r\nmouse to remove the selection. As stated above, setting \"minSize\" to 0 will\r\ndestroy this behavior.\r\n\r\nThe plugin allso adds the following methods to the plot object:\r\n\r\n- setSelection( ranges, preventEvent )\r\n\r\n  Set the selection rectangle. The passed in ranges is on the same form as\r\n  returned in the \"plotselected\" event. If the selection mode is \"x\", you\r\n  should put in either an xaxis range, if the mode is \"y\" you need to put in\r\n  an yaxis range and both xaxis and yaxis if the selection mode is \"xy\", like\r\n  this:\r\n\r\n    setSelection({ xaxis: { from: 0, to: 10 }, yaxis: { from: 40, to: 60 } });\r\n\r\n  setSelection will trigger the \"plotselected\" event when called. If you don't\r\n  want that to happen, e.g. if you're inside a \"plotselected\" handler, pass\r\n  true as the second parameter. If you are using multiple axes, you can\r\n  specify the ranges on any of those, e.g. as x2axis/x3axis/... instead of\r\n  xaxis, the plugin picks the first one it sees.\r\n\r\n- clearSelection( preventEvent )\r\n\r\n  Clear the selection rectangle. Pass in true to avoid getting a\r\n  \"plotunselected\" event.\r\n\r\n- getSelection()\r\n\r\n  Returns the current selection in the same format as the \"plotselected\"\r\n  event. If there's currently no selection, the function returns null.\r\n\r\n*/\r\n\r\n(function ($) {\r\n    function init(plot) {\r\n        var selection = {\r\n            first: {x: -1, y: -1},\r\n            second: {x: -1, y: -1},\r\n            show: false,\r\n            currentMode: 'xy',\r\n            active: false\r\n        };\r\n\r\n        var SNAPPING_CONSTANT = $.plot.uiConstants.SNAPPING_CONSTANT;\r\n\r\n        // FIXME: The drag handling implemented here should be\r\n        // abstracted out, there's some similar code from a library in\r\n        // the navigation plugin, this should be massaged a bit to fit\r\n        // the Flot cases here better and reused. Doing this would\r\n        // make this plugin much slimmer.\r\n        var savedhandlers = {};\r\n\r\n        var mouseUpHandler = null;\r\n\r\n        function onMouseMove(e) {\r\n            if (selection.active) {\r\n                updateSelection(e);\r\n\r\n                plot.getPlaceholder().trigger(\"plotselecting\", [ getSelection() ]);\r\n            }\r\n        }\r\n\r\n        function onMouseDown(e) {\r\n            // only accept left-click\r\n            if (e.which !== 1) return;\r\n\r\n            // cancel out any text selections\r\n            document.body.focus();\r\n\r\n            // prevent text selection and drag in old-school browsers\r\n            if (document.onselectstart !== undefined && savedhandlers.onselectstart == null) {\r\n                savedhandlers.onselectstart = document.onselectstart;\r\n                document.onselectstart = function () { return false; };\r\n            }\r\n            if (document.ondrag !== undefined && savedhandlers.ondrag == null) {\r\n                savedhandlers.ondrag = document.ondrag;\r\n                document.ondrag = function () { return false; };\r\n            }\r\n\r\n            setSelectionPos(selection.first, e);\r\n\r\n            selection.active = true;\r\n\r\n            // this is a bit silly, but we have to use a closure to be\r\n            // able to whack the same handler again\r\n            mouseUpHandler = function (e) { onMouseUp(e); };\r\n\r\n            $(document).one(\"mouseup\", mouseUpHandler);\r\n        }\r\n\r\n        function onMouseUp(e) {\r\n            mouseUpHandler = null;\r\n\r\n            // revert drag stuff for old-school browsers\r\n            if (document.onselectstart !== undefined) {\r\n                document.onselectstart = savedhandlers.onselectstart;\r\n            }\r\n\r\n            if (document.ondrag !== undefined) {\r\n                document.ondrag = savedhandlers.ondrag;\r\n            }\r\n\r\n            // no more dragging\r\n            selection.active = false;\r\n            updateSelection(e);\r\n\r\n            if (selectionIsSane()) {\r\n                triggerSelectedEvent();\r\n            } else {\r\n                // this counts as a clear\r\n                plot.getPlaceholder().trigger(\"plotunselected\", [ ]);\r\n                plot.getPlaceholder().trigger(\"plotselecting\", [ null ]);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        function getSelection() {\r\n            if (!selectionIsSane()) return null;\r\n\r\n            if (!selection.show) return null;\r\n\r\n            var r = {},\r\n                c1 = {x: selection.first.x, y: selection.first.y},\r\n                c2 = {x: selection.second.x, y: selection.second.y};\r\n\r\n            if (selectionDirection(plot) === 'x') {\r\n                c1.y = 0;\r\n                c2.y = plot.height();\r\n            }\r\n\r\n            if (selectionDirection(plot) === 'y') {\r\n                c1.x = 0;\r\n                c2.x = plot.width();\r\n            }\r\n\r\n            $.each(plot.getAxes(), function (name, axis) {\r\n                if (axis.used) {\r\n                    var p1 = axis.c2p(c1[axis.direction]), p2 = axis.c2p(c2[axis.direction]);\r\n                    r[name] = { from: Math.min(p1, p2), to: Math.max(p1, p2) };\r\n                }\r\n            });\r\n            return r;\r\n        }\r\n\r\n        function triggerSelectedEvent() {\r\n            var r = getSelection();\r\n\r\n            plot.getPlaceholder().trigger(\"plotselected\", [ r ]);\r\n\r\n            // backwards-compat stuff, to be removed in future\r\n            if (r.xaxis && r.yaxis) {\r\n                plot.getPlaceholder().trigger(\"selected\", [ { x1: r.xaxis.from, y1: r.yaxis.from, x2: r.xaxis.to, y2: r.yaxis.to } ]);\r\n            }\r\n        }\r\n\r\n        function clamp(min, value, max) {\r\n            return value < min ? min : (value > max ? max : value);\r\n        }\r\n\r\n        function selectionDirection(plot) {\r\n            var o = plot.getOptions();\r\n\r\n            if (o.selection.mode === 'smart') {\r\n                return selection.currentMode;\r\n            } else {\r\n                return o.selection.mode;\r\n            }\r\n        }\r\n\r\n        function updateMode(pos) {\r\n            if (selection.first) {\r\n                var delta = {\r\n                    x: pos.x - selection.first.x,\r\n                    y: pos.y - selection.first.y\r\n                };\r\n\r\n                if (Math.abs(delta.x) < SNAPPING_CONSTANT) {\r\n                    selection.currentMode = 'y';\r\n                } else if (Math.abs(delta.y) < SNAPPING_CONSTANT) {\r\n                    selection.currentMode = 'x';\r\n                } else {\r\n                    selection.currentMode = 'xy';\r\n                }\r\n            }\r\n        }\r\n\r\n        function setSelectionPos(pos, e) {\r\n            var offset = plot.getPlaceholder().offset();\r\n            var plotOffset = plot.getPlotOffset();\r\n            pos.x = clamp(0, e.pageX - offset.left - plotOffset.left, plot.width());\r\n            pos.y = clamp(0, e.pageY - offset.top - plotOffset.top, plot.height());\r\n\r\n            if (pos !== selection.first) updateMode(pos);\r\n\r\n            if (selectionDirection(plot) === \"y\") {\r\n                pos.x = pos === selection.first ? 0 : plot.width();\r\n            }\r\n\r\n            if (selectionDirection(plot) === \"x\") {\r\n                pos.y = pos === selection.first ? 0 : plot.height();\r\n            }\r\n        }\r\n\r\n        function updateSelection(pos) {\r\n            if (pos.pageX == null) return;\r\n\r\n            setSelectionPos(selection.second, pos);\r\n            if (selectionIsSane()) {\r\n                selection.show = true;\r\n                plot.triggerRedrawOverlay();\r\n            } else clearSelection(true);\r\n        }\r\n\r\n        function clearSelection(preventEvent) {\r\n            if (selection.show) {\r\n                selection.show = false;\r\n                selection.currentMode = '';\r\n                plot.triggerRedrawOverlay();\r\n                if (!preventEvent) {\r\n                    plot.getPlaceholder().trigger(\"plotunselected\", [ ]);\r\n                }\r\n            }\r\n        }\r\n\r\n        // function taken from markings support in Flot\r\n        function extractRange(ranges, coord) {\r\n            var axis, from, to, key, axes = plot.getAxes();\r\n\r\n            for (var k in axes) {\r\n                axis = axes[k];\r\n                if (axis.direction === coord) {\r\n                    key = coord + axis.n + \"axis\";\r\n                    if (!ranges[key] && axis.n === 1) {\r\n                        // support x1axis as xaxis\r\n                        key = coord + \"axis\";\r\n                    }\r\n\r\n                    if (ranges[key]) {\r\n                        from = ranges[key].from;\r\n                        to = ranges[key].to;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // backwards-compat stuff - to be removed in future\r\n            if (!ranges[key]) {\r\n                axis = coord === \"x\" ? plot.getXAxes()[0] : plot.getYAxes()[0];\r\n                from = ranges[coord + \"1\"];\r\n                to = ranges[coord + \"2\"];\r\n            }\r\n\r\n            // auto-reverse as an added bonus\r\n            if (from != null && to != null && from > to) {\r\n                var tmp = from;\r\n                from = to;\r\n                to = tmp;\r\n            }\r\n\r\n            return { from: from, to: to, axis: axis };\r\n        }\r\n\r\n        function setSelection(ranges, preventEvent) {\r\n            var range;\r\n\r\n            if (selectionDirection(plot) === \"y\") {\r\n                selection.first.x = 0;\r\n                selection.second.x = plot.width();\r\n            } else {\r\n                range = extractRange(ranges, \"x\");\r\n                selection.first.x = range.axis.p2c(range.from);\r\n                selection.second.x = range.axis.p2c(range.to);\r\n            }\r\n\r\n            if (selectionDirection(plot) === \"x\") {\r\n                selection.first.y = 0;\r\n                selection.second.y = plot.height();\r\n            } else {\r\n                range = extractRange(ranges, \"y\");\r\n                selection.first.y = range.axis.p2c(range.from);\r\n                selection.second.y = range.axis.p2c(range.to);\r\n            }\r\n\r\n            selection.show = true;\r\n            plot.triggerRedrawOverlay();\r\n            if (!preventEvent && selectionIsSane()) {\r\n                triggerSelectedEvent();\r\n            }\r\n        }\r\n\r\n        function selectionIsSane() {\r\n            var minSize = plot.getOptions().selection.minSize;\r\n            return Math.abs(selection.second.x - selection.first.x) >= minSize &&\r\n                Math.abs(selection.second.y - selection.first.y) >= minSize;\r\n        }\r\n\r\n        plot.clearSelection = clearSelection;\r\n        plot.setSelection = setSelection;\r\n        plot.getSelection = getSelection;\r\n\r\n        plot.hooks.bindEvents.push(function(plot, eventHolder) {\r\n            var o = plot.getOptions();\r\n            if (o.selection.mode != null) {\r\n                eventHolder.mousemove(onMouseMove);\r\n                eventHolder.mousedown(onMouseDown);\r\n            }\r\n        });\r\n\r\n        function drawSelectionDecorations(ctx, x, y, w, h, oX, oY, mode) {\r\n            var spacing = 3;\r\n            var fullEarWidth = 15;\r\n            var earWidth = Math.max(0, Math.min(fullEarWidth, w / 2 - 2, h / 2 - 2));\r\n            ctx.fillStyle = '#ffffff';\r\n\r\n            if (mode === 'xy') {\r\n                ctx.beginPath();\r\n                ctx.moveTo(x, y + earWidth);\r\n                ctx.lineTo(x - 3, y + earWidth);\r\n                ctx.lineTo(x - 3, y - 3);\r\n                ctx.lineTo(x + earWidth, y - 3);\r\n                ctx.lineTo(x + earWidth, y);\r\n                ctx.lineTo(x, y);\r\n                ctx.closePath();\r\n\r\n                ctx.moveTo(x, y + h - earWidth);\r\n                ctx.lineTo(x - 3, y + h - earWidth);\r\n                ctx.lineTo(x - 3, y + h + 3);\r\n                ctx.lineTo(x + earWidth, y + h + 3);\r\n                ctx.lineTo(x + earWidth, y + h);\r\n                ctx.lineTo(x, y + h);\r\n                ctx.closePath();\r\n\r\n                ctx.moveTo(x + w, y + earWidth);\r\n                ctx.lineTo(x + w + 3, y + earWidth);\r\n                ctx.lineTo(x + w + 3, y - 3);\r\n                ctx.lineTo(x + w - earWidth, y - 3);\r\n                ctx.lineTo(x + w - earWidth, y);\r\n                ctx.lineTo(x + w, y);\r\n                ctx.closePath();\r\n\r\n                ctx.moveTo(x + w, y + h - earWidth);\r\n                ctx.lineTo(x + w + 3, y + h - earWidth);\r\n                ctx.lineTo(x + w + 3, y + h + 3);\r\n                ctx.lineTo(x + w - earWidth, y + h + 3);\r\n                ctx.lineTo(x + w - earWidth, y + h);\r\n                ctx.lineTo(x + w, y + h);\r\n                ctx.closePath();\r\n\r\n                ctx.stroke();\r\n                ctx.fill();\r\n            }\r\n\r\n            x = oX;\r\n            y = oY;\r\n\r\n            if (mode === 'x') {\r\n                ctx.beginPath();\r\n                ctx.moveTo(x, y + fullEarWidth);\r\n                ctx.lineTo(x, y - fullEarWidth);\r\n                ctx.lineTo(x - spacing, y - fullEarWidth);\r\n                ctx.lineTo(x - spacing, y + fullEarWidth);\r\n                ctx.closePath();\r\n\r\n                ctx.moveTo(x + w, y + fullEarWidth);\r\n                ctx.lineTo(x + w, y - fullEarWidth);\r\n                ctx.lineTo(x + w + spacing, y - fullEarWidth);\r\n                ctx.lineTo(x + w + spacing, y + fullEarWidth);\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n                ctx.fill();\r\n            }\r\n\r\n            if (mode === 'y') {\r\n                ctx.beginPath();\r\n\r\n                ctx.moveTo(x - fullEarWidth, y);\r\n                ctx.lineTo(x + fullEarWidth, y);\r\n                ctx.lineTo(x + fullEarWidth, y - spacing);\r\n                ctx.lineTo(x - fullEarWidth, y - spacing);\r\n                ctx.closePath();\r\n\r\n                ctx.moveTo(x - fullEarWidth, y + h);\r\n                ctx.lineTo(x + fullEarWidth, y + h);\r\n                ctx.lineTo(x + fullEarWidth, y + h + spacing);\r\n                ctx.lineTo(x - fullEarWidth, y + h + spacing);\r\n                ctx.closePath();\r\n                ctx.stroke();\r\n                ctx.fill();\r\n            }\r\n        }\r\n\r\n        plot.hooks.drawOverlay.push(function (plot, ctx) {\r\n            // draw selection\r\n            if (selection.show && selectionIsSane()) {\r\n                var plotOffset = plot.getPlotOffset();\r\n                var o = plot.getOptions();\r\n\r\n                ctx.save();\r\n                ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n                var c = $.color.parse(o.selection.color);\r\n\r\n                ctx.strokeStyle = c.scale('a', 1).toString();\r\n                ctx.lineWidth = 1;\r\n                ctx.lineJoin = o.selection.shape;\r\n                ctx.fillStyle = c.scale('a', 0.4).toString();\r\n\r\n                var x = Math.min(selection.first.x, selection.second.x) + 0.5,\r\n                    oX = x,\r\n                    y = Math.min(selection.first.y, selection.second.y) + 0.5,\r\n                    oY = y,\r\n                    w = Math.abs(selection.second.x - selection.first.x) - 1,\r\n                    h = Math.abs(selection.second.y - selection.first.y) - 1;\r\n\r\n                if (selectionDirection(plot) === 'x') {\r\n                    h += y;\r\n                    y = 0;\r\n                }\r\n\r\n                if (selectionDirection(plot) === 'y') {\r\n                    w += x;\r\n                    x = 0;\r\n                }\r\n\r\n                ctx.fillRect(0, 0, plot.width(), plot.height());\r\n                ctx.clearRect(x, y, w, h);\r\n                drawSelectionDecorations(ctx, x, y, w, h, oX, oY, selectionDirection(plot));\r\n\r\n                ctx.restore();\r\n            }\r\n        });\r\n\r\n        plot.hooks.shutdown.push(function (plot, eventHolder) {\r\n            eventHolder.unbind(\"mousemove\", onMouseMove);\r\n            eventHolder.unbind(\"mousedown\", onMouseDown);\r\n\r\n            if (mouseUpHandler) {\r\n                $(document).unbind(\"mouseup\", mouseUpHandler);\r\n            }\r\n        });\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: {\r\n            selection: {\r\n                mode: null, // one of null, \"x\", \"y\" or \"xy\"\r\n                color: \"#888888\",\r\n                shape: \"round\", // one of \"round\", \"miter\", or \"bevel\"\r\n                minSize: 5 // minimum number of pixels\r\n            }\r\n        },\r\n        name: 'selection',\r\n        version: '1.1'\r\n    });\r\n})(jQuery);\r\n","/** ## jquery.flot.composeImages.js\r\n\r\nThis plugin is used to expose a function used to overlap several canvases and\r\nSVGs, for the purpose of creating a snaphot out of them.\r\n\r\n### When composeImages is used:\r\nWhen multiple canvases and SVGs have to be overlapped into a single image\r\nand their offset on the page, must be preserved.\r\n\r\n### Where can be used:\r\nIn creating a downloadable snapshot of the plots, axes, cursors etc of a graph.\r\n\r\n### How it works:\r\nThe entry point is composeImages function. It expects an array of objects,\r\nwhich should be either canvases or SVGs (or a mix). It does a prevalidation\r\nof them, by verifying if they will be usable or not, later in the flow.\r\nAfter selecting only usable sources, it passes them to getGenerateTempImg\r\nfunction, which generates temporary images out of them. This function\r\nexpects that some of the passed sources (canvas or SVG) may still have\r\nproblems being converted to an image and makes sure the promises system,\r\nused by composeImages function, moves forward. As an example, SVGs with\r\nmissing information from header or with unsupported content, may lead to\r\nfailure in generating the temporary image. Temporary images are required\r\nmostly on extracting content from SVGs, but this is also where the x/y\r\noffsets are extracted for each image which will be added. For SVGs in\r\nparticular, their CSS rules have to be applied.\r\nAfter all temporary images are generated, they are overlapped using\r\ngetExecuteImgComposition function. This is where the destination canvas\r\nis set to the proper dimensions. It is then output by composeImages.\r\nThis function returns a promise, which can be used to wait for the whole\r\ncomposition process. It requires to be asynchronous, because this is how\r\ntemporary images load their data.\r\n*/\r\n\r\n(function($) {\r\n    \"use strict\";\r\n    const GENERALFAILURECALLBACKERROR = -100; //simply a negative number\r\n    const SUCCESSFULIMAGEPREPARATION = 0;\r\n    const EMPTYARRAYOFIMAGESOURCES = -1;\r\n    const NEGATIVEIMAGESIZE = -2;\r\n    var pixelRatio = 1;\r\n    var browser = $.plot.browser;\r\n    var getPixelRatio = browser.getPixelRatio;\r\n\r\n    function composeImages(canvasOrSvgSources, destinationCanvas) {\r\n        var validCanvasOrSvgSources = canvasOrSvgSources.filter(isValidSource);\r\n        pixelRatio = getPixelRatio(destinationCanvas.getContext('2d'));\r\n\r\n        var allImgCompositionPromises = validCanvasOrSvgSources.map(function(validCanvasOrSvgSource) {\r\n            var tempImg = new Image();\r\n            var currentPromise = new Promise(getGenerateTempImg(tempImg, validCanvasOrSvgSource));\r\n            return currentPromise;\r\n        });\r\n\r\n        var lastPromise = Promise.all(allImgCompositionPromises).then(getExecuteImgComposition(destinationCanvas), failureCallback);\r\n        return lastPromise;\r\n    }\r\n\r\n    function isValidSource(canvasOrSvgSource) {\r\n        var isValidFromCanvas = true;\r\n        var isValidFromContent = true;\r\n        if ((canvasOrSvgSource === null) || (canvasOrSvgSource === undefined)) {\r\n            isValidFromContent = false;\r\n        } else {\r\n            if (canvasOrSvgSource.tagName === 'CANVAS') {\r\n                if ((canvasOrSvgSource.getBoundingClientRect().right === canvasOrSvgSource.getBoundingClientRect().left) ||\r\n                    (canvasOrSvgSource.getBoundingClientRect().bottom === canvasOrSvgSource.getBoundingClientRect().top)) {\r\n                    isValidFromCanvas = false;\r\n                }\r\n            }\r\n        }\r\n        return isValidFromContent && isValidFromCanvas && (window.getComputedStyle(canvasOrSvgSource).visibility === 'visible');\r\n    }\r\n\r\n    function getGenerateTempImg(tempImg, canvasOrSvgSource) {\r\n        tempImg.sourceDescription = '<info className=\"' + canvasOrSvgSource.className + '\" tagName=\"' + canvasOrSvgSource.tagName + '\" id=\"' + canvasOrSvgSource.id + '\">';\r\n        tempImg.sourceComponent = canvasOrSvgSource;\r\n\r\n        return function doGenerateTempImg(successCallbackFunc, failureCallbackFunc) {\r\n            tempImg.onload = function(evt) {\r\n                tempImg.successfullyLoaded = true;\r\n                successCallbackFunc(tempImg);\r\n            };\r\n\r\n            tempImg.onabort = function(evt) {\r\n                tempImg.successfullyLoaded = false;\r\n                console.log('Can\\'t generate temp image from ' + tempImg.sourceDescription + '. It is possible that it is missing some properties or its content is not supported by this browser. Source component:', tempImg.sourceComponent);\r\n                successCallbackFunc(tempImg); //call successCallback, to allow snapshot of all working images\r\n            };\r\n\r\n            tempImg.onerror = function(evt) {\r\n                tempImg.successfullyLoaded = false;\r\n                console.log('Can\\'t generate temp image from ' + tempImg.sourceDescription + '. It is possible that it is missing some properties or its content is not supported by this browser. Source component:', tempImg.sourceComponent);\r\n                successCallbackFunc(tempImg); //call successCallback, to allow snapshot of all working images\r\n            };\r\n\r\n            generateTempImageFromCanvasOrSvg(canvasOrSvgSource, tempImg);\r\n        };\r\n    }\r\n\r\n    function getExecuteImgComposition(destinationCanvas) {\r\n        return function executeImgComposition(tempImgs) {\r\n            var compositionResult = copyImgsToCanvas(tempImgs, destinationCanvas);\r\n            return compositionResult;\r\n        };\r\n    }\r\n\r\n    function copyCanvasToImg(canvas, img) {\r\n        img.src = canvas.toDataURL('image/png');\r\n    }\r\n\r\n    function getCSSRules(document) {\r\n        var styleSheets = document.styleSheets,\r\n            rulesList = [];\r\n        for (var i = 0; i < styleSheets.length; i++) {\r\n            // in Chrome, the external CSS files are empty when the page is directly loaded from disk\r\n            var rules = styleSheets[i].cssRules || [];\r\n            for (var j = 0; j < rules.length; j++) {\r\n                var rule = rules[j];\r\n                rulesList.push(rule.cssText);\r\n            }\r\n        }\r\n        return rulesList;\r\n    }\r\n\r\n    function embedCSSRulesInSVG(rules, svg) {\r\n        var text = [\r\n            '<svg class=\"snapshot ' + svg.classList + '\" width=\"' + svg.width.baseVal.value * pixelRatio + '\" height=\"' + svg.height.baseVal.value * pixelRatio + '\" viewBox=\"0 0 ' + svg.width.baseVal.value + ' ' + svg.height.baseVal.value + '\" xmlns=\"http://www.w3.org/2000/svg\">',\r\n            '<style>',\r\n            '/* <![CDATA[ */',\r\n            rules.join('\\n'),\r\n            '/* ]]> */',\r\n            '</style>',\r\n            svg.innerHTML,\r\n            '</svg>'\r\n        ].join('\\n');\r\n        return text;\r\n    }\r\n\r\n    function copySVGToImgMostBrowsers(svg, img) {\r\n        var rules = getCSSRules(document),\r\n            source = embedCSSRulesInSVG(rules, svg);\r\n\r\n        source = patchSVGSource(source);\r\n\r\n        var blob = new Blob([source], {type: \"image/svg+xml;charset=utf-8\"}),\r\n            domURL = self.URL || self.webkitURL || self,\r\n            url = domURL.createObjectURL(blob);\r\n        img.src = url;\r\n    }\r\n\r\n    function copySVGToImgSafari(svg, img) {\r\n        // Use this method to convert a string buffer array to a binary string.\r\n        // Do so by breaking up large strings into smaller substrings; this is necessary to avoid the\r\n        // \"maximum call stack size exceeded\" exception that can happen when calling 'String.fromCharCode.apply'\r\n        // with a very long array.\r\n        function buildBinaryString (arrayBuffer) {\r\n            var binaryString = \"\";\r\n            const utf8Array = new Uint8Array(arrayBuffer);\r\n            const blockSize = 16384;\r\n            for (var i = 0; i < utf8Array.length; i = i + blockSize) {\r\n                const binarySubString = String.fromCharCode.apply(null, utf8Array.subarray(i, i + blockSize));\r\n                binaryString = binaryString + binarySubString;\r\n            }\r\n            return binaryString;\r\n        };\r\n\r\n        var rules = getCSSRules(document),\r\n            source = embedCSSRulesInSVG(rules, svg),\r\n            data,\r\n            utf8BinaryString;\r\n\r\n        source = patchSVGSource(source);\r\n\r\n        // Encode the string as UTF-8 and convert it to a binary string. The UTF-8 encoding is required to\r\n        // capture unicode characters correctly.\r\n        utf8BinaryString = buildBinaryString(new (TextEncoder || TextEncoderLite)('utf-8').encode(source));\r\n\r\n        data = \"data:image/svg+xml;base64,\" + btoa(utf8BinaryString);\r\n        img.src = data;\r\n    }\r\n\r\n    function patchSVGSource(svgSource) {\r\n        var source = '';\r\n        //add name spaces.\r\n        if (!svgSource.match(/^<svg[^>]+xmlns=\"http:\\/\\/www\\.w3\\.org\\/2000\\/svg\"/)) {\r\n            source = svgSource.replace(/^<svg/, '<svg xmlns=\"http://www.w3.org/2000/svg\"');\r\n        }\r\n        if (!svgSource.match(/^<svg[^>]+\"http:\\/\\/www\\.w3\\.org\\/1999\\/xlink\"/)) {\r\n            source = svgSource.replace(/^<svg/, '<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\"');\r\n        }\r\n\r\n        //add xml declaration\r\n        return '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source;\r\n    }\r\n\r\n    function copySVGToImg(svg, img) {\r\n        if (browser.isSafari() || browser.isMobileSafari()) {\r\n            copySVGToImgSafari(svg, img);\r\n        } else {\r\n            copySVGToImgMostBrowsers(svg, img);\r\n        }\r\n    }\r\n\r\n    function adaptDestSizeToZoom(destinationCanvas, sources) {\r\n        function containsSVGs(source) {\r\n            return source.srcImgTagName === 'svg';\r\n        }\r\n\r\n        if (sources.find(containsSVGs) !== undefined) {\r\n            if (pixelRatio < 1) {\r\n                destinationCanvas.width = destinationCanvas.width * pixelRatio;\r\n                destinationCanvas.height = destinationCanvas.height * pixelRatio;\r\n            }\r\n        }\r\n    }\r\n\r\n    function prepareImagesToBeComposed(sources, destination) {\r\n        var result = SUCCESSFULIMAGEPREPARATION;\r\n        if (sources.length === 0) {\r\n            result = EMPTYARRAYOFIMAGESOURCES; //nothing to do if called without sources\r\n        } else {\r\n            var minX = sources[0].genLeft;\r\n            var minY = sources[0].genTop;\r\n            var maxX = sources[0].genRight;\r\n            var maxY = sources[0].genBottom;\r\n            var i = 0;\r\n\r\n            for (i = 1; i < sources.length; i++) {\r\n                if (minX > sources[i].genLeft) {\r\n                    minX = sources[i].genLeft;\r\n                }\r\n\r\n                if (minY > sources[i].genTop) {\r\n                    minY = sources[i].genTop;\r\n                }\r\n            }\r\n\r\n            for (i = 1; i < sources.length; i++) {\r\n                if (maxX < sources[i].genRight) {\r\n                    maxX = sources[i].genRight;\r\n                }\r\n\r\n                if (maxY < sources[i].genBottom) {\r\n                    maxY = sources[i].genBottom;\r\n                }\r\n            }\r\n\r\n            if ((maxX - minX <= 0) || (maxY - minY <= 0)) {\r\n                result = NEGATIVEIMAGESIZE; //this might occur on hidden images\r\n            } else {\r\n                destination.width = Math.round(maxX - minX);\r\n                destination.height = Math.round(maxY - minY);\r\n\r\n                for (i = 0; i < sources.length; i++) {\r\n                    sources[i].xCompOffset = sources[i].genLeft - minX;\r\n                    sources[i].yCompOffset = sources[i].genTop - minY;\r\n                }\r\n\r\n                adaptDestSizeToZoom(destination, sources);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function copyImgsToCanvas(sources, destination) {\r\n        var prepareImagesResult = prepareImagesToBeComposed(sources, destination);\r\n        if (prepareImagesResult === SUCCESSFULIMAGEPREPARATION) {\r\n            var destinationCtx = destination.getContext('2d');\r\n\r\n            for (var i = 0; i < sources.length; i++) {\r\n                if (sources[i].successfullyLoaded === true) {\r\n                    destinationCtx.drawImage(sources[i], sources[i].xCompOffset * pixelRatio, sources[i].yCompOffset * pixelRatio);\r\n                }\r\n            }\r\n        }\r\n        return prepareImagesResult;\r\n    }\r\n\r\n    function adnotateDestImgWithBoundingClientRect(srcCanvasOrSvg, destImg) {\r\n        destImg.genLeft = srcCanvasOrSvg.getBoundingClientRect().left;\r\n        destImg.genTop = srcCanvasOrSvg.getBoundingClientRect().top;\r\n\r\n        if (srcCanvasOrSvg.tagName === 'CANVAS') {\r\n            destImg.genRight = destImg.genLeft + srcCanvasOrSvg.width;\r\n            destImg.genBottom = destImg.genTop + srcCanvasOrSvg.height;\r\n        }\r\n\r\n        if (srcCanvasOrSvg.tagName === 'svg') {\r\n            destImg.genRight = srcCanvasOrSvg.getBoundingClientRect().right;\r\n            destImg.genBottom = srcCanvasOrSvg.getBoundingClientRect().bottom;\r\n        }\r\n    }\r\n\r\n    function generateTempImageFromCanvasOrSvg(srcCanvasOrSvg, destImg) {\r\n        if (srcCanvasOrSvg.tagName === 'CANVAS') {\r\n            copyCanvasToImg(srcCanvasOrSvg, destImg);\r\n        }\r\n\r\n        if (srcCanvasOrSvg.tagName === 'svg') {\r\n            copySVGToImg(srcCanvasOrSvg, destImg);\r\n        }\r\n\r\n        destImg.srcImgTagName = srcCanvasOrSvg.tagName;\r\n        adnotateDestImgWithBoundingClientRect(srcCanvasOrSvg, destImg);\r\n    }\r\n\r\n    function failureCallback() {\r\n        return GENERALFAILURECALLBACKERROR;\r\n    }\r\n\r\n    // used for testing\r\n    $.plot.composeImages = composeImages;\r\n\r\n    function init(plot) {\r\n        // used to extend the public API of the plot\r\n        plot.composeImages = composeImages;\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        name: 'composeImages',\r\n        version: '1.0'\r\n    });\r\n})(jQuery);\r\n","/* Flot plugin for drawing legends.\r\n\r\n*/\r\n\r\n(function($) {\r\n    var placeholder;\r\n\r\n    var options = {\r\n        legend: {\r\n            show: false,\r\n            labelFormatter: null, // fn: string -> string\r\n            container: null, // container (as jQuery object) to put legend in, null means default on top of graph\r\n            position: 'ne', // position of default legend container within plot\r\n            margin: 5, // distance from grid edge to default legend container within plot\r\n            sorted: null // default to no legend sorting\r\n        }\r\n    };\r\n\r\n    function insertLegend(plot, legendEntries) {\r\n        // clear before redraw\r\n        if (options.legend.container != null) {\r\n            $(options.legend.container).html('');\r\n        } else {\r\n            placeholder.find('.legend').remove();\r\n        }\r\n\r\n        if (!options.legend.show) {\r\n            return;\r\n        }\r\n\r\n        // Save the legend entries in legend options\r\n        var entries = options.legend.legendEntries = legendEntries,\r\n            plotOffset = options.legend.plotOffset = plot.getPlotOffset(),\r\n            html = [],\r\n            entry, labelHtml, iconHtml,\r\n            maxLabelLength = 0,\r\n            j = 0,\r\n            pos = \"\",\r\n            p = options.legend.position,\r\n            m = options.legend.margin,\r\n            shape = {\r\n                name: '',\r\n                label: '',\r\n                xPos: '',\r\n                yPos: ''\r\n            };\r\n\r\n        html[j++] = '<svg class=\"legendLayer\" style=\"width:inherit;height:inherit;\">';\r\n        html[j++] = '<rect class=\"background\" width=\"100%\" height=\"100%\"/>';\r\n        html[j++] = svgShapeDefs;\r\n\r\n        // Generate html for icons and labels from a list of entries\r\n        for (var i = 0; i < entries.length; ++i) {\r\n            entry = entries[i];\r\n            iconHtml = '';\r\n            shape.label = entry.label;\r\n            shape.xPos = '0em';\r\n            shape.yPos = i * 1.5 + 'em';\r\n            // area\r\n            if (entry.options.lines.show && entry.options.lines.fill) {\r\n                shape.name = 'area';\r\n                shape.fillColor = entry.color;\r\n                iconHtml += getEntryIconHtml(shape);\r\n            }\r\n            // bars\r\n            if (entry.options.bars.show) {\r\n                shape.name = 'bar';\r\n                shape.fillColor = entry.color;\r\n                iconHtml += getEntryIconHtml(shape);\r\n            }\r\n            // lines\r\n            if (entry.options.lines.show && !entry.options.lines.fill) {\r\n                shape.name = 'line';\r\n                shape.strokeColor = entry.color;\r\n                shape.strokeWidth = entry.options.lines.lineWidth;\r\n                iconHtml += getEntryIconHtml(shape);\r\n            }\r\n            // points\r\n            if (entry.options.points.show) {\r\n                shape.name = entry.options.points.symbol;\r\n                shape.strokeColor = entry.color;\r\n                shape.fillColor = entry.options.points.fillColor;\r\n                shape.strokeWidth = entry.options.points.lineWidth;\r\n                iconHtml += getEntryIconHtml(shape);\r\n            }\r\n\r\n            maxLabelLength = maxLabelLength < shape.label.length ? shape.label.length : maxLabelLength;\r\n            labelHtml = '<text x=\"' + shape.xPos + '\" y=\"' + shape.yPos + '\" text-anchor=\"start\"><tspan dx=\"2em\" dy=\"1.2em\">' + shape.label + '</tspan></text>'\r\n            html[j++] = '<g>' + iconHtml + labelHtml + '</g>';\r\n        }\r\n\r\n        html[j++] = '</svg>';\r\n        if (m[0] == null) {\r\n            m = [m, m];\r\n        }\r\n\r\n        if (p.charAt(0) === 'n') {\r\n            pos += 'top:' + (m[1] + plotOffset.top) + 'px;';\r\n        } else if (p.charAt(0) === 's') {\r\n            pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';\r\n        }\r\n\r\n        if (p.charAt(1) === 'e') {\r\n            pos += 'right:' + (m[0] + plotOffset.right) + 'px;';\r\n        } else if (p.charAt(1) === 'w') {\r\n            pos += 'left:' + (m[0] + plotOffset.left) + 'px;';\r\n        }\r\n\r\n        var legendEl,\r\n            width = 3 + maxLabelLength / 2,\r\n            height = entries.length * 1.6;\r\n        if (!options.legend.container) {\r\n            legendEl = $('<div class=\"legend\" style=\"position:absolute;' + pos + '\">' + html.join('') + '</div>').appendTo(placeholder);\r\n            legendEl.css('width', width + 'em');\r\n            legendEl.css('height', height + 'em');\r\n            legendEl.css('pointerEvents', 'none');\r\n        } else {\r\n            legendEl = $(html.join('')).appendTo(options.legend.container)[0];\r\n            options.legend.container.style.width = width + 'em';\r\n            options.legend.container.style.height = height + 'em';\r\n        }\r\n    }\r\n\r\n    // Generate html for a shape\r\n    function getEntryIconHtml(shape) {\r\n        var html = '',\r\n            name = shape.name,\r\n            x = shape.xPos,\r\n            y = shape.yPos,\r\n            fill = shape.fillColor,\r\n            stroke = shape.strokeColor,\r\n            width = shape.strokeWidth;\r\n        switch (name) {\r\n            case 'circle':\r\n                html = '<use xlink:href=\"#circle\" class=\"legendIcon\" ' +\r\n                    'x=\"' + x + '\" ' +\r\n                    'y=\"' + y + '\" ' +\r\n                    'fill=\"' + fill + '\" ' +\r\n                    'stroke=\"' + stroke + '\" ' +\r\n                    'stroke-width=\"' + width + '\" ' +\r\n                    'width=\"1.5em\" height=\"1.5em\"' +\r\n                    '/>';\r\n                break;\r\n            case 'diamond':\r\n                html = '<use xlink:href=\"#diamond\" class=\"legendIcon\" ' +\r\n                    'x=\"' + x + '\" ' +\r\n                    'y=\"' + y + '\" ' +\r\n                    'fill=\"' + fill + '\" ' +\r\n                    'stroke=\"' + stroke + '\" ' +\r\n                    'stroke-width=\"' + width + '\" ' +\r\n                    'width=\"1.5em\" height=\"1.5em\"' +\r\n                    '/>';\r\n                break;\r\n            case 'cross':\r\n                html = '<use xlink:href=\"#cross\" class=\"legendIcon\" ' +\r\n                    'x=\"' + x + '\" ' +\r\n                    'y=\"' + y + '\" ' +\r\n                    // 'fill=\"' + fill + '\" ' +\r\n                    'stroke=\"' + stroke + '\" ' +\r\n                    'stroke-width=\"' + width + '\" ' +\r\n                    'width=\"1.5em\" height=\"1.5em\"' +\r\n                    '/>';\r\n                break;\r\n            case 'rectangle':\r\n                html = '<use xlink:href=\"#rectangle\" class=\"legendIcon\" ' +\r\n                    'x=\"' + x + '\" ' +\r\n                    'y=\"' + y + '\" ' +\r\n                    'fill=\"' + fill + '\" ' +\r\n                    'stroke=\"' + stroke + '\" ' +\r\n                    'stroke-width=\"' + width + '\" ' +\r\n                    'width=\"1.5em\" height=\"1.5em\"' +\r\n                    '/>';\r\n                break;\r\n            case 'plus':\r\n                html = '<use xlink:href=\"#plus\" class=\"legendIcon\" ' +\r\n                    'x=\"' + x + '\" ' +\r\n                    'y=\"' + y + '\" ' +\r\n                    // 'fill=\"' + fill + '\" ' +\r\n                    'stroke=\"' + stroke + '\" ' +\r\n                    'stroke-width=\"' + width + '\" ' +\r\n                    'width=\"1.5em\" height=\"1.5em\"' +\r\n                    '/>';\r\n                break;\r\n            case 'bar':\r\n                html = '<use xlink:href=\"#bars\" class=\"legendIcon\" ' +\r\n                    'x=\"' + x + '\" ' +\r\n                    'y=\"' + y + '\" ' +\r\n                    'fill=\"' + fill + '\" ' +\r\n                    // 'stroke=\"' + stroke + '\" ' +\r\n                    // 'stroke-width=\"' + width + '\" ' +\r\n                    'width=\"1.5em\" height=\"1.5em\"' +\r\n                    '/>';\r\n                break;\r\n            case 'area':\r\n                html = '<use xlink:href=\"#area\" class=\"legendIcon\" ' +\r\n                    'x=\"' + x + '\" ' +\r\n                    'y=\"' + y + '\" ' +\r\n                    'fill=\"' + fill + '\" ' +\r\n                    // 'stroke=\"' + stroke + '\" ' +\r\n                    // 'stroke-width=\"' + width + '\" ' +\r\n                    'width=\"1.5em\" height=\"1.5em\"' +\r\n                    '/>';\r\n                break;\r\n            case 'line':\r\n                html = '<use xlink:href=\"#line\" class=\"legendIcon\" ' +\r\n                    'x=\"' + x + '\" ' +\r\n                    'y=\"' + y + '\" ' +\r\n                    // 'fill=\"' + fill + '\" ' +\r\n                    'stroke=\"' + stroke + '\" ' +\r\n                    'stroke-width=\"' + width + '\" ' +\r\n                    'width=\"1.5em\" height=\"1.5em\"' +\r\n                    '/>';\r\n                break;\r\n            default:\r\n                // default is circle\r\n                html = '<use xlink:href=\"#circle\" class=\"legendIcon\" ' +\r\n                    'x=\"' + x + '\" ' +\r\n                    'y=\"' + y + '\" ' +\r\n                    'fill=\"' + fill + '\" ' +\r\n                    'stroke=\"' + stroke + '\" ' +\r\n                    'stroke-width=\"' + width + '\" ' +\r\n                    'width=\"1.5em\" height=\"1.5em\"' +\r\n                    '/>';\r\n        }\r\n\r\n        return html;\r\n    }\r\n\r\n    // Define svg symbols for shapes\r\n    var svgShapeDefs = '' +\r\n        '<defs>' +\r\n            '<symbol id=\"line\" fill=\"none\" viewBox=\"-5 -5 25 25\">' +\r\n                '<polyline points=\"0,15 5,5 10,10 15,0\"/>' +\r\n            '</symbol>' +\r\n\r\n            '<symbol id=\"area\" stroke-width=\"1\" viewBox=\"-5 -5 25 25\">' +\r\n                '<polyline points=\"0,15 5,5 10,10 15,0, 15,15, 0,15\"/>' +\r\n            '</symbol>' +\r\n\r\n            '<symbol id=\"bars\" stroke-width=\"1\" viewBox=\"-5 -5 25 25\">' +\r\n                '<polyline points=\"1.5,15.5 1.5,12.5, 4.5,12.5 4.5,15.5 6.5,15.5 6.5,3.5, 9.5,3.5 9.5,15.5 11.5,15.5 11.5,7.5 14.5,7.5 14.5,15.5 1.5,15.5\"/>' +\r\n            '</symbol>' +\r\n\r\n            '<symbol id=\"circle\" viewBox=\"-5 -5 25 25\">' +\r\n                '<circle cx=\"0\" cy=\"15\" r=\"2.5\"/>' +\r\n                '<circle cx=\"5\" cy=\"5\" r=\"2.5\"/>' +\r\n                '<circle cx=\"10\" cy=\"10\" r=\"2.5\"/>' +\r\n                '<circle cx=\"15\" cy=\"0\" r=\"2.5\"/>' +\r\n            '</symbol>' +\r\n\r\n            '<symbol id=\"rectangle\" viewBox=\"-5 -5 25 25\">' +\r\n                '<rect x=\"-2.1\" y=\"12.9\" width=\"4.2\" height=\"4.2\"/>' +\r\n                '<rect x=\"2.9\" y=\"2.9\" width=\"4.2\" height=\"4.2\"/>' +\r\n                '<rect x=\"7.9\" y=\"7.9\" width=\"4.2\" height=\"4.2\"/>' +\r\n                '<rect x=\"12.9\" y=\"-2.1\" width=\"4.2\" height=\"4.2\"/>' +\r\n            '</symbol>' +\r\n\r\n            '<symbol id=\"diamond\" viewBox=\"-5 -5 25 25\">' +\r\n                '<path d=\"M-3,15 L0,12 L3,15, L0,18 Z\"/>' +\r\n                '<path d=\"M2,5 L5,2 L8,5, L5,8 Z\"/>' +\r\n                '<path d=\"M7,10 L10,7 L13,10, L10,13 Z\"/>' +\r\n                '<path d=\"M12,0 L15,-3 L18,0, L15,3 Z\"/>' +\r\n            '</symbol>' +\r\n\r\n            '<symbol id=\"cross\" fill=\"none\" viewBox=\"-5 -5 25 25\">' +\r\n                '<path d=\"M-2.1,12.9 L2.1,17.1, M2.1,12.9 L-2.1,17.1 Z\"/>' +\r\n                '<path d=\"M2.9,2.9 L7.1,7.1 M7.1,2.9 L2.9,7.1 Z\"/>' +\r\n                '<path d=\"M7.9,7.9 L12.1,12.1 M12.1,7.9 L7.9,12.1 Z\"/>' +\r\n                '<path d=\"M12.9,-2.1 L17.1,2.1 M17.1,-2.1 L12.9,2.1 Z\"/>' +\r\n            '</symbol>' +\r\n\r\n            '<symbol id=\"plus\" fill=\"none\" viewBox=\"-5 -5 25 25\">' +\r\n                '<path d=\"M0,12 L0,18, M-3,15 L3,15 Z\"/>' +\r\n                '<path d=\"M5,2 L5,8 M2,5 L8,5 Z\"/>' +\r\n                '<path d=\"M10,7 L10,13 M7,10 L13,10 Z\"/>' +\r\n                '<path d=\"M15,-3 L15,3 M12,0 L18,0 Z\"/>' +\r\n            '</symbol>' +\r\n        '</defs>';\r\n\r\n    // Generate a list of legend entries in their final order\r\n    function getLegendEntries(series, labelFormatter, sorted) {\r\n        var lf = labelFormatter,\r\n            legendEntries = series.map(function(s, i) {\r\n                return {\r\n                    label: (lf ? lf(s.label, s) : s.label) || 'Plot ' + (i + 1),\r\n                    color: s.color,\r\n                    options: {\r\n                        lines: s.lines,\r\n                        points: s.points,\r\n                        bars: s.bars\r\n                    }\r\n                };\r\n            });\r\n\r\n        // Sort the legend using either the default or a custom comparator\r\n        if (sorted) {\r\n            if ($.isFunction(sorted)) {\r\n                legendEntries.sort(sorted);\r\n            } else if (sorted === 'reverse') {\r\n                legendEntries.reverse();\r\n            } else {\r\n                var ascending = (sorted !== 'descending');\r\n                legendEntries.sort(function(a, b) {\r\n                    return a.label === b.label\r\n                        ? 0\r\n                        : ((a.label < b.label) !== ascending ? 1 : -1 // Logical XOR\r\n                        );\r\n                });\r\n            }\r\n        }\r\n\r\n        return legendEntries;\r\n    }\r\n\r\n    // return false if opts1 same as opts2\r\n    function checkOptions(opts1, opts2) {\r\n        for (var prop in opts1) {\r\n            if (opts1.hasOwnProperty(prop)) {\r\n                if (opts1[prop] !== opts2[prop]) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // Compare two lists of legend entries\r\n    function shouldRedraw(oldEntries, newEntries) {\r\n        if (!oldEntries || !newEntries) {\r\n            return true;\r\n        }\r\n\r\n        if (oldEntries.length !== newEntries.length) {\r\n            return true;\r\n        }\r\n        var i, newEntry, oldEntry, newOpts, oldOpts;\r\n        for (i = 0; i < newEntries.length; i++) {\r\n            newEntry = newEntries[i];\r\n            oldEntry = oldEntries[i];\r\n\r\n            if (newEntry.label !== oldEntry.label) {\r\n                return true;\r\n            }\r\n\r\n            if (newEntry.color !== oldEntry.color) {\r\n                return true;\r\n            }\r\n\r\n            // check for changes in lines options\r\n            newOpts = newEntry.options.lines;\r\n            oldOpts = oldEntry.options.lines;\r\n            if (checkOptions(newOpts, oldOpts)) {\r\n                return true;\r\n            }\r\n\r\n            // check for changes in points options\r\n            newOpts = newEntry.options.points;\r\n            oldOpts = oldEntry.options.points;\r\n            if (checkOptions(newOpts, oldOpts)) {\r\n                return true;\r\n            }\r\n\r\n            // check for changes in bars options\r\n            newOpts = newEntry.options.bars;\r\n            oldOpts = oldEntry.options.bars;\r\n            if (checkOptions(newOpts, oldOpts)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function init(plot) {\r\n        placeholder = plot.getPlaceholder();\r\n        options = plot.getOptions();\r\n\r\n        plot.hooks.setupGrid.push(function (plot) {\r\n            var series = plot.getData(),\r\n                labelFormatter = options.legend.labelFormatter,\r\n                oldEntries = options.legend.legendEntries,\r\n                oldPlotOffset = options.legend.plotOffset,\r\n                newEntries = getLegendEntries(series, labelFormatter, options.legend.sorted),\r\n                newPlotOffset = plot.getPlotOffset();\r\n\r\n            if (shouldRedraw(oldEntries, newEntries) ||\r\n                checkOptions(oldPlotOffset, newPlotOffset)) {\r\n                insertLegend(plot, newEntries);\r\n            }\r\n        });\r\n    }\r\n\r\n    $.plot.plugins.push({\r\n        init: init,\r\n        options: options,\r\n        name: 'legend',\r\n        version: '1.0'\r\n    });\r\n})(jQuery);\r\n"]}